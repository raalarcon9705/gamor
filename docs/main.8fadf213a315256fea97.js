(self.webpackChunkgamor=self.webpackChunkgamor||[]).push([[179],{8255:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=8255,e.exports=t},8583:(e,t,n)=>{"use strict";n.d(t,{mr:()=>_,Ov:()=>z,ez:()=>B,K0:()=>u,Do:()=>I,V_:()=>h,Ye:()=>T,S$:()=>v,sg:()=>O,O5:()=>P,tP:()=>M,b0:()=>b,lw:()=>c,EM:()=>Z,JF:()=>Q,NF:()=>$,PM:()=>G,w_:()=>a,bD:()=>H,q:()=>s,Mx:()=>N,HT:()=>o});var r=n(3018);let i=null;function s(){return i}function o(e){i||(i=e)}class a{}const u=new r.OlP("DocumentToken");let c=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:l,token:e,providedIn:"platform"}),e})();function l(){return(0,r.LFG)(d)}const h=new r.OlP("Location Initialized");let d=(()=>{class e extends c{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){f()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){f()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(u))},e.\u0275prov=(0,r.Yz7)({factory:p,token:e,providedIn:"platform"}),e})();function f(){return!!window.history.pushState}function p(){return new d((0,r.LFG)(u))}function g(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function m(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function y(e){return e&&"?"!==e[0]?"?"+e:e}let v=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:w,token:e,providedIn:"root"}),e})();function w(e){const t=(0,r.LFG)(u).location;return new b((0,r.LFG)(c),t&&t.origin||"")}const _=new r.OlP("appBaseHref");let b=(()=>{class e extends v{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return g(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c),r.LFG(_,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),I=(()=>{class e extends v{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=g(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c),r.LFG(_,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),T=(()=>{class e{constructor(e,t){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=m(E(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+y(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,E(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+y(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+y(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(v),r.LFG(c))},e.normalizeQueryParams=y,e.joinWithSlash=g,e.stripTrailingSlash=m,e.\u0275prov=(0,r.Yz7)({factory:S,token:e,providedIn:"root"}),e})();function S(){return new T((0,r.LFG)(v),(0,r.LFG)(c))}function E(e){return e.replace(/\/index.html$/,"")}var C=(()=>((C=C||{})[C.Zero=0]="Zero",C[C.One=1]="One",C[C.Two=2]="Two",C[C.Few=3]="Few",C[C.Many=4]="Many",C[C.Other=5]="Other",C))();const k=r.kL8;class A{}let x=(()=>{class e extends A{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(k(t||this.locale)(e)){case C.Zero:return"zero";case C.One:return"one";case C.Two:return"two";case C.Few:return"few";case C.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.soG))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function N(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}class R{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let O=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new R(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new D(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new D(e,i);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class D{constructor(e,t){this.record=e,this.view=t}}let P=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new L,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){F("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){F("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class L{constructor(){this.$implicit=null,this.ngIf=null}}function F(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${(0,r.AaK)(t)}'.`)}let M=(()=>{class e{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const e=this._viewContainerRef;this._viewRef&&e.remove(e.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?e.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[r.TTD]}),e})();class U{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class V{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const j=new V,q=new U;let z=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if((0,r.QGY)(t))return j;if((0,r.F4k)(t))return q;throw Error(`InvalidPipeArgument: '${t}' for pipe '${(0,r.AaK)(e)}'`)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.sBO,16))},e.\u0275pipe=r.Yjl({name:"async",type:e,pure:!1}),e})(),B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[{provide:A,useClass:x}]}),e})();const H="browser";function $(e){return e===H}function G(e){return"server"===e}let Z=(()=>{class e{}return e.\u0275prov=(0,r.Yz7)({token:e,providedIn:"root",factory:()=>new K((0,r.LFG)(u),window)}),e})();class K{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=W(this.window.history)||W(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function W(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Q{}},3018:(e,t,n)=>{"use strict";n.d(t,{deG:()=>sn,tb:()=>Nu,AFp:()=>Eu,ip1:()=>Tu,CZH:()=>Su,hGG:()=>Tc,z2F:()=>fc,sBO:()=>Ca,Sil:()=>qu,_Vd:()=>Qo,EJc:()=>Du,SBq:()=>ea,qLn:()=>_r,vpe:()=>ru,gxx:()=>os,tBr:()=>Cn,XFs:()=>R,OlP:()=>rn,zs3:()=>bs,ZZ4:()=>wa,aQg:()=>ba,soG:()=>Ou,YKP:()=>Fa,v3s:()=>gc,h0i:()=>La,PXZ:()=>uc,R0b:()=>Hu,FiY:()=>kn,Lbi:()=>xu,g9A:()=>Au,Qsj:()=>ra,FYo:()=>na,JOm:()=>Tr,Tiy:()=>sa,q3G:()=>pr,tp0:()=>An,EAV:()=>vc,Rgc:()=>Ra,dDg:()=>Yu,DyG:()=>on,q4F:()=>aa,GfV:()=>oa,s_b:()=>Ua,ifc:()=>M,eFA:()=>cc,G48:()=>oc,Gpc:()=>g,f3M:()=>Tn,X6Q:()=>sc,_c5:()=>bc,VLi:()=>ec,c2e:()=>Ru,zSh:()=>us,wAp:()=>Fo,vHH:()=>v,EiD:()=>dr,mCW:()=>Wn,qzn:()=>Un,JVY:()=>jn,pB0:()=>Hn,eBb:()=>zn,L6k:()=>qn,LAX:()=>Bn,cg1:()=>Do,Tjo:()=>_c,kL8:()=>Po,yhl:()=>Vn,dqk:()=>z,sIi:()=>Rs,CqO:()=>Ys,QGY:()=>Ws,F4k:()=>Qs,RDi:()=>Ce,AaK:()=>d,z3N:()=>Mn,qOj:()=>Ts,TTD:()=>_e,_Bn:()=>Zo,xp6:()=>li,uIk:()=>Ls,Gre:()=>Ao,ekj:()=>fo,Suo:()=>yu,Xpm:()=>X,lG2:()=>oe,Yz7:()=>I,cJS:()=>T,oAB:()=>re,Yjl:()=>ae,Y36:()=>Vs,_UZ:()=>Hs,GkF:()=>Zs,BQk:()=>Gs,ynx:()=>$s,qZA:()=>Bs,TgZ:()=>zs,EpF:()=>Ks,n5z:()=>Jt,Ikx:()=>xo,LFG:()=>In,$8M:()=>en,NdJ:()=>Js,CRH:()=>vu,oxw:()=>to,ALo:()=>eu,lcZ:()=>tu,Hsn:()=>io,F$t:()=>ro,Q6J:()=>js,DdM:()=>Xa,iGM:()=>gu,MAs:()=>Us,CHM:()=>He,LSH:()=>gr,kYT:()=>ie,Udp:()=>ho,YNc:()=>Ms,W1O:()=>Iu,_uU:()=>So,Oqu:()=>Eo,hij:()=>Co,AsE:()=>ko,Gf:()=>mu});var r=n(9765),i=n(5319),s=n(7574),o=n(6682),a=n(2441),u=n(1307);function c(){return new r.xQ}function l(e){for(let t in e)if(e[t]===l)return t;throw Error("Could not find renamed property on target object.")}function h(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function d(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(d).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function f(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const p=l({__forward_ref__:l});function g(e){return e.__forward_ref__=g,e.toString=function(){return d(this())},e}function m(e){return y(e)?e():e}function y(e){return"function"==typeof e&&e.hasOwnProperty(p)&&e.__forward_ref__===g}class v extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function w(e){return"string"==typeof e?e:null==e?"":String(e)}function _(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():w(e)}function b(e,t){const n=t?` in ${t}`:"";throw new v("201",`No provider for ${_(e)} found${n}`)}function I(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function T(e){return{providers:e.providers||[],imports:e.imports||[]}}function S(e){return E(e,k)||E(e,x)}function E(e,t){return e.hasOwnProperty(t)?e[t]:null}function C(e){return e&&(e.hasOwnProperty(A)||e.hasOwnProperty(N))?e[A]:null}const k=l({"\u0275prov":l}),A=l({"\u0275inj":l}),x=l({ngInjectableDef:l}),N=l({ngInjectorDef:l});var R=(()=>((R=R||{})[R.Default=0]="Default",R[R.Host=1]="Host",R[R.Self=2]="Self",R[R.SkipSelf=4]="SkipSelf",R[R.Optional=8]="Optional",R))();let O;function D(e){const t=O;return O=e,t}function P(e,t,n){const r=S(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&R.Optional?null:void 0!==t?t:void b(d(e),"Injector")}function L(e){return{toString:e}.toString()}var F=(()=>((F=F||{})[F.OnPush=0]="OnPush",F[F.Default=1]="Default",F))(),M=(()=>((M=M||{})[M.Emulated=0]="Emulated",M[M.None=2]="None",M[M.ShadowDom=3]="ShadowDom",M))();const U="undefined"!=typeof globalThis&&globalThis,V="undefined"!=typeof window&&window,j="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,z=U||q||V||j,B={},H=[],$=l({"\u0275cmp":l}),G=l({"\u0275dir":l}),Z=l({"\u0275pipe":l}),K=l({"\u0275mod":l}),W=l({"\u0275loc":l}),Q=l({"\u0275fac":l}),Y=l({__NG_ELEMENT_ID__:l});let J=0;function X(e){return L(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||H,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||M.Emulated,id:"c",styles:e.styles||H,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=J++,n.inputs=se(e.inputs,t),n.outputs=se(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ee):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(te):null,n})}function ee(e){return ue(e)||function(e){return e[G]||null}(e)}function te(e){return function(e){return e[Z]||null}(e)}const ne={};function re(e){return L(()=>{const t={type:e.type,bootstrap:e.bootstrap||H,declarations:e.declarations||H,imports:e.imports||H,exports:e.exports||H,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ne[e.id]=e.type),t})}function ie(e,t){return L(()=>{const n=ce(e,!0);n.declarations=t.declarations||H,n.imports=t.imports||H,n.exports=t.exports||H})}function se(e,t){if(null==e)return B;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const oe=X;function ae(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ue(e){return e[$]||null}function ce(e,t){const n=e[K]||null;if(!n&&!0===t)throw new Error(`Type ${d(e)} does not have '\u0275mod' property.`);return n}const le=20,he=10;function de(e){return Array.isArray(e)&&"object"==typeof e[1]}function fe(e){return Array.isArray(e)&&!0===e[1]}function pe(e){return 0!=(8&e.flags)}function ge(e){return 2==(2&e.flags)}function me(e){return 1==(1&e.flags)}function ye(e){return null!==e.template}function ve(e,t){return e.hasOwnProperty(Q)?e[Q]:null}class we{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function _e(){return be}function be(e){return e.type.prototype.ngOnChanges&&(e.setInput=Te),Ie}function Ie(){const e=Se(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===B)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function Te(e,t,n,r){const i=Se(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:B,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new we(u&&u.currentValue,t,o===B),e[r]=t}function Se(e){return e.__ngSimpleChanges__||null}let Ee;function Ce(e){Ee=e}function ke(e){return!!e.listen}_e.ngInherit=!0;const Ae={createRenderer:(e,t)=>void 0!==Ee?Ee:"undefined"!=typeof document?document:void 0};function xe(e){for(;Array.isArray(e);)e=e[0];return e}function Ne(e,t){return xe(t[e])}function Re(e,t){return xe(t[e.index])}function Oe(e,t){return e.data[t]}function De(e,t){return e[t]}function Pe(e,t){const n=t[e];return de(n)?n:n[0]}function Le(e){return 4==(4&e[2])}function Fe(e){return 128==(128&e[2])}function Me(e,t){return null==t?null:e[t]}function Ue(e){e[18]=0}function Ve(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const je={lFrame:lt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qe(){return je.bindingsEnabled}function ze(){return je.lFrame.lView}function Be(){return je.lFrame.tView}function He(e){return je.lFrame.contextLView=e,e[8]}function $e(){let e=Ge();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ge(){return je.lFrame.currentTNode}function Ze(e,t){const n=je.lFrame;n.currentTNode=e,n.isParent=t}function Ke(){return je.lFrame.isParent}function We(){je.lFrame.isParent=!1}function Qe(){return je.isInCheckNoChangesMode}function Ye(e){je.isInCheckNoChangesMode=e}function Je(){const e=je.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Xe(){return je.lFrame.bindingIndex}function et(){return je.lFrame.bindingIndex++}function tt(e){const t=je.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function nt(e,t){const n=je.lFrame;n.bindingIndex=n.bindingRootIndex=e,rt(t)}function rt(e){je.lFrame.currentDirectiveIndex=e}function it(){return je.lFrame.currentQueryIndex}function st(e){je.lFrame.currentQueryIndex=e}function ot(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function at(e,t,n){if(n&R.SkipSelf){let r=t,i=e;for(;r=r.parent,!(null!==r||n&R.Host||(r=ot(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}const r=je.lFrame=ct();return r.currentTNode=t,r.lView=e,!0}function ut(e){const t=ct(),n=e[1];je.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function ct(){const e=je.lFrame,t=null===e?null:e.child;return null===t?lt(e):t}function lt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function ht(){const e=je.lFrame;return je.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const dt=ht;function ft(){const e=ht();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function pt(){return je.lFrame.selectedIndex}function gt(e){je.lFrame.selectedIndex=e}function mt(){const e=je.lFrame;return Oe(e.tView,e.selectedIndex)}function yt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function vt(e,t,n){bt(e,t,3,n)}function wt(e,t,n,r){(3&e[2])===n&&bt(e,t,n,r)}function _t(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function bt(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(It(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function It(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const Tt=-1;class St{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function Et(e,t,n){const r=ke(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?e.setAttribute(t,a,u,o):t.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];kt(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function Ct(e){return 3===e||4===e||6===e}function kt(e){return 64===e.charCodeAt(0)}function At(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||xt(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function xt(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function Nt(e){return e!==Tt}function Rt(e){return 32767&e}function Ot(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Dt=!0;function Pt(e){const t=Dt;return Dt=e,t}let Lt=0;function Ft(e,t){const n=Ut(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Mt(r.data,e),Mt(t,null),Mt(r.blueprint,null));const i=Vt(e,t),s=e.injectorIndex;if(Nt(i)){const e=Rt(i),n=Ot(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function Mt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ut(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Vt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return Tt;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Tt}function jt(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=Lt++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function qt(e,t,n){if(n&R.Optional)return e;b(t,"NodeInjector")}function zt(e,t,n,r){if(n&R.Optional&&void 0===r&&(r=null),0==(n&(R.Self|R.Host))){const i=e[9],s=D(void 0);try{return i?i.get(t,r,n&R.Optional):P(t,r,n&R.Optional)}finally{D(s)}}return qt(r,t,n)}function Bt(e,t,n,r=R.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Y)?e[Y]:void 0;return"number"==typeof t?t>=0?255&t:$t:t}(n);if("function"==typeof s){if(!at(t,e,r))return r&R.Host?qt(i,n,r):zt(t,n,r,i);try{const e=s(r);if(null!=e||r&R.Optional)return e;b(n)}finally{dt()}}else if("number"==typeof s){let i=null,o=Ut(e,t),a=Tt,u=r&R.Host?t[16][6]:null;for((-1===o||r&R.SkipSelf)&&(a=-1===o?Vt(e,t):t[o+8],a!==Tt&&Qt(r,!1)?(i=t[1],o=Rt(a),t=Ot(a,t)):o=-1);-1!==o;){const e=t[1];if(Wt(s,o,e.data)){const e=Gt(o,t,n,i,r,u);if(e!==Ht)return e}a=t[o+8],a!==Tt&&Qt(r,t[1].data[o+8]===u)&&Wt(s,o,t)?(i=e,o=Rt(a),t=Ot(a,t)):o=-1}}}return zt(t,n,r,i)}const Ht={};function $t(){return new Yt($e(),ze())}function Gt(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],u=Zt(a,o,n,null==r?ge(a)&&Dt:r!=o&&0!=(3&a.type),i&R.Host&&s===a);return null!==u?Kt(t,o,u,a):Ht}function Zt(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,u=e.directiveStart,c=s>>20,l=i?a+c:e.directiveEnd;for(let h=r?a:a+c;h<l;h++){const e=o[h];if(h<u&&n===e||h>=u&&e.type===n)return h}if(i){const e=o[u];if(e&&ye(e)&&e.type===n)return u}return null}function Kt(e,t,n,r){let i=e[n];const s=t.data;if(i instanceof St){const o=i;o.resolving&&function(e,t){throw new v("200",`Circular dependency in DI detected for ${e}`)}(_(s[n]));const a=Pt(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?D(o.injectImpl):null;at(e,r,R.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=be(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==u&&D(u),Pt(a),o.resolving=!1,dt()}}return i}function Wt(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Qt(e,t){return!(e&R.Self||e&R.Host&&t)}class Yt{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Bt(this._tNode,this._lView,e,void 0,t)}}function Jt(e){return L(()=>{const t=e.prototype.constructor,n=t[Q]||Xt(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[Q]||Xt(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function Xt(e){return y(e)?()=>{const t=Xt(m(e));return t&&t()}:ve(e)}function en(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(Ct(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}($e(),e)}const tn="__parameters__";function nn(e,t,n){return L(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(tn)?e[tn]:Object.defineProperty(e,tn,{value:[]})[tn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class rn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=I({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const sn=new rn("AnalyzeForEntryComponents"),on=Function;function an(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),an(r,t)):t!==e&&t.push(r)}return t}function un(e,t){e.forEach(e=>Array.isArray(e)?un(e,t):t(e))}function cn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ln(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function hn(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function dn(e,t,n){let r=pn(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function fn(e,t){const n=pn(e,t);if(n>=0)return e[1|n]}function pn(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?i=n:r=n+1}return~(i<<1)}(e,t)}const gn={},mn=/\n/gm,yn="__source",vn=l({provide:String,useValue:l});let wn;function _n(e){const t=wn;return wn=e,t}function bn(e,t=R.Default){if(void 0===wn)throw new Error("inject() must be called from an injection context");return null===wn?P(e,void 0,t):wn.get(e,t&R.Optional?null:void 0,t)}function In(e,t=R.Default){return(O||bn)(m(e),t)}const Tn=In;function Sn(e){const t=[];for(let n=0;n<e.length;n++){const r=m(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=R.Default;for(let t=0;t<r.length;t++){const i=r[t],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(In(e,n))}else t.push(In(r))}return t}function En(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const Cn=En(nn("Inject",e=>({token:e})),-1),kn=En(nn("Optional"),8),An=En(nn("SkipSelf"),4);let xn;function Nn(e){var t;return(null===(t=function(){if(void 0===xn&&(xn=null,z.trustedTypes))try{xn=z.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return xn}())||void 0===t?void 0:t.createHTML(e))||e}class Rn{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class On extends Rn{getTypeName(){return"HTML"}}class Dn extends Rn{getTypeName(){return"Style"}}class Pn extends Rn{getTypeName(){return"Script"}}class Ln extends Rn{getTypeName(){return"URL"}}class Fn extends Rn{getTypeName(){return"ResourceURL"}}function Mn(e){return e instanceof Rn?e.changingThisBreaksApplicationSecurity:e}function Un(e,t){const n=Vn(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Vn(e){return e instanceof Rn&&e.getTypeName()||null}function jn(e){return new On(e)}function qn(e){return new Dn(e)}function zn(e){return new Pn(e)}function Bn(e){return new Ln(e)}function Hn(e){return new Fn(e)}class $n{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Nn(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Gn{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Nn(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=Nn(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Zn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Kn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wn(e){return(e=String(e)).match(Zn)||e.match(Kn)?e:"unsafe:"+e}function Qn(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Yn(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const Jn=Qn("area,br,col,hr,img,wbr"),Xn=Qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),er=Qn("rp,rt"),tr=Yn(er,Xn),nr=Yn(Jn,Yn(Xn,Qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yn(er,Qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tr),rr=Qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ir=Qn("srcset"),sr=Yn(rr,ir,Qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Qn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),or=Qn("script,style,template");class ar{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!nr.hasOwnProperty(t))return this.sanitizedSomething=!0,!or.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i),t=e.name,s=t.toLowerCase();if(!sr.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=e.value;rr[s]&&(o=Wn(o)),ir[s]&&(r=o,o=(r=String(r)).split(",").map(e=>Wn(e.trim())).join(", ")),this.buf.push(" ",t,'="',lr(o),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();nr.hasOwnProperty(t)&&!Jn.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(lr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const ur=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,cr=/([^\#-~ |!])/g;function lr(e){return e.replace(/&/g,"&amp;").replace(ur,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(cr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let hr;function dr(e,t){let n=null;try{hr=hr||function(e){const t=new Gn(e);return function(){try{return!!(new window.DOMParser).parseFromString(Nn(""),"text/html")}catch(e){return!1}}()?new $n(t):t}(e);let r=t?String(t):"";n=hr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=hr.getInertBodyElement(r)}while(r!==s);return Nn((new ar).sanitizeChildren(fr(n)||n))}finally{if(n){const e=fr(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function fr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var pr=(()=>((pr=pr||{})[pr.NONE=0]="NONE",pr[pr.HTML=1]="HTML",pr[pr.STYLE=2]="STYLE",pr[pr.SCRIPT=3]="SCRIPT",pr[pr.URL=4]="URL",pr[pr.RESOURCE_URL=5]="RESOURCE_URL",pr))();function gr(e){const t=function(){const e=ze();return e&&e[12]}();return t?t.sanitize(pr.URL,e)||"":Un(e,"URL")?Mn(e):Wn(w(e))}function mr(e,t){e.__ngContext__=t}function yr(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function vr(e){return e.ngOriginalError}function wr(e,...t){e.error(...t)}class _r{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e&&e.ngErrorLogger||wr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?function(e){return e.ngDebugContext}(e)||this._findContext(vr(e)):null}_findOriginalError(e){let t=e&&vr(e);for(;t&&vr(t);)t=vr(t);return t||null}}const br=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(z))();function Ir(e){return e instanceof Function?e():e}var Tr=(()=>((Tr=Tr||{})[Tr.Important=1]="Important",Tr[Tr.DashCase=2]="DashCase",Tr))();function Sr(e,t){return(void 0)(e,t)}function Er(e){const t=e[3];return fe(t)?t[3]:t}function Cr(e){return Ar(e[13])}function kr(e){return Ar(e[4])}function Ar(e){for(;null!==e&&!fe(e);)e=e[4];return e}function xr(e,t,n,r,i){if(null!=r){let s,o=!1;fe(r)?s=r:de(r)&&(o=!0,r=r[0]);const a=xe(r);0===e&&null!==n?null==i?Mr(t,n,a):Fr(t,n,a,i||null,!0):1===e&&null!==n?Fr(t,n,a,i||null,!0):2===e?function(e,t,n){const r=Vr(e,t);r&&function(e,t,n,r){ke(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==xe(n)&&xr(t,e,r,s,i);for(let o=he;o<n.length;o++){const i=n[o];Zr(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function Nr(e,t,n){return ke(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Rr(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Ve(i,-1)),n.splice(r,1)}function Or(e,t){if(e.length<=he)return;const n=he+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&Rr(s,r),t>0&&(e[n-1][4]=r[4]);const o=ln(e,he+t);Zr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Dr(e,t){if(!(256&t[2])){const n=t[11];ke(n)&&n.destroyNode&&Zr(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Pr(e[1],e);for(;t;){let n=null;if(de(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)de(t)&&Pr(t[1],t),t=t[3];null===t&&(t=e),de(t)&&Pr(t[1],t),n=t&&t[4]}t=n}}(t)}}function Pr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof St)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):xe(t[e]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&ke(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&fe(t[3])){n!==t[3]&&Rr(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Lr(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===M.None||t===M.Emulated)return null}return Re(r,n)}(e,t.parent,n)}function Fr(e,t,n,r,i){ke(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Mr(e,t,n){ke(e)?e.appendChild(t,n):t.appendChild(n)}function Ur(e,t,n,r,i){null!==r?Fr(e,t,n,r,i):Mr(e,t,n)}function Vr(e,t){return ke(e)?e.parentNode(t):t.parentNode}function jr(e,t,n){return qr(e,t,n)}let qr=function(e,t,n){return 40&e.type?Re(e,n):null};function zr(e,t,n,r){const i=Lr(e,r,t),s=t[11],o=jr(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Ur(s,i,n[a],o,!1);else Ur(s,i,n,o,!1)}function Br(e,t){if(null!==t){const n=t.type;if(3&n)return Re(t,e);if(4&n)return $r(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Br(e,n);{const n=e[t.index];return fe(n)?$r(-1,n):xe(n)}}if(32&n)return Sr(t,e)()||xe(e[t.index]);{const n=Hr(e,t);return null!==n?Array.isArray(n)?n[0]:Br(Er(e[16]),n):Br(e,t.next)}}return null}function Hr(e,t){return null!==t?e[16][6].projection[t.projection]:null}function $r(e,t){const n=he+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return Br(e,r)}return t[7]}function Gr(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===t&&(a&&mr(xe(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Gr(e,t,n.child,r,i,s,!1),xr(t,e,i,a,s);else if(32&u){const o=Sr(n,r);let u;for(;u=o();)xr(t,e,i,u,s);xr(t,e,i,a,s)}else 16&u?Kr(e,t,r,n,i,s):xr(t,e,i,a,s);n=o?n.projectionNext:n.next}}function Zr(e,t,n,r,i,s){Gr(n,r,e.firstChild,t,i,s,!1)}function Kr(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)xr(t,e,i,a[u],s);else Gr(e,t,a,o[3],i,s,!0)}function Wr(e,t,n){ke(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Qr(e,t,n){ke(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Yr(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const Jr="ng-template";function Xr(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==Yr(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function ei(e){return 4===e.type&&e.value!==Jr}function ti(e,t,n){return t===(4!==e.type||n?e.value:Jr)}function ni(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(Ct(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!ti(e,u,n)||""===u&&1===t.length){if(ri(r))return!1;o=!0}}else{const c=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!Xr(e.attrs,c,n)){if(ri(r))return!1;o=!0}continue}const l=ii(8&r?"class":u,i,ei(e),n);if(-1===l){if(ri(r))return!1;o=!0;continue}if(""!==c){let e;e=l>s?"":i[l+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==Yr(t,c,0)||2&r&&c!==e){if(ri(r))return!1;o=!0}}}}else{if(!o&&!ri(r)&&!ri(u))return!1;if(o&&ri(u))continue;o=!1,r=u|1&r}}return ri(r)||o}function ri(e){return 0==(1&e)}function ii(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function si(e,t,n=!1){for(let r=0;r<t.length;r++)if(ni(e,t[r],n))return!0;return!1}function oi(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let t=0;t<e.length;t++)if(e[t]!==r[t])continue e;return!0}}return!1}function ai(e,t){return e?":not("+t.trim()+")":t}function ui(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||ri(o)||(t+=ai(s,i),i=""),r=o,s=s||!ri(r);n++}return""!==i&&(t+=ai(s,i)),t}const ci={};function li(e){hi(Be(),ze(),pt()+e,Qe())}function hi(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&vt(t,r,n)}else{const r=e.preOrderHooks;null!==r&&wt(t,r,0,n)}gt(n)}function di(e,t){return e<<17|t<<2}function fi(e){return e>>17&32767}function pi(e){return 2|e}function gi(e){return(131068&e)>>2}function mi(e,t){return-131069&e|t<<2}function yi(e){return 1|e}function vi(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];st(i),n.contentQueries(2,t[s],s)}}}function wi(e,t,n,r,i,s,o,a,u,c){const l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Ue(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=a||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=s,l[16]=2==t.type?e[16]:l,l}function _i(e,t,n,r,i){let s=e.data[t];if(null===s)s=function(e,t,n,r,i){const s=Ge(),o=Ke(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(e,t,n,r,i),je.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=function(){const e=je.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===e?-1:e.injectorIndex}return Ze(s,!0),s}function bi(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Ii(e,t,n){ut(t);try{const r=e.viewQuery;null!==r&&Ji(1,r,n);const i=e.template;null!==i&&Ei(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&vi(e,t),e.staticViewQueries&&Ji(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)Zi(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,ft()}}function Ti(e,t,n,r){const i=t[2];if(256==(256&i))return;ut(t);const s=Qe();try{Ue(t),je.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Ei(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&vt(t,n,null)}else{const n=e.preOrderHooks;null!==n&&wt(t,n,0,null),_t(t,0)}if(function(e){for(let t=Cr(e);null!==t;t=kr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Ve(r,1),n[2]|=1024}}}(t),function(e){for(let t=Cr(e);null!==t;t=kr(t))for(let e=he;e<t.length;e++){const n=t[e],r=n[1];Fe(n)&&Ti(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&vi(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&vt(t,n)}else{const n=e.contentHooks;null!==n&&wt(t,n,1),_t(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)gt(~r);else{const i=r,s=n[++e],o=n[++e];nt(s,i),o(2,t[i])}}}finally{gt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)$i(e,t[n])}(t,a);const u=e.viewQuery;if(null!==u&&Ji(2,u,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&vt(t,n)}else{const n=e.viewHooks;null!==n&&wt(t,n,2),_t(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Ve(t[3],-1))}finally{ft()}}function Si(e,t,n,r){const i=t[10],s=!Qe(),o=Le(t);try{s&&!o&&i.begin&&i.begin(),o&&Ii(e,t,r),Ti(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function Ei(e,t,n,r,i){const s=pt(),o=2&r;try{gt(-1),o&&t.length>le&&hi(e,t,le,Qe()),n(r,i)}finally{gt(s)}}function Ci(e,t,n){if(pe(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function ki(e,t,n){qe()&&(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Ft(n,t),mr(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=ye(r);s&&qi(t,n,r);const u=Kt(t,e,a,n);mr(u,t),null!==o&&zi(0,a-i,u,r,0,o),s&&(Pe(n.index,t)[8]=u)}}(e,t,n,Re(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=je.lFrame.currentDirectiveIndex;try{gt(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];rt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Fi(r,i)}}finally{gt(-1),rt(o)}}(e,t,n))}function Ai(e,t,n=Re){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function xi(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Ni(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Ni(e,t,n,r,i,s,o,a,u,c){const l=le+r,h=l+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:ci);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Ri(e,t,n,r){const i=es(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&ts(e).push(r,i.length-1))}function Oi(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Di(e,t,n,r,i,s,o,a){const u=Re(t,n);let c,l=t.inputs;var h;!a&&null!=l&&(c=l[r])?(rs(e,n,c,r,i),ge(t)&&function(e,t){const n=Pe(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,t.value||"",r):i,ke(s)?s.setProperty(u,r,i):kt(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Pi(e,t,n,r){let i=!1;if(qe()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];si(n,o.selectors,!1)&&(i||(i=[]),jt(Ft(n,t),e,o.type),ye(o)?(Mi(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Vi(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,u=bi(e,t,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=At(n.mergedAttrs,c.hostAttrs),ji(e,n,t,u,c),Ui(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let u=t.directiveStart;u<n;u++){const e=r[u],n=e.inputs,c=null===i||ei(t)?null:Bi(n,i);s.push(c),o=Oi(n,u,o),a=Oi(e.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new v("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=At(n.mergedAttrs,n.attrs),i}function Li(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Fi(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Mi(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Ui(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ye(t)&&(n[""]=e)}}function Vi(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function ji(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=ve(i.type)),o=new St(s,ye(i),null);e.blueprint[r]=o,n[r]=o,Li(e,t,0,r,bi(e,n,i.hostVars,ci),i)}function qi(e,t,n){const r=Re(t,e),i=xi(n),s=e[10],o=Ki(e,wi(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function zi(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function Bi(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Hi(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function $i(e,t){const n=Pe(t,e);if(Fe(n)){const e=n[1];80&n[2]?Ti(e,n,e.template,n[8]):n[5]>0&&Gi(n)}}function Gi(e){for(let n=Cr(e);null!==n;n=kr(n))for(let e=he;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];Ti(e,t,e.template,t[8])}else t[5]>0&&Gi(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Pe(t[n],e);Fe(r)&&r[5]>0&&Gi(r)}}function Zi(e,t){const n=Pe(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Ii(r,n,n[8])}function Ki(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Wi(e){for(;e;){e[2]|=64;const t=Er(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function Qi(e,t,n){const r=t[10];r.begin&&r.begin();try{Ti(e,t,e.template,n)}catch(i){throw ns(t,i),i}finally{r.end&&r.end()}}function Yi(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=yr(n),i=r[1];Si(i,r,i.template,n)}}(e[8])}function Ji(e,t,n){st(0),t(e,n)}const Xi=(()=>Promise.resolve(null))();function es(e){return e[7]||(e[7]=[])}function ts(e){return e.cleanup||(e.cleanup=[])}function ns(e,t){const n=e[9],r=n?n.get(_r,null):null;r&&r.handleError(t)}function rs(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=t[o],c=e.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function is(e,t,n){const r=Ne(t,e);!function(e,t,n){ke(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function ss(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=f(i,e):2==s&&(r=f(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const os=new rn("INJECTOR",-1);class as{get(e,t=gn){if(t===gn){const t=new Error(`NullInjectorError: No provider for ${d(e)}!`);throw t.name="NullInjectorError",t}return t}}const us=new rn("Set Injector scope."),cs={},ls={};let hs;function ds(){return void 0===hs&&(hs=new as),hs}function fs(e,t=null,n=null,r){return new ps(e,n,t||ds(),r)}class ps{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&un(t,n=>this.processProvider(n,e,t)),un([e],e=>this.processInjectorType(e,[],i)),this.records.set(os,ys(void 0,this));const s=this.records.get(us);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:d(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=gn,n=R.Default){this.assertNotDestroyed();const r=_n(this),i=D(void 0);try{if(!(n&R.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(s=e)||"object"==typeof s&&s instanceof rn)&&S(e);t=n&&this.injectableDefInScope(n)?ys(gs(e),cs):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&R.Self?ds():this.parent).get(e,t=n&R.Optional&&t===gn?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(d(e)),r)throw o;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t[yn]&&i.unshift(t[yn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=d(t);if(Array.isArray(t))i=t.map(d).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(mn,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{D(i),_n(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(d(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=m(e)))return!1;let r=C(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=C(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{un(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];un(r,e=>this.processProvider(e,n,r||H))}}this.injectorDefTypes.add(s);const a=ve(s)||(()=>new s);this.records.set(s,ys(a,cs));const u=r.providers;if(null!=u&&!o){const t=e;un(u,e=>this.processProvider(e,t,u))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=ws(e=m(e))?e:m(e&&e.provide);const i=function(e,t,n){return vs(e)?ys(void 0,e.useValue):ys(ms(e),cs)}(e);if(ws(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=ys(void 0,cs,!0),t.factory=()=>Sn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===cs&&(t.value=ls,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=m(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function gs(e){const t=S(e),n=null!==t?t.factory:ve(e);if(null!==n)return n;if(e instanceof rn)throw new Error(`Token ${d(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=hn(t,"?");throw new Error(`Can't resolve all parameters for ${d(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[k]||e[x]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function ms(e,t,n){let r;if(ws(e)){const t=m(e);return ve(t)||gs(t)}if(vs(e))r=()=>m(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...Sn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>In(m(e.useExisting));else{const t=m(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return ve(t)||gs(t);r=()=>new t(...Sn(e.deps))}var i;return r}function ys(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function vs(e){return null!==e&&"object"==typeof e&&vn in e}function ws(e){return"function"==typeof e}const _s=function(e,t,n){return function(e,t=null,n=null,r){const i=fs(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};class bs{static create(e,t){return Array.isArray(e)?_s(e,t,""):_s(e.providers,e.parent,e.name||"")}}function Is(e,t){yt(yr(e)[1],$e())}function Ts(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let i;if(ye(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=Ss(e.inputs),t.declaredInputs=Ss(e.declaredInputs),t.outputs=Ss(e.outputs);const n=i.hostBindings;n&&ks(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&Es(e,s),o&&Cs(e,o),h(e.inputs,i.inputs),h(e.declaredInputs,i.declaredInputs),h(e.outputs,i.outputs),ye(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===Ts&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=At(i.hostAttrs,n=At(n,i.hostAttrs))}}(r)}function Ss(e){return e===B?{}:e===H?[]:e}function Es(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function Cs(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function ks(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}bs.THROW_IF_NOT_FOUND=gn,bs.NULL=new as,bs.\u0275prov=I({token:bs,providedIn:"any",factory:()=>In(os)}),bs.__NG_ELEMENT_ID__=-1;let As=null;function xs(){if(!As){const e=z.Symbol;if(e&&e.iterator)As=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(As=n)}}}return As}class Ns{constructor(e){this.wrapped=e}static wrap(e){return new Ns(e)}static unwrap(e){return Ns.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Ns}}function Rs(e){return!!Os(e)&&(Array.isArray(e)||!(e instanceof Map)&&xs()in e)}function Os(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ds(e,t,n){return e[t]=n}function Ps(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ls(e,t,n,r){const i=ze();return Ps(i,et(),t)&&(Be(),function(e,t,n,r,i,s){const o=Re(e,t);!function(e,t,n,r,i,s,o){if(null==s)ke(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?w(s):o(s,r||"",i);ke(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}(t[11],o,s,e.value,n,r,i)}(mt(),i,e,t,n,r)),Ls}function Fs(e,t,n,r){return Ps(e,et(),n)?t+w(n)+r:ci}function Ms(e,t,n,r,i,s,o,a){const u=ze(),c=Be(),l=e+le,h=c.firstCreatePass?function(e,t,n,r,i,s,o,a,u){const c=t.consts,l=_i(t,e,4,o||null,Me(c,a));Pi(t,n,l,Me(c,u)),yt(t,l);const h=l.tViews=Ni(2,l,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,c,u,t,n,r,i,s,o):c.data[l];Ze(h,!1);const d=u[11].createComment("");zr(c,u,d,h),mr(d,u),Ki(u,u[l]=Hi(d,u,d,h)),me(h)&&ki(c,u,h),null!=o&&Ai(u,h,a)}function Us(e){return De(je.lFrame.contextLView,le+e)}function Vs(e,t=R.Default){const n=ze();return null===n?In(e,t):Bt($e(),n,m(e),t)}function js(e,t,n){const r=ze();return Ps(r,et(),t)&&Di(Be(),mt(),r,e,t,r[11],n,!1),js}function qs(e,t,n,r,i){const s=i?"class":"style";rs(e,n,t.inputs[s],s,r)}function zs(e,t,n,r){const i=ze(),s=Be(),o=le+e,a=i[11],u=i[o]=Nr(a,t,je.lFrame.currentNamespace),c=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,u=_i(t,e,2,i,Me(a,s));return Pi(t,n,u,Me(a,o)),null!==u.attrs&&ss(u,u.attrs,!1),null!==u.mergedAttrs&&ss(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(o,s,i,0,t,n,r):s.data[o];Ze(c,!0);const l=c.mergedAttrs;null!==l&&Et(a,u,l);const h=c.classes;null!==h&&Qr(a,u,h);const d=c.styles;null!==d&&Wr(a,u,d),64!=(64&c.flags)&&zr(s,i,u,c),0===je.lFrame.elementDepthCount&&mr(u,i),je.lFrame.elementDepthCount++,me(c)&&(ki(s,i,c),Ci(s,c,i)),null!==r&&Ai(i,c)}function Bs(){let e=$e();Ke()?We():(e=e.parent,Ze(e,!1));const t=e;je.lFrame.elementDepthCount--;const n=Be();n.firstCreatePass&&(yt(n,e),pe(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&qs(n,t,ze(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&qs(n,t,ze(),t.stylesWithoutHost,!1)}function Hs(e,t,n,r){zs(e,t,n,r),Bs()}function $s(e,t,n){const r=ze(),i=Be(),s=e+le,o=i.firstCreatePass?function(e,t,n,r,i){const s=t.consts,o=Me(s,r),a=_i(t,e,8,"ng-container",o);return null!==o&&ss(a,o,!0),Pi(t,n,a,Me(s,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,i,r,t,n):i.data[s];Ze(o,!0);const a=r[s]=r[11].createComment("");zr(i,r,a,o),mr(a,r),me(o)&&(ki(i,r,o),Ci(i,o,r)),null!=n&&Ai(r,o)}function Gs(){let e=$e();const t=Be();Ke()?We():(e=e.parent,Ze(e,!1)),t.firstCreatePass&&(yt(t,e),pe(e)&&t.queries.elementEnd(e))}function Zs(e,t,n){$s(e,t,n),Gs()}function Ks(){return ze()}function Ws(e){return!!e&&"function"==typeof e.then}function Qs(e){return!!e&&"function"==typeof e.subscribe}const Ys=Qs;function Js(e,t,n,r){const i=ze(),s=Be(),o=$e();return function(e,t,n,r,i,s,o,a){const u=me(r),c=e.firstCreatePass&&ts(e),l=es(t);let h=!0;if(3&r.type||a){const d=Re(r,t),f=a?a(d):d,p=l.length,g=a?e=>a(xe(e[r.index])):r.index;if(ke(n)){let o=null;if(!a&&u&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=eo(r,t,0,s,!1);const e=n.listen(f,i,s);l.push(s,e),c&&c.push(i,g,p,p+1)}}else s=eo(r,t,0,s,!0),f.addEventListener(i,s,o),l.push(s),c&&c.push(i,g,p,o)}else s=eo(r,t,0,s,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const e=f.length;if(e)for(let n=0;n<e;n+=2){const e=t[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,e),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,e,t,!!n,r),Js}function Xs(e,t,n,r){try{return!1!==n(r)}catch(i){return ns(e,i),!1}}function eo(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?Pe(e.index,t):t;0==(32&t[2])&&Wi(o);let a=Xs(t,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=Xs(t,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function to(e=1){return function(e){return(je.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,je.lFrame.contextLView))[8]}(e)}function no(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let i=0;i<t.length;i++){const s=t[i];if("*"!==s){if(null===r?si(e,s,!0):oi(r,s))return i}else n=i}return n}function ro(e){const t=ze()[16][6];if(!t.projection){const n=t.projection=hn(e?e.length:1,null),r=n.slice();let i=t.child;for(;null!==i;){const t=e?no(i,e):0;null!==t&&(r[t]?r[t].projectionNext=i:n[t]=i,r[t]=i),i=i.next}}}function io(e,t=0,n){const r=ze(),i=Be(),s=_i(i,le+e,16,null,n||null);null===s.projection&&(s.projection=t),We(),64!=(64&s.flags)&&function(e,t,n){Kr(t[11],0,t,n,Lr(e,n,t),jr(n.parent||t[6],n,t))}(i,r,s)}function so(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?fi(s):gi(s),u=!1;for(;0!==a&&(!1===u||o);){const n=e[a+1];oo(e[a],t)&&(u=!0,e[a+1]=r?yi(n):pi(n)),a=r?fi(n):gi(n)}u&&(e[n+1]=r?pi(s):yi(s))}function oo(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&pn(e,t)>=0}const ao={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function uo(e){return e.substring(ao.key,ao.keyEnd)}function co(e,t){const n=ao.textEnd;return n===t?-1:(t=ao.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,ao.key=t,n),lo(e,t,n))}function lo(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function ho(e,t,n){return go(e,t,n,!1),ho}function fo(e,t){return go(e,t,null,!0),fo}function po(e,t){for(let n=function(e){return function(e){ao.key=0,ao.keyEnd=0,ao.value=0,ao.valueEnd=0,ao.textEnd=e.length}(e),co(e,lo(e,0,ao.textEnd))}(t);n>=0;n=co(t,n))dn(e,uo(t),!0)}function go(e,t,n,r){const i=ze(),s=Be(),o=tt(2);s.firstUpdatePass&&yo(s,e,o,r),t!==ci&&Ps(i,o,t)&&_o(s,s.data[pt()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=d(Mn(e)))),e}(t,n),r,o)}function mo(e,t){return t>=e.expandoStartIndex}function yo(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[pt()],o=mo(e,n);To(s,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=je.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=wo(n=vo(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=vo(i,e,t,n,r),null===s){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==gi(r))return e[fi(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=vo(null,e,t,n[1],r),n=wo(n,t.attrs,r),function(e,t,n,r){e[fi(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=wo(r,e[s].hostAttrs,n);return wo(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=fi(o),u=gi(o);e[r]=n;let c,l=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||pn(e,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const t=fi(e[a+1]);e[r+1]=di(t,a),0!==t&&(e[t+1]=mi(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=di(a,0),0!==a&&(e[a+1]=mi(e[a+1],r)),a=r;else e[r+1]=di(u,0),0===a?a=r:e[u+1]=mi(e[u+1],r),u=r;l&&(e[r+1]=pi(e[r+1])),so(e,c,r,!0),so(e,c,r,!1),function(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&pn(s,t)>=0&&(n[r+1]=yi(n[r+1]))}(t,c,e,r,s),o=di(a,u),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}function vo(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=wo(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function wo(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),dn(e,o,!!n||t[++s]))}return void 0===e?null:e}function _o(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const u=e.data,c=u[a+1];Io(1==(1&c)?bo(u,t,n,i,gi(c),o):void 0)||(Io(s)||2==(2&c)&&(s=bo(u,null,n,i,a,o)),function(e,t,n,r,i){const s=ke(e);if(t)i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:Tr.DashCase;if(null==i)s?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),t|=Tr.Important),s?e.setStyle(n,r,i,t):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Ne(pt(),n),i,s))}function bo(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),u=s?t[1]:t,c=null===u;let l=n[i+1];l===ci&&(l=c?H:void 0);let h=c?fn(l,r):u===r?l:void 0;if(s&&!Io(h)&&(h=fn(t,r)),Io(h)&&(a=h,o))return a;const d=e[i+1];i=o?fi(d):gi(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=fn(e,r))}return a}function Io(e){return void 0!==e}function To(e,t){return 0!=(e.flags&(t?16:32))}function So(e,t=""){const n=ze(),r=Be(),i=e+le,s=r.firstCreatePass?_i(r,i,1,t,null):r.data[i],o=n[i]=function(e,t){return ke(e)?e.createText(t):e.createTextNode(t)}(n[11],t);zr(r,n,o,s),Ze(s,!1)}function Eo(e){return Co("",e,""),Eo}function Co(e,t,n){const r=ze(),i=Fs(r,e,t,n);return i!==ci&&is(r,pt(),i),Co}function ko(e,t,n,r,i){const s=ze(),o=function(e,t,n,r,i,s){const o=function(e,t,n,r){const i=Ps(e,t,n);return Ps(e,t+1,r)||i}(e,Xe(),n,i);return tt(2),o?t+w(n)+r+w(i)+s:ci}(s,e,t,n,r,i);return o!==ci&&is(s,pt(),o),ko}function Ao(e,t,n){!function(e,t,n,r){const i=Be(),s=tt(2);i.firstUpdatePass&&yo(i,null,s,r);const o=ze();if(n!==ci&&Ps(o,s,n)){const a=i.data[pt()];if(To(a,r)&&!mo(i,s)){let e=a.classesWithoutHost;null!==e&&(n=f(e,n||"")),qs(i,a,o,n,r)}else!function(e,t,n,r,i,s,o,a){i===ci&&(i=H);let u=0,c=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const o=u<i.length?i[u+1]:void 0,d=c<s.length?s[c+1]:void 0;let f,p=null;l===h?(u+=2,c+=2,o!==d&&(p=h,f=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,f=d),null!==p&&_o(e,t,n,r,p,f,true,a),l=u<i.length?i[u]:null,h=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return H;const r=[],i=Mn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(e,t,n),0,s)}}(dn,po,Fs(ze(),e,t,n),!0)}function xo(e,t,n){const r=ze();return Ps(r,et(),t)&&Di(Be(),mt(),r,e,t,r[11],n,!0),xo}const No=void 0;var Ro=["en",[["a","p"],["AM","PM"],No],[["AM","PM"],No,No],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],No,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],No,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",No,"{1} 'at' {0}",No],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Oo={};function Do(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Lo(t);if(n)return n;const r=t.split("-")[0];if(n=Lo(r),n)return n;if("en"===r)return Ro;throw new Error(`Missing locale data for the locale "${e}".`)}function Po(e){return Do(e)[Fo.PluralCase]}function Lo(e){return e in Oo||(Oo[e]=z.ng&&z.ng.common&&z.ng.common.locales&&z.ng.common.locales[e]),Oo[e]}var Fo=(()=>((Fo=Fo||{})[Fo.LocaleId=0]="LocaleId",Fo[Fo.DayPeriodsFormat=1]="DayPeriodsFormat",Fo[Fo.DayPeriodsStandalone=2]="DayPeriodsStandalone",Fo[Fo.DaysFormat=3]="DaysFormat",Fo[Fo.DaysStandalone=4]="DaysStandalone",Fo[Fo.MonthsFormat=5]="MonthsFormat",Fo[Fo.MonthsStandalone=6]="MonthsStandalone",Fo[Fo.Eras=7]="Eras",Fo[Fo.FirstDayOfWeek=8]="FirstDayOfWeek",Fo[Fo.WeekendRange=9]="WeekendRange",Fo[Fo.DateFormat=10]="DateFormat",Fo[Fo.TimeFormat=11]="TimeFormat",Fo[Fo.DateTimeFormat=12]="DateTimeFormat",Fo[Fo.NumberSymbols=13]="NumberSymbols",Fo[Fo.NumberFormats=14]="NumberFormats",Fo[Fo.CurrencyCode=15]="CurrencyCode",Fo[Fo.CurrencySymbol=16]="CurrencySymbol",Fo[Fo.CurrencyName=17]="CurrencyName",Fo[Fo.Currencies=18]="Currencies",Fo[Fo.Directionality=19]="Directionality",Fo[Fo.PluralCase=20]="PluralCase",Fo[Fo.ExtraData=21]="ExtraData",Fo))();const Mo="en-US";let Uo=Mo;function Vo(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e} [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(Uo=e.toLowerCase().replace(/_/g,"-"))}function jo(e,t,n,r,i){if(e=m(e),Array.isArray(e))for(let s=0;s<e.length;s++)jo(e[s],t,n,r,i);else{const s=Be(),o=ze();let a=ws(e)?e:m(e.provide),u=ms(e);const c=$e(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(ws(e)||!e.multi){const r=new St(u,i,Vs),f=Bo(a,t,i?l:l+d,h);-1===f?(jt(Ft(c,o),s,a),qo(s,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=Bo(a,t,l+d,h),p=Bo(a,t,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){jt(Ft(c,o),s,a);const l=function(e,t,n,r,i){const s=new St(e,n,Vs);return s.multi=[],s.index=t,s.componentProviders=0,zo(s,i,r&&!n),s}(i?$o:Ho,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),qo(s,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else qo(s,e,f>-1?f:p,zo(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function qo(e,t,n,r){const i=ws(t);if(i||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function zo(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Bo(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function Ho(e,t,n,r){return Go(this.multi,[])}function $o(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Kt(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),Go(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],Go(i,s);return s}function Go(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Zo(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=Be();if(r.firstCreatePass){const i=ye(e);jo(n,r.data,r.blueprint,i,!0),jo(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class Ko{}class Wo{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${d(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}class Qo{}function Yo(...e){}function Jo(e,t){return new ea(Re(e,t))}Qo.NULL=new Wo;const Xo=function(){return Jo($e(),ze())};let ea=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=Xo,e})();function ta(e){return e instanceof ea?e.nativeElement:e}class na{}let ra=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>ia(),e})();const ia=function(){const e=ze(),t=Pe($e().index,e);return function(e){return e[11]}(de(t)?t:e)};let sa=(()=>{class e{}return e.\u0275prov=I({token:e,providedIn:"root",factory:()=>null}),e})();class oa{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const aa=new oa("12.1.5");class ua{constructor(){}supports(e){return Rs(e)}create(e){return new la(e)}}const ca=(e,t)=>t;class la{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ca}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<pa(n,r,i)?t:n,o=pa(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Rs(e))throw new Error(`Error trying to diff '${d(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[xs()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new ha(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new fa),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fa),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class ha{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class da{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class fa{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new da,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pa(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class ga{constructor(){}supports(e){return e instanceof Map||Os(e)}create(){return new ma}}class ma{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Os(e)))throw new Error(`Error trying to diff '${d(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ya(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class ya{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function va(){return new wa([new ua])}let wa=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||va()),deps:[[e,new An,new kn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=I({token:e,providedIn:"root",factory:va}),e})();function _a(){return new ba([new ga])}let ba=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||_a()),deps:[[e,new An,new kn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=I({token:e,providedIn:"root",factory:_a}),e})();function Ia(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(xe(s)),fe(s))for(let e=he;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&Ia(t[1],t,n,r)}const o=n.type;if(8&o)Ia(e,t,n.child,r);else if(32&o){const e=Sr(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=Hr(t,n);if(Array.isArray(e))r.push(...e);else{const n=Er(t[16]);Ia(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ta{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Ia(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(fe(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Or(e,n),ln(t,n))}this._attachedToViewContainer=!1}Dr(this._lView[1],this._lView)}onDestroy(e){Ri(this._lView[1],this._lView,null,e)}markForCheck(){Wi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Qi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Ye(!0);try{Qi(e,t,n)}finally{Ye(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Zr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Sa extends Ta{constructor(e){super(e),this._view=e}detectChanges(){Yi(this._view)}checkNoChanges(){!function(e){Ye(!0);try{Yi(e)}finally{Ye(!1)}}(this._view)}get context(){return null}}const Ea=function(e){return function(e,t,n){if(ge(e)&&!n){const n=Pe(e.index,t);return new Ta(n,n)}return 47&e.type?new Ta(t[16],t):null}($e(),ze(),16==(16&e))};let Ca=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ea,e})();const ka=[new ga],Aa=new wa([new ua]),xa=new ba(ka),Na=function(){return Pa($e(),ze())};let Ra=(()=>{class e{}return e.__NG_ELEMENT_ID__=Na,e})();const Oa=Ra,Da=class extends Oa{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=wi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Ii(t,n,e),new Ta(n)}};function Pa(e,t){return 4&e.type?new Da(t,e,Jo(e,t)):null}class La{}class Fa{}const Ma=function(){return Ba($e(),ze())};let Ua=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ma,e})();const Va=Ua,ja=class extends Va{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Jo(this._hostTNode,this._hostLView)}get injector(){return new Yt(this._hostTNode,this._hostLView)}get parentInjector(){const e=Vt(this._hostTNode,this._hostLView);if(Nt(e)){const t=Ot(e,this._hostLView),n=Rt(e);return new Yt(t[1].data[n+8],t)}return new Yt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=qa(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-he}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(La,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(fe(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new ja(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const i=he+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-he?(t[4]=n[i],cn(n,he+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,s,i);const o=$r(i,s),a=n[11],u=Vr(a,s[7]);return null!==u&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,Zr(e,r,n,1,i,s)}(r,s[6],a,n,u,o),e.attachToViewContainerRef(),cn(za(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=qa(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Or(this._lContainer,t);n&&(ln(za(this._lContainer),t),Dr(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Or(this._lContainer,t);return n&&null!=ln(za(this._lContainer),t)?new Ta(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function qa(e){return e[8]}function za(e){return e[8]||(e[8]=[])}function Ba(e,t){let n;const r=t[e.index];if(fe(r))n=r;else{let i;if(8&e.type)i=xe(r);else{const n=t[11];i=n.createComment("");const r=Re(e,t);Fr(n,Vr(n,r),i,function(e,t){return ke(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=Hi(r,t,i,e),Ki(t,n)}return new ja(n,e,t)}const Ha={};class $a extends Qo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ue(e);return new Ka(t,this.ngModule)}}function Ga(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Za=new rn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>br});class Ka extends Ko{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(ui).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Ga(this.componentDef.inputs)}get outputs(){return Ga(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,Ha,i);return s!==Ha||r===Ha?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(na,Ae),o=i.get(sa,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(ke(e))return e.selectRootElement(t,n===M.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Nr(s.createRenderer(null,this.componentDef),u,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:br,clean:Xi,playerHandler:null,flags:0},d=Ni(0,null,null,1,0,null,null,null,null,null),f=wi(null,d,h,l,null,null,s,a,o,i);let p,g;ut(f);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=_i(o,20,2,"#host",null),u=a.mergedAttrs=t.hostAttrs;null!==u&&(ss(a,u,!0),null!==e&&(Et(i,e,u),null!==a.classes&&Qr(i,e,a.classes),null!==a.styles&&Wr(i,e,a.styles)));const c=r.createRenderer(e,t),l=wi(n,xi(t),null,t.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(jt(Ft(a,n),o,t.type),Mi(o,a),Vi(a,n.length,1)),Ki(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)Et(a,c,["ng-version",aa.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!ri(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&Et(a,c,e),t&&t.length>0&&Qr(a,c,t.join(" "))}if(g=Oe(d,le),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}p=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=$e();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ji(e,r,t,bi(e,t,1,null),n));const i=Kt(t,e,r.directiveStart,r);mr(i,t);const s=Re(r,t);return s&&mr(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=$e();t.contentQueries(1,o,e.directiveStart)}const a=$e();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(gt(a.index),Li(n[1],a,0,a.directiveStart,a.directiveEnd,t),Fi(t,o)),o}(e,this.componentDef,f,h,[Is]),Ii(d,f,null)}finally{ft()}return new Wa(this.componentType,p,Jo(g,f),f,g)}}class Wa extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new Sa(r),this.componentType=e}get injector(){return new Yt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Qa=new Map;class Ya extends La{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $a(this);const n=ce(e),r=e[W]||null;r&&Vo(r),this._bootstrapComponents=Ir(n.bootstrap),this._r3Injector=fs(e,t,[{provide:La,useValue:this},{provide:Qo,useValue:this.componentFactoryResolver}],d(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=bs.THROW_IF_NOT_FOUND,n=R.Default){return e===bs||e===La||e===os?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ja extends Fa{constructor(e){super(),this.moduleType=e,null!==ce(e)&&function(e){const t=new Set;!function e(n){const r=ce(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${d(t)} vs ${d(t.name)}`)}(i,Qa.get(i),n),Qa.set(i,n));const s=Ir(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new Ya(this.moduleType,e)}}function Xa(e,t,n){const r=Je()+e,i=ze();return i[r]===ci?Ds(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function eu(e,t){const n=Be();let r;const i=e+le;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new v("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=ve(r.type)),o=D(Vs);try{const e=Pt(!1),t=s();return Pt(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,ze(),i,t),t}finally{D(o)}}function tu(e,t,n){const r=e+le,i=ze(),s=De(i,r);return function(e,t){return Ns.isWrapped(t)&&(t=Ns.unwrap(t),e[Xe()]=ci),t}(i,function(e,t){return e[1].data[t].pure}(i,r)?function(e,t,n,r,i,s){const o=t+n;return Ps(e,o,i)?Ds(e,o+1,s?r.call(s,i):r(i)):function(e,t){const n=e[t];return n===ci?void 0:n}(e,o+1)}(i,Je(),t,s.transform,n,s):s.transform(n))}function nu(e){return t=>{setTimeout(e,void 0,t)}}const ru=class extends r.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let a=e,u=t||(()=>null),c=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),u=null===(s=t.error)||void 0===s?void 0:s.bind(t),c=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(u=nu(u),a&&(a=nu(a)),c&&(c=nu(c)));const l=super.subscribe({next:a,error:u,complete:c});return e instanceof i.w&&e.add(l),l}};function iu(){return this._results[xs()]()}class su{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=xs(),n=su.prototype;n[t]||(n[t]=iu)}get changes(){return this._changes||(this._changes=new ru)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=an(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class ou{constructor(e){this.queryList=e,this.matches=null}clone(){return new ou(this.queryList)}setDirty(){this.queryList.setDirty()}}class au{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new au(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==bu(e,t).matches&&this.queries[t].setDirty()}}class uu{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class cu{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new cu(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class lu{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new lu(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,hu(t,i)),this.matchTNodeWithReadOption(e,t,Zt(t,e,i,!1,!1))}else n===Ra?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Zt(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ea||r===Ua||r===Ra&&4&t.type)this.addMatch(t.index,-2);else{const n=Zt(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function hu(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function du(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Jo(e,t):4&e.type?Pa(e,t):null}(t,e):-2===n?function(e,t,n){return n===ea?Jo(t,e):n===Ra?Pa(t,e):n===Ua?Ba(t,e):void 0}(e,t,r):Kt(e,e[1],n,t)}function fu(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const i=s[e];o.push(i<0?null:du(t,r[i],s[e+1],n.metadata.read))}i.matches=o}return i.matches}function pu(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=fu(e,t,i,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)r.push(o[e/2]);else{const i=s[e+1],o=t[-n];for(let e=he;e<o.length;e++){const t=o[e];t[17]===t[3]&&pu(t[1],t,i,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];pu(n[1],n,i,r)}}}}}return r}function gu(e){const t=ze(),n=Be(),r=it();st(r+1);const i=bu(n,r);if(e.dirty&&Le(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?pu(n,t,r,[]):fu(n,t,i,r);e.reset(s,ta),e.notifyOnChanges()}return!0}return!1}function mu(e,t,n){const r=Be();r.firstCreatePass&&(_u(r,new uu(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),wu(r,ze(),t)}function yu(e,t,n,r){const i=Be();if(i.firstCreatePass){const s=$e();_u(i,new uu(t,n,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}wu(i,ze(),n)}function vu(){return e=ze(),t=it(),e[19].queries[t].queryList;var e,t}function wu(e,t,n){const r=new su(4==(4&n));Ri(e,t,r,r.destroy),null===t[19]&&(t[19]=new au),t[19].queries.push(new ou(r))}function _u(e,t,n){null===e.queries&&(e.queries=new cu),e.queries.track(new lu(t,n))}function bu(e,t){return e.queries.getByIndex(t)}function Iu(e,t){return Pa(e,t)}const Tu=new rn("Application Initializer");let Su=(()=>{class e{constructor(e){this.appInits=e,this.resolve=Yo,this.reject=Yo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(Ws(t))e.push(t);else if(Ys(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(In(Tu,8))},e.\u0275prov=I({token:e,factory:e.\u0275fac}),e})();const Eu=new rn("AppId"),Cu={provide:Eu,useFactory:function(){return`${ku()}${ku()}${ku()}`},deps:[]};function ku(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Au=new rn("Platform Initializer"),xu=new rn("Platform ID"),Nu=new rn("appBootstrapListener");let Ru=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac}),e})();const Ou=new rn("LocaleId"),Du=new rn("DefaultCurrencyCode");class Pu{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Lu=function(e){return new Ja(e)},Fu=Lu,Mu=function(e){return Promise.resolve(Lu(e))},Uu=function(e){const t=Lu(e),n=Ir(ce(e).declarations).reduce((e,t)=>{const n=ue(t);return n&&e.push(new Ka(n)),e},[]);return new Pu(t,n)},Vu=Uu,ju=function(e){return Promise.resolve(Uu(e))};let qu=(()=>{class e{constructor(){this.compileModuleSync=Fu,this.compileModuleAsync=Mu,this.compileModuleAndAllComponentsSync=Vu,this.compileModuleAndAllComponentsAsync=ju}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac}),e})();const zu=(()=>Promise.resolve(0))();function Bu(e){"undefined"==typeof Zone?zu.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Hu{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ru(!1),this.onMicrotaskEmpty=new ru(!1),this.onStable=new ru(!1),this.onError=new ru(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=z.requestAnimationFrame,t=z.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(z,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Zu(e),e.isCheckStableRunning=!0,Gu(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Zu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Ku(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),Wu(e)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Ku(e),n.invoke(i,s,o,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),Wu(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Zu(e),Gu(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Hu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,$u,Yo,Yo);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const $u={};function Gu(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Zu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Ku(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Wu(e){e._nesting--,Gu(e)}class Qu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ru,this.onMicrotaskEmpty=new ru,this.onStable=new ru,this.onError=new ru}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let Yu=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hu.assertNotInAngularZone(),Bu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Bu(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(In(Hu))},e.\u0275prov=I({token:e,factory:e.\u0275fac}),e})(),Ju=(()=>{class e{constructor(){this._applications=new Map,nc.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return nc.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac}),e})();class Xu{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function ec(e){nc=e}let tc,nc=new Xu,rc=!0,ic=!1;function sc(){return ic=!0,rc}function oc(){if(ic)throw new Error("Cannot enable prod mode after platform setup.");rc=!1}const ac=new rn("AllowMultipleToken");class uc{constructor(e,t){this.name=e,this.token=t}}function cc(e,t,n=[]){const r=`Platform: ${t}`,i=new rn(r);return(t=[])=>{let s=lc();if(!s||s.injector.get(ac,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:us,useValue:"platform"});!function(e){if(tc&&!tc.destroyed&&!tc.injector.get(ac,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");tc=e.get(hc);const t=e.get(Au,null);t&&t.forEach(e=>e())}(bs.create({providers:e,name:r}))}return function(e){const t=lc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function lc(){return tc&&!tc.destroyed?tc:null}let hc=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new Qu:("zone.js"===e?void 0:e)||new Hu({enableLongStackTrace:sc(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:Hu,useValue:n}];return n.run(()=>{const t=bs.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(_r,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});i.onDestroy(()=>{pc(this._modules,i),e.unsubscribe()})}),function(e,t,n){try{const r=n();return Ws(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(Su);return e.runInitializers(),e.donePromise.then(()=>(Vo(i.injector.get(Ou,Mo)||Mo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=dc({},t);return function(e,t,n){const r=new Ja(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(fc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${d(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(In(bs))},e.\u0275prov=I({token:e,factory:e.\u0275fac}),e})();function dc(e,t){return Array.isArray(t)?t.reduce(dc,e):Object.assign(Object.assign({},e),t)}let fc=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),h=new s.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Hu.assertNotInAngularZone(),Bu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,h.pipe(e=>{return(0,u.x)()((t=c,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,a.N);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Ko?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(La),i=n.create(bs.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(Yu,null),a=o&&i.injector.get(Ju);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),pc(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;pc(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Nu,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(In(Hu),In(bs),In(_r),In(Qo),In(Su))},e.\u0275prov=I({token:e,factory:e.\u0275fac}),e})();function pc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class gc{}class mc{}const yc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let vc=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||yc}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>wc(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>wc(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(In(qu),In(mc,8))},e.\u0275prov=I({token:e,factory:e.\u0275fac}),e})();function wc(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const _c=function(e){return null},bc=cc(null,"core",[{provide:xu,useValue:"unknown"},{provide:hc,deps:[bs]},{provide:Ju,deps:[]},{provide:Ru,deps:[]}]),Ic=[{provide:fc,useClass:fc,deps:[Hu,bs,_r,Qo,Su]},{provide:Za,deps:[Hu],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Su,useClass:Su,deps:[[new kn,Tu]]},{provide:qu,useClass:qu,deps:[]},Cu,{provide:wa,useFactory:function(){return Aa},deps:[]},{provide:ba,useFactory:function(){return xa},deps:[]},{provide:Ou,useFactory:function(e){return Vo(e=e||"undefined"!=typeof $localize&&$localize.locale||Mo),e},deps:[[new Cn(Ou),new kn,new An]]},{provide:Du,useValue:"USD"}];let Tc=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(In(fc))},e.\u0275mod=re({type:e}),e.\u0275inj=T({providers:Ic}),e})()},3820:(e,t,n)=>{"use strict";n.d(t,{zQ:()=>A,ww:()=>x,rT:()=>S,f7:()=>C,L6:()=>I,_Q:()=>T,lh:()=>E,Qv:()=>b,nw:()=>k});var r=n(3018),i=n(9765),s=n(5917),o=n(7574),a=n(4402),u=n(6682),c=n(3190);function l(e,t){return t?(0,c.w)(()=>e,t):(0,c.w)(()=>e)}var h=n(309),d=n(8002),f=n(2066),p=n(8049),g=n(9673),m=n(5435),y=n(9126),v=n(8939),w=n(8583),_=n(7841);const b=new r.OlP("angularfire2.auth.use-emulator"),I=new r.OlP("angularfire2.auth.settings"),T=new r.OlP("angularfire2.auth.tenant-id"),S=new r.OlP("angularfire2.auth.langugage-code"),E=new r.OlP("angularfire2.auth.use-device-language"),C=new r.OlP("angularfire.auth.persistence"),k=(e,t,n,r,i,s,o,a)=>(0,y.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const u=t.runOutsideAngular(()=>e.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))u.settings[e]=t;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let A=(()=>{class e{constructor(e,t,r,_,b,I,T,S,E,C,A){const x=new i.xQ,N=(0,s.of)(void 0).pipe((0,h.QV)(b.outsideAngular),(0,c.w)(()=>_.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,6780)))),(0,d.U)(()=>(0,v.on)(e,_,t)),(0,d.U)(e=>k(e,_,I,S,E,C,T,A)),(0,f.d)({bufferSize:1,refCount:!1}));if((0,w.PM)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,s.of)(null);else{N.pipe((0,p.P)()).subscribe();const e=N.pipe((0,c.w)(e=>e.getRedirectResult().then(e=>e,()=>null)),y.iC,(0,f.d)({bufferSize:1,refCount:!1})),t=N.pipe((0,c.w)(e=>new o.y(t=>({unsubscribe:_.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=N.pipe((0,c.w)(e=>new o.y(t=>({unsubscribe:_.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(l(t),(0,g.R)(b.outsideAngular),(0,h.QV)(b.insideAngular)),this.user=e.pipe(l(n),(0,g.R)(b.outsideAngular),(0,h.QV)(b.insideAngular)),this.idToken=this.user.pipe((0,c.w)(e=>e?(0,a.D)(e.getIdToken()):(0,s.of)(null))),this.idTokenResult=this.user.pipe((0,c.w)(e=>e?(0,a.D)(e.getIdTokenResult()):(0,s.of)(null))),this.credential=(0,u.T)(e,x,this.authState.pipe((0,m.h)(e=>!e))).pipe((0,d.U)(e=>(null==e?void 0:e.user)?e:null),(0,g.R)(b.outsideAngular),(0,h.QV)(b.insideAngular))}return(0,v.pX)(this,N,_,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>x.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(v.Dh),r.LFG(v.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(y.HU),r.LFG(b,8),r.LFG(I,8),r.LFG(T,8),r.LFG(S,8),r.LFG(E,8),r.LFG(C,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),x=(()=>{class e{constructor(){_.Z.registerVersion("angularfire",y.q4.full,"auth-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[A]}),e})()},4612:(e,t,n)=>{"use strict";n.d(t,{ST:()=>eg,yb:()=>tg});var r=n(3018),i=n(3637),s=n(7574),o=n(4402),a=n(5917),u=n(9126),c=n(9761),l=n(9328),h=n(8002),d=n(2145),f=n(7519),p=n(5435),g=n(8939),m=n(8583),y=(n(6780),n(4486)),v=n(6304),w=n(5452),_=n(6034),b=n(300),I=n(4685),T=function(e,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function S(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var E,C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},k=k||{},A=C||self;function x(){}function N(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function R(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var O="closure_uid_"+(1e9*Math.random()>>>0),D=0;function P(e,t,n){return e.call.apply(e.bind,arguments)}function L(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function F(e,t,n){return(F=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?P:L).apply(null,arguments)}function M(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function U(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function V(){this.s=this.s,this.o=this.o}var j={};V.prototype.s=!1,V.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,O)&&e[O]||(e[O]=++D)}(this);delete j[e]}},V.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var q=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},z=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function B(e){return Array.prototype.concat.apply([],arguments)}function H(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function $(e){return/^[\s\xa0]*$/.test(e)}var G,Z=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function K(e,t){return-1!=e.indexOf(t)}function W(e,t){return e<t?-1:e>t?1:0}e:{var Q=A.navigator;if(Q){var Y=Q.userAgent;if(Y){G=Y;break e}}G=""}function J(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function X(e){var t={};for(var n in e)t[n]=e[n];return t}var ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var s=0;s<ee.length;s++)n=ee[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ne(e){return ne[" "](e),e}ne[" "]=x;var re,ie,se=K(G,"Opera"),oe=K(G,"Trident")||K(G,"MSIE"),ae=K(G,"Edge"),ue=ae||oe,ce=K(G,"Gecko")&&!(K(G.toLowerCase(),"webkit")&&!K(G,"Edge"))&&!(K(G,"Trident")||K(G,"MSIE"))&&!K(G,"Edge"),le=K(G.toLowerCase(),"webkit")&&!K(G,"Edge");function he(){var e=A.document;return e?e.documentMode:void 0}e:{var de="",fe=(ie=G,ce?/rv:([^\);]+)(\)|;)/.exec(ie):ae?/Edge\/([\d\.]+)/.exec(ie):oe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ie):le?/WebKit\/(\S+)/.exec(ie):se?/(?:Version)[ \/]?(\S+)/.exec(ie):void 0);if(fe&&(de=fe?fe[1]:""),oe){var pe=he();if(null!=pe&&pe>parseFloat(de)){re=String(pe);break e}}re=de}var ge={};var me=A.document&&oe&&(he()||parseInt(re,10))||void 0,ye=function(){if(!A.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{A.addEventListener("test",x,t),A.removeEventListener("test",x,t)}catch(n){}return e}();function ve(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function we(e,t){if(ve.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ce){e:{try{ne(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:_e[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&we.Z.h.call(this)}}ve.prototype.h=function(){this.defaultPrevented=!0},U(we,ve);var _e={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Ie=0;function Te(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Ie,this.ca=this.fa=!1}function Se(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Ee(e){this.src=e,this.g={},this.h=0}function Ce(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=q(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Se(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ke(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}Ee.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ke(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Te(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var Ae="closure_lm_"+(1e6*Math.random()|0),xe={};function Ne(e,t,n,r,i){if(r&&r.once)return Oe(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ne(e,t[s],n,r,i);return null}return n=Ve(n),e&&e[be]?e.N(t,n,R(r)?!!r.capture:!!r,i):Re(e,t,n,!1,r,i)}function Re(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=R(i)?!!i.capture:!!i,a=Me(e);if(a||(e[Ae]=a=new Ee(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=Fe;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ye||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Le(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Oe(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Oe(e,t[s],n,r,i);return null}return n=Ve(n),e&&e[be]?e.O(t,n,R(r)?!!r.capture:!!r,i):Re(e,t,n,!0,r,i)}function De(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)De(e,t[s],n,r,i);else r=R(r)?!!r.capture:!!r,n=Ve(n),e&&e[be]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=ke(s=e.g[t],n,r,i))&&(Se(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Me(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ke(t,n,r,i)),(n=-1<e?t[e]:null)&&Pe(n))}function Pe(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[be])Ce(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Le(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Me(t))?(Ce(n,e),0==n.h&&(n.src=null,t[Ae]=null)):Se(e)}}}function Le(e){return e in xe?xe[e]:xe[e]="on"+e}function Fe(e,t){if(e.ca)e=!0;else{t=new we(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Pe(e),e=n.call(r,t)}return e}function Me(e){return(e=e[Ae])instanceof Ee?e:null}var Ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ve(e){return"function"==typeof e?e:(e[Ue]||(e[Ue]=function(t){return e.handleEvent(t)}),e[Ue])}function je(){V.call(this),this.i=new Ee(this),this.P=this,this.I=null}function qe(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new ve(t,e);else if(t instanceof ve)t.target=t.target||e;else{var i=t;te(t=new ve(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ze(o,r,!0,t)&&i}if(i=ze(o=t.g=e,r,!0,t)&&i,i=ze(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ze(o=t.g=n[s],r,!1,t)&&i}function ze(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&Ce(e.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}U(je,V),je.prototype[be]=!0,je.prototype.removeEventListener=function(e,t,n,r){De(this,e,t,n,r)},je.prototype.M=function(){if(je.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Se(n[r]);delete t.g[e],t.h--}}this.I=null},je.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},je.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Be=A.JSON.stringify;function He(){var e=Je,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var $e,Ge=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=Ze.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),Ze=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e},e}())(function(){return new Ke},function(e){return e.reset()}),Ke=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function We(e){A.setTimeout(function(){throw e},0)}function Qe(e,t){$e||function(){var e=A.Promise.resolve(void 0);$e=function(){e.then(Xe)}}(),Ye||($e(),Ye=!0),Je.add(e,t)}var Ye=!1,Je=new Ge;function Xe(){for(var e;e=He();){try{e.h.call(e.g)}catch(n){We(n)}var t=Ze;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ye=!1}function et(e,t){je.call(this),this.h=e||1,this.g=t||A,this.j=F(this.kb,this),this.l=Date.now()}function tt(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function nt(e,t,n){if("function"==typeof e)n&&(e=F(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=F(e.handleEvent,e)}return 2147483647<Number(t)?-1:A.setTimeout(e,t||0)}function rt(e){e.g=nt(function(){e.g=null,e.i&&(e.i=!1,rt(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}U(et,je),(E=et.prototype).da=!1,E.S=null,E.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),qe(this,"tick"),this.da&&(tt(this),this.start()))}},E.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},E.M=function(){et.Z.M.call(this),tt(this),delete this.g};var it=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:rt(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(A.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(V);function st(e){V.call(this),this.h=e,this.g={}}U(st,V);var ot=[];function at(e,t,n,r){Array.isArray(n)||(n&&(ot[0]=n.toString()),n=ot);for(var i=0;i<n.length;i++){var s=Ne(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function ut(e){J(e.g,function(e,t){this.g.hasOwnProperty(t)&&Pe(e)},e),e.g={}}function ct(){this.g=!0}function lt(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Be(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}st.prototype.M=function(){st.Z.M.call(this),ut(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ct.prototype.Aa=function(){this.g=!1},ct.prototype.info=function(){};var ht={},dt=null;function ft(){return dt=dt||new je}function pt(e){ve.call(this,ht.Ma,e)}function gt(e){var t=ft();qe(t,new pt(t,e))}function mt(e,t){ve.call(this,ht.STAT_EVENT,e),this.stat=t}function yt(e){var t=ft();qe(t,new mt(t,e))}function vt(e,t){ve.call(this,ht.Na,e),this.size=t}function wt(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return A.setTimeout(function(){e()},t)}ht.Ma="serverreachability",U(pt,ve),ht.STAT_EVENT="statevent",U(mt,ve),ht.Na="timingevent",U(vt,ve);var _t={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},bt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function It(){}function Tt(){}It.prototype.h=null;var St,Et={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ct(){ve.call(this,"d")}function kt(){ve.call(this,"c")}function At(){}function xt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new st(this),this.P=Rt,this.W=new et(e=ue?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Nt}function Nt(){this.i=null,this.g="",this.h=!1}U(Ct,ve),U(kt,ve),U(At,It),At.prototype.g=function(){return new XMLHttpRequest},At.prototype.i=function(){return{}},St=new At;var Rt=45e3,Ot={},Dt={};function Pt(e,t,n){e.K=1,e.v=rn(Yt(t)),e.s=n,e.U=!0,Lt(e,null)}function Lt(e,t){e.F=Date.now(),Vt(e),e.A=Yt(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),yn(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Nt,e.g=vr(e.l,n?t:null,!e.s),0<e.O&&(e.L=new it(F(e.Ia,e,e.g),e.O)),at(e.V,e.g,"readystatechange",e.gb),t=e.H?X(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),gt(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function Ft(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function Mt(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Ut(e,n))==Dt){4==t&&(e.o=4,yt(14),i=!1),lt(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ot){e.o=4,yt(15),lt(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}lt(e.j,e.m,r,null),Ht(e,r)}Ft(e)&&r!=Dt&&r!=Ot&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,yt(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),lr(t),t.L=!0,yt(11))):(lt(e.j,e.m,n,"[Invalid Chunked Response]"),Bt(e),zt(e))}function Ut(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Dt:(n=Number(t.substring(n,r)),isNaN(n)?Ot:(r+=1)+n>t.length?Dt:(t=t.substr(r,n),e.C=r+n,t))}function Vt(e){e.Y=Date.now()+e.P,jt(e,e.P)}function jt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=wt(F(e.eb,e),t)}function qt(e){e.B&&(A.clearTimeout(e.B),e.B=null)}function zt(e){0==e.l.G||e.I||fr(e.l,e)}function Bt(e){qt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,tt(e.W),ut(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ht(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Sn(n.i,e)))if(n.I=e.N,!e.J&&Sn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;dr(n),tr(n)}cr(n),yt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=wt(F(n.ab,n),6e3));if(1>=Tn(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else gr(n,11)}else if((e.J||n.g==e)&&dr(n),!$(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var s=i[t];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=s[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(K(l,"spdy")||K(l,"quic")||K(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(En(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,nn(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=e;if((r=n).oa=yr(r,r.H?r.la:null,r.W),f.J){Cn(r.i,f);var p=f,g=r.K;g&&p.setTimeout(g),p.B&&(qt(p),Vt(p)),r.g=f}else ur(r);0<n.l.length&&ir(n)}else"stop"!=s[0]&&"close"!=s[0]||gr(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?gr(n,7):er(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}gt(4)}catch(s){}}function $t(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(N(e)||"string"==typeof e)z(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(N(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(N(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Gt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Gt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Zt(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Kt(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Kt(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Kt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(E=xt.prototype).setTimeout=function(e){this.P=e},E.gb=function(e){e=e.target;var t=this.L;t&&3==Wn(e)?t.l():this.Ia(e)},E.Ia=function(e){try{if(e==this.g)e:{var t=Wn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||ue||this.g&&(this.h.h||this.g.ga()||Qn(this.g)))){this.I||4!=t||7==n||gt(8==n||0>=r?3:2),qt(this);var i=this.g.ba();this.N=i;t:if(Ft(this)){var s=Qn(this.g);e="";var o=s.length,a=4==Wn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Bt(this),zt(this);var u="";break t}this.h.i=new A.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,yt(12),Bt(this),zt(this);break e}lt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ht(this,i)}this.U?(Mt(this,t,u),ue&&this.i&&3==t&&(at(this.V,this.W,"tick",this.fb),this.W.start())):(lt(this.j,this.m,u,null),Ht(this,u)),4==t&&Bt(this),this.i&&!this.I&&(4==t?fr(this.l,this):(this.i=!1,Vt(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,yt(12)):(this.o=0,yt(13)),Bt(this),zt(this)}}}catch(t){}},E.fb=function(){if(this.g){var e=Wn(this.g),t=this.g.ga();this.C<t.length&&(qt(this),Mt(this,e,t),this.i&&4!=e&&Vt(this))}},E.cancel=function(){this.I=!0,Bt(this)},E.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(gt(3),yt(17)),Bt(this),this.o=2,zt(this)):jt(this,this.Y-e)},(E=Gt.prototype).R=function(){Zt(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},E.T=function(){return Zt(this),this.g.concat()},E.get=function(e,t){return Kt(this.h,e)?this.h[e]:t},E.set=function(e,t){Kt(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},E.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Wt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Qt){this.g=void 0!==t?t:e.g,Jt(this,e.j),this.s=e.s,Xt(this,e.i),en(this,e.m),this.l=e.l,t=e.h;var n=new fn;n.i=t.i,t.g&&(n.g=new Gt(t.g),n.h=t.h),tn(this,n),this.o=e.o}else e&&(n=String(e).match(Wt))?(this.g=!!t,Jt(this,n[1]||"",!0),this.s=sn(n[2]||""),Xt(this,n[3]||"",!0),en(this,n[4]),this.l=sn(n[5]||"",!0),tn(this,n[6]||"",!0),this.o=sn(n[7]||"")):(this.g=!!t,this.h=new fn(null,this.g))}function Yt(e){return new Qt(e)}function Jt(e,t,n){e.j=n?sn(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Xt(e,t,n){e.i=n?sn(t,!0):t}function en(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function tn(e,t,n){t instanceof fn?(e.h=t,function(e,t){t&&!e.j&&(pn(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(gn(this,t),yn(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=on(t,hn)),e.h=new fn(t,e.g))}function nn(e,t,n){e.h.set(t,n)}function rn(e){return nn(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function sn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function on(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,an),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function an(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Qt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(on(t,un,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(on(t,un,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(on(n,"/"==n.charAt(0)?ln:cn,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",on(n,dn)),e.join("")};var un=/[#\/\?@]/g,cn=/[#\?:]/g,ln=/[#\?]/g,hn=/[#\?@]/g,dn=/#/g;function fn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function pn(e){e.g||(e.g=new Gt,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gn(e,t){pn(e),t=vn(e,t),Kt(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Kt((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Zt(e)))}function mn(e,t){return pn(e),t=vn(e,t),Kt(e.g.h,t)}function yn(e,t,n){gn(e,t),0<n.length&&(e.i=null,e.g.set(vn(e,t),H(n)),e.h+=n.length)}function vn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(E=fn.prototype).add=function(e,t){pn(this),this.i=null,e=vn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},E.forEach=function(e,t){pn(this),this.g.forEach(function(n,r){z(n,function(n){e.call(t,n,r,this)},this)},this)},E.T=function(){pn(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},E.R=function(e){pn(this);var t=[];if("string"==typeof e)mn(this,e)&&(t=B(t,this.g.get(vn(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=B(t,e[n])}return t},E.set=function(e,t){return pn(this),this.i=null,mn(this,e=vn(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},E.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},E.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var wn=function(e,t){this.h=e,this.g=t};function _n(e){this.l=e||bn,e=A.PerformanceNavigationTiming?0<(e=A.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(A.g&&A.g.Ea&&A.g.Ea()&&A.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bn=10;function In(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Tn(e){return e.h?1:e.g?e.g.size:0}function Sn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function En(e,t){e.g?e.g.add(t):e.h=t}function Cn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function kn(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=S(e.g.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.D)}catch(o){t={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return H(e.i)}function An(){}function xn(){this.g=new An}function Nn(e,t,n){var r=n||"";try{$t(e,function(e,n){var i=e;R(e)&&(i=Be(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Rn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function On(e){this.l=e.$b||null,this.j=e.ib||!1}function Dn(e,t){je.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Pn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_n.prototype.cancel=function(){var e,t;if(this.i=kn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=S(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},An.prototype.stringify=function(e){return A.JSON.stringify(e,void 0)},An.prototype.parse=function(e){return A.JSON.parse(e,void 0)},U(On,It),On.prototype.g=function(){return new Dn(this.l,this.j)},On.prototype.i=function(e){return function(){return e}}({}),U(Dn,je);var Pn=0;function Ln(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Fn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Mn(e)}function Mn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(E=Dn.prototype).open=function(e,t){if(this.readyState!=Pn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Mn(this)},E.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||A).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},E.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fn(this)),this.readyState=Pn},E.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==A.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ln(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},E.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Fn(this):Mn(this),3==this.readyState&&Ln(this)}},E.Ua=function(e){this.g&&(this.response=this.responseText=e,Fn(this))},E.Ta=function(e){this.g&&(this.response=e,Fn(this))},E.ha=function(){this.g&&Fn(this)},E.setRequestHeader=function(e,t){this.v.append(e,t)},E.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},E.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Dn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Un=A.JSON.parse;function Vn(e){je.call(this),this.headers=new Gt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jn,this.K=this.L=!1}U(Vn,je);var jn="",qn=/^https?$/i,zn=["POST","PUT"];function Bn(e){return"content-type"==e.toLowerCase()}function Hn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,$n(e),Zn(e)}function $n(e){e.D||(e.D=!0,qe(e,"complete"),qe(e,"error"))}function Gn(e){if(e.h&&void 0!==k&&(!e.C[1]||4!=Wn(e)||2!=e.ba()))if(e.v&&4==Wn(e))nt(e.Fa,0,e);else if(qe(e,"readystatechange"),4==Wn(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.H).match(Wt)[1]||null;if(!s&&A.self&&A.self.location){var o=A.self.location.protocol;s=o.substr(0,o.length-1)}i=!qn.test(s?s.toLowerCase():"")}t=i}if(t)qe(e,"complete"),qe(e,"success");else{e.m=6;try{var a=2<Wn(e)?e.g.statusText:""}catch(u){a=""}e.j=a+" ["+e.ba()+"]",$n(e)}}finally{Zn(e)}}}function Zn(e,t){if(e.g){Kn(e);var n=e.g,r=e.C[0]?x:null;e.g=null,e.C=null,t||qe(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Kn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(A.clearTimeout(e.A),e.A=null)}function Wn(e){return e.g?e.g.readyState:0}function Qn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case jn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Yn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return J(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):nn(e,t,n))}function Jn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xn(e){this.za=0,this.l=[],this.h=new ct,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Jn("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Jn("baseRetryDelayMs",5e3,e),this.$a=Jn("retryDelaySeedMs",1e4,e),this.Ya=Jn("forwardChannelMaxRetries",2,e),this.ra=Jn("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new _n(e&&e.concurrentRequestLimit),this.Ca=new xn,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function er(e){if(nr(e),3==e.G){var t=e.V++,n=Yt(e.F);nn(n,"SID",e.J),nn(n,"RID",t),nn(n,"TYPE","terminate"),or(e,n),(t=new xt(e,e.h,t,void 0)).K=2,t.v=rn(Yt(n)),n=!1,A.navigator&&A.navigator.sendBeacon&&(n=A.navigator.sendBeacon(t.v.toString(),"")),!n&&A.Image&&((new Image).src=t.v,n=!0),n||(t.g=vr(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Vt(t)}mr(e)}function tr(e){e.g&&(lr(e),e.g.cancel(),e.g=null)}function nr(e){tr(e),e.u&&(A.clearTimeout(e.u),e.u=null),dr(e),e.i.cancel(),e.m&&("number"==typeof e.m&&A.clearTimeout(e.m),e.m=null)}function rr(e,t){e.l.push(new wn(e.Za++,t)),3==e.G&&ir(e)}function ir(e){In(e.i)||e.m||(e.m=!0,Qe(e.Ha,e),e.C=0)}function sr(e,t){var n;n=t?t.m:e.V++;var r=Yt(e.F);nn(r,"SID",e.J),nn(r,"RID",n),nn(r,"AID",e.U),or(e,r),e.o&&e.s&&Yn(r,e.o,e.s),n=new xt(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=ar(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),En(e.i,n),Pt(n,r,t)}function or(e,t){e.j&&$t({},function(e,n){nn(t,n,e)})}function ar(e,t,n){n=Math.min(e.l.length,n);var r=e.j?F(e.j.Oa,e.j,e):null;e:for(var i=e.l,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].h)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=s))s=Math.max(0,i[u].h-100),a=!1;else try{Nn(l,o,"req"+c+"_")}catch(Kr){r&&r(l)}}if(a){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ur(e){e.g||e.u||(e.Y=1,Qe(e.Ga,e),e.A=0)}function cr(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=wt(F(e.Ga,e),pr(e,e.A)),e.A++,0))}function lr(e){null!=e.B&&(A.clearTimeout(e.B),e.B=null)}function hr(e){e.g=new xt(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Yt(e.oa);nn(t,"RID","rpc"),nn(t,"SID",e.J),nn(t,"CI",e.N?"0":"1"),nn(t,"AID",e.U),or(e,t),nn(t,"TYPE","xmlhttp"),e.o&&e.s&&Yn(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=rn(Yt(t)),n.s=null,n.U=!0,Lt(n,e)}function dr(e){null!=e.v&&(A.clearTimeout(e.v),e.v=null)}function fr(e,t){var n=null;if(e.g==t){dr(e),lr(e),e.g=null;var r=2}else{if(!Sn(e.i,t))return;n=t.D,Cn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;qe(r=ft(),new vt(r,n,t,i)),ir(e)}else ur(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Tn(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=wt(F(e.Ha,e,t),pr(e,e.C)),e.C++,0)))}(e,t)||2==r&&cr(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:gr(e,5);break;case 4:gr(e,10);break;case 3:gr(e,6);break;default:gr(e,2)}}function pr(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function gr(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=F(e.jb,e);n||(n=new Qt("//www.google.com/images/cleardot.gif"),A.location&&"http"==A.location.protocol||Jt(n,"https"),rn(n)),function(e,t){var n=new ct;if(A.Image){var r=new Image;r.onload=M(Rn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=M(Rn,n,r,"TestLoadImage: error",!1,t),r.onabort=M(Rn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=M(Rn,n,r,"TestLoadImage: timeout",!1,t),A.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else yt(2);e.G=0,e.j&&e.j.va(t),mr(e),nr(e)}function mr(e){e.G=0,e.I=-1,e.j&&(0==kn(e.i).length&&0==e.l.length||(e.i.i.length=0,H(e.l),e.l.length=0),e.j.ua())}function yr(e,t,n){var r=function(e){return e instanceof Qt?Yt(e):new Qt(e,void 0)}(n);if(""!=r.i)t&&Xt(r,t+"."+r.i),en(r,r.m);else{var i=A.location;r=function(e,t,n,r){var i=new Qt(null,void 0);return e&&Jt(i,e),t&&Xt(i,t),n&&en(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&J(e.aa,function(e,t){nn(r,t,e)}),n=e.sa,(t=e.D)&&n&&nn(r,t,n),nn(r,"VER",e.ma),or(e,r),r}function vr(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Vn(n&&e.Ba&&!e.qa?new On({ib:!0}):e.qa)).L=e.H,t}function wr(){}function _r(){if(oe&&!(10<=Number(me)))throw Error("Environmental error: no available transport.")}function br(e,t){je.call(this),this.g=new Xn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!$(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!$(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Sr(this)}function Ir(e){Ct.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Tr(){kt.call(this),this.status=1}function Sr(e){this.g=e}(E=Vn.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():St.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:St),this.g.onreadystatechange=F(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void Hn(this,s)}e=n||"";var i=new Gt(this.headers);r&&$t(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=Bn,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=A.FormData&&e instanceof A.FormData,!(0<=q(zn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Kn(this),0<this.B&&((this.K=function(e){return oe&&function(){return e=ge,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=Z(String(re)).split("."),n=Z("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var s=t[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;e=W(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||W(0==s[2].length,0==o[2].length)||W(s[2],o[2]),s=s[3],o=o[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=F(this.pa,this)):this.A=nt(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Hn(this,s)}},E.pa=function(){void 0!==k&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qe(this,"timeout"),this.abort(8))},E.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,qe(this,"complete"),qe(this,"abort"),Zn(this))},E.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zn(this,!0)),Vn.Z.M.call(this)},E.Fa=function(){this.s||(this.F||this.v||this.l?Gn(this):this.cb())},E.cb=function(){Gn(this)},E.ba=function(){try{return 2<Wn(this)?this.g.status:-1}catch(ie){return-1}},E.ga=function(){try{return this.g?this.g.responseText:""}catch(ie){return""}},E.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Un(t)}},E.Da=function(){return this.m},E.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(E=Xn.prototype).ma=8,E.G=1,E.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},E.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new xt(this,this.h,e,void 0),n=this.s;if(this.P&&(n?te(n=X(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ar(this,t,r),nn(i=Yt(this.F),"RID",e),nn(i,"CVER",22),this.D&&nn(i,"X-HTTP-Session-Id",this.D),or(this,i),this.o&&n&&Yn(i,this.o,n),En(this.i,t),this.Ra&&nn(i,"TYPE","init"),this.ja?(nn(i,"$req",r),nn(i,"SID","null"),t.$=!0,Pt(t,i,null)):Pt(t,i,r),this.G=2}}else 3==this.G&&(e?sr(this,e):0==this.l.length||In(this.i)||sr(this))},E.Ga=function(){if(this.u=null,hr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=wt(F(this.bb,this),e)}},E.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,yt(10),tr(this),hr(this))},E.ab=function(){null!=this.v&&(this.v=null,tr(this),cr(this),yt(19))},E.jb=function(e){e?(this.h.info("Successfully pinged google.com"),yt(2)):(this.h.info("Failed to ping google.com"),yt(1))},(E=wr.prototype).xa=function(){},E.wa=function(){},E.va=function(){},E.ua=function(){},E.Oa=function(){},_r.prototype.g=function(e,t){return new br(e,t)},U(br,je),br.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Qe(F(e.hb,e,t))),yt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=yr(e,null,e.W),ir(e)},br.prototype.close=function(){er(this.g)},br.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,rr(this.g,t)}else this.v?((t={}).__data__=Be(e),rr(this.g,t)):rr(this.g,e)},br.prototype.M=function(){this.g.j=null,delete this.j,er(this.g),delete this.g,br.Z.M.call(this)},U(Ir,Ct),U(Tr,kt),U(Sr,wr),Sr.prototype.xa=function(){qe(this.g,"a")},Sr.prototype.wa=function(e){qe(this.g,new Ir(e))},Sr.prototype.va=function(e){qe(this.g,new Tr(e))},Sr.prototype.ua=function(){qe(this.g,"b")},_r.prototype.createWebChannel=_r.prototype.g,br.prototype.send=br.prototype.u,br.prototype.open=br.prototype.m,br.prototype.close=br.prototype.close,_t.NO_ERROR=0,_t.TIMEOUT=8,_t.HTTP_ERROR=6,bt.COMPLETE="complete",Tt.EventType=Et,Et.OPEN="a",Et.CLOSE="b",Et.ERROR="c",Et.MESSAGE="d",je.prototype.listen=je.prototype.N,Vn.prototype.listenOnce=Vn.prototype.O,Vn.prototype.getLastError=Vn.prototype.La,Vn.prototype.getLastErrorCode=Vn.prototype.Da,Vn.prototype.getStatus=Vn.prototype.ba,Vn.prototype.getResponseJson=Vn.prototype.Qa,Vn.prototype.getResponseText=Vn.prototype.ga,Vn.prototype.send=Vn.prototype.ea;var Er=_t,Cr=bt,kr=ht,Ar=On,xr=Tt,Nr=Vn;class Rr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rr.UNAUTHENTICATED=new Rr(null),Rr.GOOGLE_CREDENTIALS=new Rr("google-credentials-uid"),Rr.FIRST_PARTY=new Rr("first-party-uid"),Rr.MOCK_USER=new Rr("mock-user");let Or="9.0.2";const Dr=new b.Yd("@firebase/firestore");function Pr(){return Dr.logLevel}function Lr(e,...t){if(Dr.logLevel<=b.in.DEBUG){const n=t.map(Ur);Dr.debug(`Firestore (${Or}): ${e}`,...n)}}function Fr(e,...t){if(Dr.logLevel<=b.in.ERROR){const n=t.map(Ur);Dr.error(`Firestore (${Or}): ${e}`,...n)}}function Mr(e,...t){if(Dr.logLevel<=b.in.WARN){const n=t.map(Ur);Dr.warn(`Firestore (${Or}): ${e}`,...n)}}function Ur(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Vr(e="Unexpected state"){const t=`FIRESTORE (${Or}) INTERNAL ASSERTION FAILED: `+e;throw Fr(t),new Error(t)}function jr(e,t){e||Vr()}function qr(e,t){return e}const zr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Br extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class $r{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class Gr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rr.UNAUTHENTICATED))}shutdown(){}}class Zr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Kr{constructor(e){this.t=e,this.currentUser=Rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const i=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let s=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const t=s;e.enqueueRetryable((0,v.Z)(function*(){yield t.promise,yield i(n.currentUser)}))},a=e=>{Lr("FirebaseCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Lr("FirebaseCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hr)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Lr("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(jr("string"==typeof t.accessToken),new $r(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return jr(null===e||"string"==typeof e),new Rr(e)}}class Wr{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Rr.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class Qr{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Wr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.g(e),this.p=e=>t.writeSequenceNumber(e))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function Jr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Yr.T=-1;class Xr{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Jr(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function ei(e,t){return e<t?-1:e>t?1:0}function ti(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function ni(e){return e+"\0"}class ri{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Br(zr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Br(zr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Br(zr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Br(zr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ri.fromMillis(Date.now())}static fromDate(e){return ri.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ri(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ei(this.nanoseconds,e.nanoseconds):ei(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ii{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ii(e)}static min(){return new ii(new ri(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function si(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function oi(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ai(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ui{constructor(e,t,n){void 0===t?t=0:t>e.length&&Vr(),void 0===n?n=e.length-t:n>e.length-t&&Vr(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ui.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ui?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ci extends ui{construct(e,t,n){return new ci(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Br(zr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new ci(t)}static emptyPath(){return new ci([])}}const li=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hi extends ui{construct(e,t,n){return new hi(e,t,n)}static isValidIdentifier(e){return li.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hi(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Br(zr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Br(zr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Br(zr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Br(zr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hi(t)}static emptyPath(){return new hi([])}}class di{constructor(e){this.fields=e,e.sort(hi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ti(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class fi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new fi(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new fi(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ei(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fi.EMPTY_BYTE_STRING=new fi("");const pi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(e){if(jr(!!e),"string"==typeof e){let t=0;const n=pi.exec(e);if(jr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:mi(e.seconds),nanos:mi(e.nanos)}}function mi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function yi(e){return"string"==typeof e?fi.fromBase64String(e):fi.fromUint8Array(e)}function vi(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wi(e){const t=e.mapValue.fields.__previous_value__;return vi(t)?wi(t):t}function _i(e){const t=gi(e.mapValue.fields.__local_write_time__.timestampValue);return new ri(t.seconds,t.nanos)}function bi(e){return null==e}function Ii(e){return 0===e&&1/e==-1/0}function Ti(e){return"number"==typeof e&&Number.isInteger(e)&&!Ii(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class Si{constructor(e){this.path=e}static fromPath(e){return new Si(ci.fromString(e))}static fromName(e){return new Si(ci.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===ci.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ci.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Si(new ci(e.slice()))}}function Ei(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?vi(e)?4:10:Vr()}function Ci(e,t){const n=Ei(e);if(n!==Ei(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _i(e).isEqual(_i(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=gi(e.timestampValue),r=gi(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return yi(e.bytesValue).isEqual(yi(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return mi(e.geoPointValue.latitude)===mi(t.geoPointValue.latitude)&&mi(e.geoPointValue.longitude)===mi(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return mi(e.integerValue)===mi(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=mi(e.doubleValue),r=mi(t.doubleValue);return n===r?Ii(n)===Ii(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ti(e.arrayValue.values||[],t.arrayValue.values||[],Ci);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(si(n)!==si(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ci(n[i],r[i])))return!1;return!0}(e,t);default:return Vr()}}function ki(e,t){return void 0!==(e.values||[]).find(e=>Ci(e,t))}function Ai(e,t){const n=Ei(e),r=Ei(t);if(n!==r)return ei(n,r);switch(n){case 0:return 0;case 1:return ei(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=mi(e.integerValue||e.doubleValue),r=mi(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return xi(e.timestampValue,t.timestampValue);case 4:return xi(_i(e),_i(t));case 5:return ei(e.stringValue,t.stringValue);case 6:return function(e,t){const n=yi(e),r=yi(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ei(n[i],r[i]);if(0!==e)return e}return ei(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ei(mi(e.latitude),mi(t.latitude));return 0!==n?n:ei(mi(e.longitude),mi(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ai(n[i],r[i]);if(e)return e}return ei(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=ei(r[o],s[o]);if(0!==e)return e;const t=Ai(n[r[o]],i[s[o]]);if(0!==t)return t}return ei(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Vr()}}function xi(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ei(e,t);const n=gi(e),r=gi(t),i=ei(n.seconds,r.seconds);return 0!==i?i:ei(n.nanos,r.nanos)}function Ni(e){return Ri(e)}function Ri(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=gi(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?yi(e.bytesValue).toBase64():"referenceValue"in e?Si.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ri(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ri(e.fields[i])}`;return n+"}"}(e.mapValue):Vr();var t}function Oi(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Di(e){return!!e&&"integerValue"in e}function Pi(e){return!!e&&"arrayValue"in e}function Li(e){return!!e&&"nullValue"in e}function Fi(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mi(e){return!!e&&"mapValue"in e}function Ui(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return oi(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ui(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ui(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Vi{constructor(e){this.value=e}static empty(){return new Vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Mi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ui(t)}setAll(e){let t=hi.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ui(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Mi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ci(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Mi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){oi(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Vi(Ui(this.value))}}function ji(e){const t=[];return oi(e.fields,(e,n)=>{const r=new hi([e]);if(Mi(n)){const e=ji(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new di(t)}class qi{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new qi(e,0,ii.min(),Vi.empty(),0)}static newFoundDocument(e,t,n){return new qi(e,1,t,n,0)}static newNoDocument(e,t){return new qi(e,2,t,Vi.empty(),0)}static newUnknownDocument(e,t){return new qi(e,3,t,Vi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new qi(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zi{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.A=null}}function Bi(e,t=null,n=[],r=[],i=null,s=null,o=null){return new zi(e,t,n,r,i,s,o)}function Hi(e){const t=qr(e);if(null===t.A){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>function(e){return e.field.canonicalString()+e.op.toString()+Ni(e.value)}(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),bi(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=rs(t.startAt)),t.endAt&&(e+="|ub:",e+=rs(t.endAt)),t.A=e}return t.A}function $i(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!ss(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if((n=e.filters[i]).op!==(r=t.filters[i]).op||!n.field.isEqual(r.field)||!Ci(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!as(e.startAt,t.startAt)&&as(e.endAt,t.endAt)}function Gi(e){return Si.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Zi extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,n):new Ki(e,t,n):"array-contains"===t?new Ji(e,n):"in"===t?new Xi(e,n):"not-in"===t?new es(e,n):"array-contains-any"===t?new ts(e,n):new Zi(e,t,n)}static R(e,t,n){return"in"===t?new Wi(e,n):new Qi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(Ai(t,this.value)):null!==t&&Ei(this.value)===Ei(t)&&this.P(Ai(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Vr()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ki extends Zi{constructor(e,t,n){super(e,t,n),this.key=Si.fromName(n.referenceValue)}matches(e){const t=Si.comparator(e.key,this.key);return this.P(t)}}class Wi extends Zi{constructor(e,t){super(e,"in",t),this.keys=Yi(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qi extends Zi{constructor(e,t){super(e,"not-in",t),this.keys=Yi(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Yi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Si.fromName(e.referenceValue))}class Ji extends Zi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pi(t)&&ki(t.arrayValue,this.value)}}class Xi extends Zi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ki(this.value.arrayValue,t)}}class es extends Zi{constructor(e,t){super(e,"not-in",t)}matches(e){if(ki(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ki(this.value.arrayValue,t)}}class ts extends Zi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pi(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>ki(this.value.arrayValue,e))}}class ns{constructor(e,t){this.position=e,this.before=t}}function rs(e){return`${e.before?"b":"a"}:${e.position.map(e=>Ni(e)).join(",")}`}class is{constructor(e,t="asc"){this.field=e,this.dir=t}}function ss(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function os(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Si.comparator(Si.fromName(o.referenceValue),n.key):Ai(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function as(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ci(e.position[n],t.position[n]))return!1;return!0}class us{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null}}function cs(e,t,n,r,i,s,o,a){return new us(e,t,n,r,i,s,o,a)}function ls(e){return new us(e)}function hs(e){return!bi(e.limit)&&"F"===e.limitType}function ds(e){return!bi(e.limit)&&"L"===e.limitType}function fs(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ps(e){for(const t of e.filters)if(t.v())return t.field;return null}function gs(e){return null!==e.collectionGroup}function ms(e){const t=qr(e);if(null===t.V){t.V=[];const e=ps(t),n=fs(t);if(null!==e&&null===n)e.isKeyField()||t.V.push(new is(e)),t.V.push(new is(hi.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.V.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new is(hi.keyField(),e))}}}return t.V}function ys(e){const t=qr(e);if(!t.S)if("F"===t.limitType)t.S=Bi(t.path,t.collectionGroup,ms(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of ms(t))e.push(new is(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new ns(t.endAt.position,!t.endAt.before):null,r=t.startAt?new ns(t.startAt.position,!t.startAt.before):null;t.S=Bi(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.S}function vs(e,t,n){return new us(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ws(e,t){return $i(ys(e),ys(t))&&e.limitType===t.limitType}function _s(e){return`${Hi(ys(e))}|lt:${e.limitType}`}function bs(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Ni(t.value)}`;var t}).join(", ")}]`),bi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: "+rs(e.startAt)),e.endAt&&(t+=", endAt: "+rs(e.endAt)),`Target(${t})`}(ys(e))}; limitType=${e.limitType})`}function Is(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Si.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!os(e.startAt,ms(e),t)||e.endAt&&os(e.endAt,ms(e),t))}(e,t)}function Ts(e){return(t,n)=>{let r=!1;for(const i of ms(e)){const e=Ss(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ss(e,t,n){const r=e.field.isKeyField()?Si.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ai(r,i):Vr()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Vr()}}function Es(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ii(t)?"-0":t}}function Cs(e){return{integerValue:""+e}}function ks(e,t){return Ti(t)?Cs(t):Es(e,t)}class As{constructor(){this._=void 0}}function xs(e,t,n){return e instanceof Os?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ds?Ps(e,t):e instanceof Ls?Fs(e,t):function(e,t){const n=Rs(e,t),r=Us(n)+Us(e.C);return Di(n)&&Di(e.C)?Cs(r):Es(e.N,r)}(e,t)}function Ns(e,t,n){return e instanceof Ds?Ps(e,t):e instanceof Ls?Fs(e,t):n}function Rs(e,t){return e instanceof Ms?Di(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Os extends As{}class Ds extends As{constructor(e){super(),this.elements=e}}function Ps(e,t){const n=Vs(t);for(const r of e.elements)n.some(e=>Ci(e,r))||n.push(r);return{arrayValue:{values:n}}}class Ls extends As{constructor(e){super(),this.elements=e}}function Fs(e,t){let n=Vs(t);for(const r of e.elements)n=n.filter(e=>!Ci(e,r));return{arrayValue:{values:n}}}class Ms extends As{constructor(e,t){super(),this.N=e,this.C=t}}function Us(e){return mi(e.integerValue||e.doubleValue)}function Vs(e){return Pi(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class js{constructor(e,t){this.field=e,this.transform=t}}class qs{constructor(e,t){this.version=e,this.transformResults=t}}class zs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zs}static exists(e){return new zs(void 0,e)}static updateTime(e){return new zs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bs(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Hs{}function $s(e,t,n){e instanceof Qs?function(e,t,n){const r=e.value.clone(),i=Xs(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ys?function(e,t,n){if(!Bs(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Xs(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Js(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Gs(e,t,n){e instanceof Qs?function(e,t,n){if(!Bs(e.precondition,t))return;const r=e.value.clone(),i=eo(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Ws(t),r).setHasLocalMutations()}(e,t,n):e instanceof Ys?function(e,t,n){if(!Bs(e.precondition,t))return;const r=eo(e.fieldTransforms,n,t),i=t.data;i.setAll(Js(e)),i.setAll(r),t.convertToFoundDocument(Ws(t),i).setHasLocalMutations()}(e,t,n):function(e,t){Bs(e.precondition,t)&&t.convertToNoDocument(ii.min())}(e,t)}function Zs(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Rs(r.transform,e||null);null!=i&&(null==n&&(n=Vi.empty()),n.set(r.field,i))}return n||null}function Ks(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ti(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ds&&t instanceof Ds||e instanceof Ls&&t instanceof Ls?ti(e.elements,t.elements,Ci):e instanceof Ms&&t instanceof Ms?Ci(e.C,t.C):e instanceof Os&&t instanceof Os}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Ws(e){return e.isFoundDocument()?e.version:ii.min()}class Qs extends Hs{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class Ys extends Hs{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Js(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Xs(e,t,n){const r=new Map;jr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ns(o,a,n[i]))}return r}function eo(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,xs(e,s,t))}return r}class to extends Hs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class no extends Hs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class ro{constructor(e){this.count=e}}var io,so;function oo(e){switch(e){case zr.OK:return Vr();case zr.CANCELLED:case zr.UNKNOWN:case zr.DEADLINE_EXCEEDED:case zr.RESOURCE_EXHAUSTED:case zr.INTERNAL:case zr.UNAVAILABLE:case zr.UNAUTHENTICATED:return!1;case zr.INVALID_ARGUMENT:case zr.NOT_FOUND:case zr.ALREADY_EXISTS:case zr.PERMISSION_DENIED:case zr.FAILED_PRECONDITION:case zr.ABORTED:case zr.OUT_OF_RANGE:case zr.UNIMPLEMENTED:case zr.DATA_LOSS:return!0;default:return Vr()}}function ao(e){if(void 0===e)return Fr("GRPC error has no .code"),zr.UNKNOWN;switch(e){case io.OK:return zr.OK;case io.CANCELLED:return zr.CANCELLED;case io.UNKNOWN:return zr.UNKNOWN;case io.DEADLINE_EXCEEDED:return zr.DEADLINE_EXCEEDED;case io.RESOURCE_EXHAUSTED:return zr.RESOURCE_EXHAUSTED;case io.INTERNAL:return zr.INTERNAL;case io.UNAVAILABLE:return zr.UNAVAILABLE;case io.UNAUTHENTICATED:return zr.UNAUTHENTICATED;case io.INVALID_ARGUMENT:return zr.INVALID_ARGUMENT;case io.NOT_FOUND:return zr.NOT_FOUND;case io.ALREADY_EXISTS:return zr.ALREADY_EXISTS;case io.PERMISSION_DENIED:return zr.PERMISSION_DENIED;case io.FAILED_PRECONDITION:return zr.FAILED_PRECONDITION;case io.ABORTED:return zr.ABORTED;case io.OUT_OF_RANGE:return zr.OUT_OF_RANGE;case io.UNIMPLEMENTED:return zr.UNIMPLEMENTED;case io.DATA_LOSS:return zr.DATA_LOSS;default:return Vr()}}(so=io||(io={}))[so.OK=0]="OK",so[so.CANCELLED=1]="CANCELLED",so[so.UNKNOWN=2]="UNKNOWN",so[so.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",so[so.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",so[so.NOT_FOUND=5]="NOT_FOUND",so[so.ALREADY_EXISTS=6]="ALREADY_EXISTS",so[so.PERMISSION_DENIED=7]="PERMISSION_DENIED",so[so.UNAUTHENTICATED=16]="UNAUTHENTICATED",so[so.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",so[so.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",so[so.ABORTED=10]="ABORTED",so[so.OUT_OF_RANGE=11]="OUT_OF_RANGE",so[so.UNIMPLEMENTED=12]="UNIMPLEMENTED",so[so.INTERNAL=13]="INTERNAL",so[so.UNAVAILABLE=14]="UNAVAILABLE",so[so.DATA_LOSS=15]="DATA_LOSS";class uo{constructor(e,t){this.comparator=e,this.root=t||lo.EMPTY}insert(e,t){return new uo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,lo.BLACK,null,null))}remove(e){return new uo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new co(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new co(this.root,e,this.comparator,!1)}getReverseIterator(){return new co(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new co(this.root,e,this.comparator,!0)}}class co{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lo{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:lo.RED,this.left=null!=r?r:lo.EMPTY,this.right=null!=i?i:lo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new lo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return lo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return lo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vr();if(this.right.isRed())throw Vr();const e=this.left.check();if(e!==this.right.check())throw Vr();return e+(this.isRed()?0:1)}}lo.EMPTY=null,lo.RED=!0,lo.BLACK=!1,lo.EMPTY=new class{constructor(){this.size=0}get key(){throw Vr()}get value(){throw Vr()}get color(){throw Vr()}get left(){throw Vr()}get right(){throw Vr()}copy(e,t,n,r,i){return this}insert(e,t,n){return new lo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ho{constructor(e){this.comparator=e,this.data=new uo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fo(this.data.getIterator())}getIteratorFrom(e){return new fo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof ho))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ho(this.comparator);return t.data=e,t}}class fo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const po=new uo(Si.comparator);function go(){return po}const mo=new uo(Si.comparator);function yo(){return mo}const vo=new uo(Si.comparator);function wo(){return vo}const _o=new ho(Si.comparator);function bo(...e){let t=_o;for(const n of e)t=t.add(n);return t}const Io=new ho(ei);function To(){return Io}class So{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,Eo.createSynthesizedTargetChangeForCurrentChange(e,t)),new So(ii.min(),n,To(),go(),bo())}}class Eo{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Eo(fi.EMPTY_BYTE_STRING,t,bo(),bo(),bo())}}class Co{constructor(e,t,n,r){this.k=e,this.removedTargetIds=t,this.key=n,this.$=r}}class ko{constructor(e,t){this.targetId=e,this.O=t}}class Ao{constructor(e,t,n=fi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class xo{constructor(){this.F=0,this.M=Oo(),this.L=fi.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=bo(),t=bo(),n=bo();return this.M.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Vr()}}),new Eo(this.L,this.B,e,t,n)}G(){this.U=!1,this.M=Oo()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class No{constructor(e){this.tt=e,this.et=new Map,this.nt=go(),this.st=Ro(),this.it=new ho(ei)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,t=>{const n=this.ut(t);switch(e.state){case 0:this.ht(t)&&n.j(e.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(e.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(t);break;case 3:this.ht(t)&&(n.Z(),n.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),n.j(e.resumeToken));break;default:Vr()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((e,n)=>{this.ht(n)&&t(n)})}ft(e){const t=e.targetId,n=e.O.count,r=this.dt(t);if(r){const e=r.target;if(Gi(e))if(0===n){const n=new Si(e.path);this.at(t,n,qi.newNoDocument(n,ii.min()))}else jr(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((n,r)=>{const i=this.dt(r);if(i){if(n.current&&Gi(i.target)){const t=new Si(i.target.path);null!==this.nt.get(t)||this.gt(r,t)||this.at(r,t,qi.newNoDocument(t,e))}n.K&&(t.set(r,n.W()),n.G())}});let n=bo();this.st.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.dt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))});const r=new So(e,t,this.it,this.nt,n);return this.nt=go(),this.st=Ro(),this.it=new ho(ei),r}ot(e,t){if(!this.ht(e))return;const n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,n){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new xo,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new ho(ei),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||Lr("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Et(e)}lt(e){this.et.set(e,new xo),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function Ro(){return new uo(Si.comparator)}function Oo(){return new uo(Si.comparator)}const Do={asc:"ASCENDING",desc:"DESCENDING"},Po={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Lo{constructor(e,t){this.databaseId=e,this.D=t}}function Fo(e,t){return e.D?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Mo(e,t){return e.D?t.toBase64():t.toUint8Array()}function Uo(e,t){return Fo(e,t.toTimestamp())}function Vo(e){return jr(!!e),ii.fromTimestamp(function(e){const t=gi(e);return new ri(t.seconds,t.nanos)}(e))}function jo(e,t){return function(e){return new ci(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function qo(e){const t=ci.fromString(e);return jr(ha(t)),t}function zo(e,t){return jo(e.databaseId,t.path)}function Bo(e,t){const n=qo(t);if(n.get(1)!==e.databaseId.projectId)throw new Br(zr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Br(zr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Si(Zo(n))}function Ho(e,t){return jo(e.databaseId,t)}function $o(e){const t=qo(e);return 4===t.length?ci.emptyPath():Zo(t)}function Go(e){return new ci(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Zo(e){return jr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ko(e,t,n){return{name:zo(e,t),fields:n.value.mapValue.fields}}function Wo(e,t,n){const r=Bo(e,t.name),i=Vo(t.updateTime),s=new Vi({mapValue:{fields:t.fields}}),o=qi.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Qo(e,t){let n;if(t instanceof Qs)n={update:Ko(e,t.key,t.value)};else if(t instanceof to)n={delete:zo(e,t.key)};else if(t instanceof Ys)n={update:Ko(e,t.key,t.data),updateMask:la(t.fieldMask)};else{if(!(t instanceof no))return Vr();n={verify:zo(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Os)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ds)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ls)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ms)return{fieldPath:t.field.canonicalString(),increment:n.C};throw Vr()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Uo(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Vr()}(e,t.precondition)),n}function Yo(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?zs.updateTime(Vo(e.updateTime)):void 0!==e.exists?zs.exists(e.exists):zs.none()}(t.currentDocument):zs.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(jr("REQUEST_TIME"===t.setToServerValue),n=new Os):"appendMissingElements"in t?n=new Ds(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new Ls(t.removeAllFromArray.values||[]):"increment"in t?n=new Ms(e,t.increment):Vr();const r=hi.fromServerFormat(t.fieldPath);return new js(r,n)}(e,t)):[];if(t.update){const i=Bo(e,t.update.name),s=new Vi({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){return new di((e.fieldPaths||[]).map(e=>hi.fromServerFormat(e)))}(t.updateMask);return new Ys(i,s,e,n,r)}return new Qs(i,s,n,r)}if(t.delete){const r=Bo(e,t.delete);return new to(r,n)}if(t.verify){const r=Bo(e,t.verify);return new no(r,n)}return Vr()}function Jo(e,t){return{documents:[Ho(e,t.path)]}}function Xo(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ho(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ho(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(Fi(e.value))return{unaryFilter:{field:oa(e.field),op:"IS_NAN"}};if(Li(e.value))return{unaryFilter:{field:oa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Fi(e.value))return{unaryFilter:{field:oa(e.field),op:"IS_NOT_NAN"}};if(Li(e.value))return{unaryFilter:{field:oa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oa(e.field),op:sa(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:oa(e.field),direction:ia(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.D||bi(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=na(t.startAt)),t.endAt&&(n.structuredQuery.endAt=na(t.endAt)),n}function ea(e){let t=$o(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){jr(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=ta(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new is(aa(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,bi(t)?null:t}(n.limit));let u=null;n.startAt&&(u=ra(n.startAt));let c=null;return n.endAt&&(c=ra(n.endAt)),cs(t,i,o,s,a,"F",u,c)}function ta(e){return e?void 0!==e.unaryFilter?[ca(e)]:void 0!==e.fieldFilter?[ua(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>ta(e)).reduce((e,t)=>e.concat(t)):Vr():[]}function na(e){return{before:e.before,values:e.position}}function ra(e){return new ns(e.values||[],!!e.before)}function ia(e){return Do[e]}function sa(e){return Po[e]}function oa(e){return{fieldPath:e.canonicalString()}}function aa(e){return hi.fromServerFormat(e.fieldPath)}function ua(e){return Zi.create(aa(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Vr()}}(e.fieldFilter.op),e.fieldFilter.value)}function ca(e){switch(e.unaryFilter.op){case"IS_NAN":const t=aa(e.unaryFilter.field);return Zi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=aa(e.unaryFilter.field);return Zi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=aa(e.unaryFilter.field);return Zi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=aa(e.unaryFilter.field);return Zi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Vr()}}function la(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function ha(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function da(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=pa(t)),t=fa(e.get(n),t);return pa(t)}function fa(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function pa(e){return e+"\x01\x01"}function ga(e){const t=e.length;if(jr(t>=2),2===t)return jr("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ci.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Vr(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Vr()}s=t+2}return new ci(r)}class ma{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class ya{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}ya.store="owner",ya.key="owner";class va{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}va.store="mutationQueues",va.keyPath="userId";class wa{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}wa.store="mutations",wa.keyPath="batchId",wa.userMutationsIndex="userMutationsIndex",wa.userMutationsKeyPath=["userId","batchId"];class _a{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,da(t)]}static key(e,t,n){return[e,da(t),n]}}_a.store="documentMutations",_a.PLACEHOLDER=new _a;class ba{constructor(e,t){this.path=e,this.readTime=t}}class Ia{constructor(e,t){this.path=e,this.version=t}}class Ta{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}Ta.store="remoteDocuments",Ta.readTimeIndex="readTimeIndex",Ta.readTimeIndexPath="readTime",Ta.collectionReadTimeIndex="collectionReadTimeIndex",Ta.collectionReadTimeIndexPath=["parentPath","readTime"];class Sa{constructor(e){this.byteSize=e}}Sa.store="remoteDocumentGlobal",Sa.key="remoteDocumentGlobalKey";class Ea{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}Ea.store="targets",Ea.keyPath="targetId",Ea.queryTargetsIndexName="queryTargetsIndex",Ea.queryTargetsKeyPath=["canonicalId","targetId"];class Ca{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}Ca.store="targetDocuments",Ca.keyPath=["targetId","path"],Ca.documentTargetsIndex="documentTargetsIndex",Ca.documentTargetsKeyPath=["path","targetId"];class ka{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}ka.key="targetGlobalKey",ka.store="targetGlobal";class Aa{constructor(e,t){this.collectionId=e,this.parent=t}}Aa.store="collectionParents",Aa.keyPath=["collectionId","parent"];class xa{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}xa.store="clientMetadata",xa.keyPath="clientId";class Na{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}Na.store="bundles",Na.keyPath="bundleId";class Ra{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}Ra.store="namedQueries",Ra.keyPath="name";const Oa=[va.store,wa.store,_a.store,Ta.store,Ea.store,ya.store,ka.store,Ca.store,xa.store,Sa.store,Aa.store,Na.store,Ra.store],Da="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class La{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Vr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new La((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof La?t:La.resolve(t)}catch(e){return La.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):La.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):La.reject(t)}static resolve(e){return new La((t,n)=>{t(e)})}static reject(e){return new La((t,n)=>{n(e)})}static waitFor(e){return new La((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=La.resolve(!1);for(const n of e)t=t.next(e=>e?La.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}class Fa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Tt=new Hr,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{t.error?this.Tt.reject(new Va(e,t.error)):this.Tt.resolve()},this.transaction.onerror=t=>{const n=Ha(t.target.error);this.Tt.reject(new Va(e,n))}}static open(e,t,n,r){try{return new Fa(t,e.transaction(r,n))}catch(e){throw new Va(t,e)}}get It(){return this.Tt.promise}abort(e){e&&this.Tt.reject(e),this.aborted||(Lr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new qa(t)}}class Ma{constructor(e,t,n){this.name=e,this.version=t,this.At=n,12.2===Ma.Rt((0,I.z$)())&&Fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Lr("SimpleDb","Removing database:",e),za(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if("undefined"==typeof indexedDB)return!1;if(Ma.Pt())return!0;const e=(0,I.z$)(),t=Ma.Rt(e),n=0<t&&t<10,r=Ma.vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Dt(e){var t=this;return(0,v.Z)(function*(){return t.db||(Lr("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const i=indexedDB.open(t.name,t.version);i.onsuccess=e=>{n(e.target.result)},i.onblocked=()=>{r(new Va(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new Br(zr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new Br(zr.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new Va(e,n))},i.onupgradeneeded=e=>{Lr("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.At.Ct(e.target.result,i.transaction,e.oldVersion,t.version).next(()=>{Lr("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=e=>t.Nt(e)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var i=this;return(0,v.Z)(function*(){const s="readonly"===t;let o=0;for(;;){++o;try{i.db=yield i.Dt(e);const t=Fa.open(i.db,e,s?"readonly":"readwrite",n),o=r(t).catch(e=>(t.abort(e),La.reject(e))).toPromise();return o.catch(()=>{}),yield t.It,o}catch(e){const n="FirebaseError"!==e.name&&o<3;if(Lr("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),i.close(),!n)return Promise.reject(e)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ua{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return za(this.kt.delete())}}class Va extends Br{constructor(e,t){super(zr.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ja(e){return"IndexedDbTransactionError"===e.name}class qa{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Lr("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Lr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),za(n)}add(e){return Lr("SimpleDb","ADD",this.store.name,e,e),za(this.store.add(e))}get(e){return za(this.store.get(e)).next(t=>(void 0===t&&(t=null),Lr("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Lr("SimpleDb","DELETE",this.store.name,e),za(this.store.delete(e))}count(){return Lr("SimpleDb","COUNT",this.store.name),za(this.store.count())}Lt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,(e,t)=>{r.push(t)}).next(()=>r)}Ut(e,t){Lr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.qt=!1;const r=this.cursor(n);return this.Bt(r,(e,t,n)=>n.delete())}Kt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Bt(r,t)}jt(e){const t=this.cursor({});return new La((n,r)=>{t.onerror=e=>{const t=Ha(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Bt(e,t){const n=[];return new La((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Ua(i),o=t(i.primaryKey,i.value,s);if(o instanceof La){const e=o.catch(e=>(s.done(),La.reject(e)));n.push(e)}s.isDone?r():null===s.Ft?i.continue():i.continue(s.Ft)}}).next(()=>La.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function za(e){return new La((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=Ha(e.target.error);n(t)}})}let Ba=!1;function Ha(e){const t=Ma.Rt((0,I.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Br("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ba||(Ba=!0,setTimeout(()=>{throw e},0)),e}}return e}class $a extends Pa{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Ga(e,t){const n=qr(e);return Ma.St(n.Qt,t)}class Za{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&$s(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Gs(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Gs(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(ii.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bo())}isEqual(e){return this.batchId===e.batchId&&ti(this.mutations,e.mutations,(e,t)=>Ks(e,t))&&ti(this.baseMutations,e.baseMutations,(e,t)=>Ks(e,t))}}class Ka{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){jr(e.mutations.length===n.length);let r=wo();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ka(e,t,n,r)}}class Wa{constructor(e,t,n,r,i=ii.min(),s=ii.min(),o=fi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Wa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Wa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Qa{constructor(e){this.Wt=e}}function Ya(e,t){if(t.document)return Wo(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=Si.fromSegments(t.noDocument.path),n=nu(t.noDocument.readTime),r=qi.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=Si.fromSegments(t.unknownDocument.path),n=nu(t.unknownDocument.version);return qi.newUnknownDocument(e,n)}return Vr()}function Ja(e,t,n){const r=Xa(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:zo(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Fo(e,t.version.toTimestamp())}}(e.Wt,t);return new Ta(null,null,n,t.hasCommittedMutations,r,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=tu(t.version),s=t.hasCommittedMutations;return new Ta(null,new ba(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=tu(t.version);return new Ta(new Ia(e,n),null,null,!0,r,i)}return Vr()}function Xa(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function eu(e){const t=new ri(e[0],e[1]);return ii.fromTimestamp(t)}function tu(e){const t=e.toTimestamp();return new ma(t.seconds,t.nanoseconds)}function nu(e){const t=new ri(e.seconds,e.nanoseconds);return ii.fromTimestamp(t)}function ru(e,t){const n=(t.baseMutations||[]).map(t=>Yo(e.Wt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const r=t.mutations.map(t=>Yo(e.Wt,t)),i=ri.fromMillis(t.localWriteTimeMs);return new Za(t.batchId,i,n,r)}function iu(e){const t=nu(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?nu(e.lastLimboFreeSnapshotVersion):ii.min();let r;var i;return void 0!==e.query.documents?(jr(1===(i=e.query).documents.length),r=ys(ls($o(i.documents[0])))):r=function(e){return ys(ea(e))}(e.query),new Wa(r,e.targetId,0,e.lastListenSequenceNumber,t,n,fi.fromBase64String(e.resumeToken))}function su(e,t){const n=tu(t.snapshotVersion),r=tu(t.lastLimboFreeSnapshotVersion);let i;i=Gi(t.target)?Jo(e.Wt,t.target):Xo(e.Wt,t.target);const s=t.resumeToken.toBase64();return new Ea(t.targetId,Hi(t.target),n,s,t.sequenceNumber,r,i)}function ou(e){const t=ea({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?vs(t,t.limit,"L"):t}class au{getBundleMetadata(e,t){return uu(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:nu(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return uu(e).put({bundleId:(n=t).id,createTime:tu(Vo(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return cu(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:ou(t.bundledQuery),readTime:nu(t.readTime)};var t})}saveNamedQuery(e,t){return cu(e).put(function(e){return{name:e.name,readTime:tu(Vo(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function uu(e){return Ga(e,Na.store)}function cu(e){return Ga(e,Ra.store)}class lu{constructor(){this.Gt=new hu}addToCollectionParentIndex(e,t){return this.Gt.add(t),La.resolve()}getCollectionParents(e,t){return La.resolve(this.Gt.getEntries(t))}}class hu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ho(ci.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ho(ci.comparator)).toArray()}}class du{constructor(){this.zt=new hu}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const i={collectionId:n,parent:da(r)};return fu(e).put(i)}return La.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[ni(t),""],!1,!0);return fu(e).Lt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(ga(r.parent))}return n})}}function fu(e){return Ga(e,Aa.store)}const pu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gu{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new gu(e,gu.DEFAULT_COLLECTION_PERCENTILE,gu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function mu(e,t,n){const r=e.store(wa.store),i=e.store(_a.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Kt({range:o},(e,t,n)=>(a++,n.delete()));s.push(u.next(()=>{jr(1===a)}));const c=[];for(const l of n.mutations){const e=_a.key(t,l.key.path,n.batchId);s.push(i.delete(e)),c.push(l.key)}return La.waitFor(s).next(()=>c)}function yu(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Vr();t=e.noDocument}return JSON.stringify(t).length}gu.DEFAULT_COLLECTION_PERCENTILE=10,gu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gu.DEFAULT=new gu(41943040,gu.DEFAULT_COLLECTION_PERCENTILE,gu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gu.DISABLED=new gu(-1,0,0);class vu{constructor(e,t,n,r){this.userId=e,this.N=t,this.Ht=n,this.referenceDelegate=r,this.Jt={}}static Yt(e,t,n,r){jr(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new vu(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _u(e).Kt({index:wa.userMutationsIndex,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=bu(e),s=_u(e);return s.add({}).next(o=>{jr("number"==typeof o);const a=new Za(o,t,n,r),u=function(e,t,n){const r=n.baseMutations.map(t=>Qo(e.Wt,t)),i=n.mutations.map(t=>Qo(e.Wt,t));return new wa(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.N,this.userId,a),c=[];let l=new ho((e,t)=>ei(e.canonicalString(),t.canonicalString()));for(const e of r){const t=_a.key(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),c.push(s.put(u)),c.push(i.put(t,_a.PLACEHOLDER))}return l.forEach(t=>{c.push(this.Ht.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Jt[o]=a.keys()}),La.waitFor(c).next(()=>a)})}lookupMutationBatch(e,t){return _u(e).get(t).next(e=>e?(jr(e.userId===this.userId),ru(this.N,e)):null)}Xt(e,t){return this.Jt[t]?La.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Jt[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return _u(e).Kt({index:wa.userMutationsIndex,range:r},(e,t,r)=>{t.userId===this.userId&&(jr(t.batchId>=n),i=ru(this.N,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return _u(e).Kt({index:wa.userMutationsIndex,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _u(e).Lt(wa.userMutationsIndex,t).next(e=>e.map(e=>ru(this.N,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=_a.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return bu(e).Kt({range:r},(n,r,s)=>{const[o,a,u]=n,c=ga(a);if(o===this.userId&&t.path.isEqual(c))return _u(e).get(u).next(e=>{if(!e)throw Vr();jr(e.userId===this.userId),i.push(ru(this.N,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ho(ei);const r=[];return t.forEach(t=>{const i=_a.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=bu(e).Kt({range:s},(e,r,i)=>{const[s,o,a]=e,u=ga(o);s===this.userId&&t.path.isEqual(u)?n=n.add(a):i.done()});r.push(o)}),La.waitFor(r).next(()=>this.Zt(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=_a.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new ho(ei);return bu(e).Kt({range:s},(e,t,i)=>{const[s,a,u]=e,c=ga(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(u)):i.done()}).next(()=>this.Zt(e,o))}Zt(e,t){const n=[],r=[];return t.forEach(t=>{r.push(_u(e).get(t).next(e=>{if(null===e)throw Vr();jr(e.userId===this.userId),n.push(ru(this.N,e))}))}),La.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return mu(e.Qt,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),La.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return La.resolve();const n=IDBKeyRange.lowerBound(_a.prefixForUser(this.userId)),r=[];return bu(e).Kt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=ga(e[1]);r.push(t)}else n.done()}).next(()=>{jr(0===r.length)})})}containsKey(e,t){return wu(e,this.userId,t)}ee(e){return Iu(e).get(this.userId).next(e=>e||new va(this.userId,-1,""))}}function wu(e,t,n){const r=_a.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return bu(e).Kt({range:s,qt:!0},(e,n,r)=>{const[s,a,u]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function _u(e){return Ga(e,wa.store)}function bu(e){return Ga(e,_a.store)}function Iu(e){return Ga(e,va.store)}class Tu{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new Tu(0)}static ie(){return new Tu(-1)}}class Su{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const n=new Tu(t.highestTargetId);return t.highestTargetId=n.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(e=>ii.fromTimestamp(new ri(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.re(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.oe(e,r)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.re(e).next(n=>(n.targetCount+=1,this.ce(t,n),this.oe(e,n))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Eu(e).delete(t.targetId)).next(()=>this.re(e)).next(t=>(jr(t.targetCount>0),t.targetCount-=1,this.oe(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return Eu(e).Kt((s,o)=>{const a=iu(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>La.waitFor(i)).next(()=>r)}forEachTarget(e,t){return Eu(e).Kt((e,n)=>{const r=iu(n);t(r)})}re(e){return Cu(e).get(ka.key).next(e=>(jr(null!==e),e))}oe(e,t){return Cu(e).put(ka.key,t)}ae(e,t){return Eu(e).put(su(this.N,t))}ce(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.re(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Hi(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Eu(e).Kt({range:r,index:Ea.queryTargetsIndexName},(e,n,r)=>{const s=iu(n);$i(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=ku(e);return t.forEach(t=>{const s=da(t.path);r.push(i.put(new Ca(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))}),La.waitFor(r)}removeMatchingKeys(e,t,n){const r=ku(e);return La.forEach(t,t=>{const i=da(t.path);return La.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=ku(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ku(e);let i=bo();return r.Kt({range:n,qt:!0},(e,t,n)=>{const r=ga(e[1]),s=new Si(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=da(t.path),r=IDBKeyRange.bound([n],[ni(n)],!1,!0);let i=0;return ku(e).Kt({index:Ca.documentTargetsIndex,qt:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}Et(e,t){return Eu(e).get(t).next(e=>e?iu(e):null)}}function Eu(e){return Ga(e,Ea.store)}function Cu(e){return Ga(e,ka.store)}function ku(e){return Ga(e,Ca.store)}function Au(e){return xu.apply(this,arguments)}function xu(){return(xu=(0,v.Z)(function*(e){if(e.code!==zr.FAILED_PRECONDITION||e.message!==Da)throw e;Lr("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Nu([e,t],[n,r]){const i=ei(e,n);return 0===i?ei(t,r):i}class Ru{constructor(e){this.ue=e,this.buffer=new ho(Nu),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Nu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ou{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const n=this.de?3e5:6e4;Lr("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,v.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(e){ja(e)?Lr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield Au(e)}yield t._e(e)}))}}class Du{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return La.resolve(Yr.T);const n=new Ru(t);return this.me.forEachTarget(e,e=>n.fe(e.sequenceNumber)).next(()=>this.me.ye(e,e=>n.fe(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.me.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Lr("LruGarbageCollector","Garbage collection skipped; disabled"),La.resolve(pu)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Lr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pu):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let n,r,i,s,o,a,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Lr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),Pr()<=b.in.DEBUG&&Lr("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(u-a)+"ms\n"+`Total Duration: ${u-c}ms`),La.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class Pu{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Du(e,t)}(this,t)}ge(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Ee(e){let t=0;return this.ye(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Te(e,(e,n)=>t(n))}addReference(e,t,n){return Lu(e,n)}removeReference(e,t,n){return Lu(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Lu(e,t)}Ie(e,t){return function(e,t){let n=!1;return Iu(e).jt(r=>wu(e,r,t).next(e=>(e&&(n=!0),La.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Te(e,(s,o)=>{if(o<=t){const t=this.Ie(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s),ku(e).delete([0,da(s.path)])))});r.push(t)}}).next(()=>La.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Lu(e,t)}Te(e,t){const n=ku(e);let r,i=Yr.T;return n.Kt({index:Ca.documentTargetsIndex},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Yr.T&&t(new Si(ga(r)),i),i=o,r=s):i=Yr.T}).next(()=>{i!==Yr.T&&t(new Si(ga(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lu(e,t){return ku(e).put(function(e,t){return new Ca(0,da(e.path),t)}(t,e.currentSequenceNumber))}class Fu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){oi(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ai(this.inner)}}class Mu{constructor(){this.changes=new Fu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:ii.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:qi.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?La.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Uu{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,n){return qu(e).put(zu(t),n)}removeEntry(e,t){const n=qu(e),r=zu(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Ae(e,n)))}getEntry(e,t){return qu(e).get(zu(t)).next(e=>this.Re(t,e))}be(e,t){return qu(e).get(zu(t)).next(e=>({document:this.Re(t,e),size:yu(e)}))}getEntries(e,t){let n=go();return this.Pe(e,t,(e,t)=>{const r=this.Re(e,t);n=n.insert(e,r)}).next(()=>n)}ve(e,t){let n=go(),r=new uo(Si.comparator);return this.Pe(e,t,(e,t)=>{const i=this.Re(e,t);n=n.insert(e,i),r=r.insert(e,yu(t))}).next(()=>({documents:n,Ve:r}))}Pe(e,t,n){if(t.isEmpty())return La.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return qu(e).Kt({range:r},(e,t,r)=>{const o=Si.fromSegments(e);for(;s&&Si.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Mt(s.path.toArray()):r.done()}).next(()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n){let r=go();const i=t.path.length+1,s={};if(n.isEqual(ii.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=Xa(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=Ta.collectionReadTimeIndex}return qu(e).Kt(s,(e,n,s)=>{if(e.length!==i)return;const o=Ya(this.N,n);t.path.isPrefixOf(o.key.path)?Is(t,o)&&(r=r.insert(o.key,o)):s.done()}).next(()=>r)}newChangeBuffer(e){return new Vu(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return ju(e).get(Sa.key).next(e=>(jr(!!e),e))}Ae(e,t){return ju(e).put(Sa.key,t)}Re(e,t){if(t){const e=Ya(this.N,t);if(!e.isNoDocument()||!e.version.isEqual(ii.min()))return e}return qi.newInvalidDocument(e)}}class Vu extends Mu{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new Fu(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new ho((e,t)=>ei(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.De.get(i);if(s.document.isValidDocument()){const a=Ja(this.Se.N,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const u=yu(a);n+=u-o,t.push(this.Se.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=Ja(this.Se.N,qi.newNoDocument(i,ii.min()),this.getReadTime(i));t.push(this.Se.addEntry(e,i,n))}else t.push(this.Se.removeEntry(e,i))}),r.forEach(n=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,n))}),t.push(this.Se.updateMetadata(e,n)),La.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(e=>(this.De.set(t,e.size),e.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:e,Ve:t})=>(t.forEach((e,t)=>{this.De.set(e,t)}),e))}}function ju(e){return Ga(e,Sa.store)}function qu(e){return Ga(e,Ta.store)}function zu(e){return e.path.toArray()}class Bu{constructor(e){this.N=e}Ct(e,t,n,r){jr(n<r&&n>=0&&r<=11);const i=new Fa("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(ya.store)}(e),function(e){e.createObjectStore(va.store,{keyPath:va.keyPath}),e.createObjectStore(wa.store,{keyPath:wa.keyPath,autoIncrement:!0}).createIndex(wa.userMutationsIndex,wa.userMutationsKeyPath,{unique:!0}),e.createObjectStore(_a.store)}(e),Hu(e),function(e){e.createObjectStore(Ta.store)}(e));let s=La.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Ca.store),e.deleteObjectStore(Ea.store),e.deleteObjectStore(ka.store)}(e),Hu(e)),s=s.next(()=>function(e){const t=e.store(ka.store),n=new ka(0,0,ii.min().toTimestamp(),0);return t.put(ka.key,n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store(wa.store).Lt().next(n=>{e.deleteObjectStore(wa.store),e.createObjectStore(wa.store,{keyPath:wa.keyPath,autoIncrement:!0}).createIndex(wa.userMutationsIndex,wa.userMutationsKeyPath,{unique:!0});const r=t.store(wa.store),i=n.map(e=>r.put(e));return La.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore(xa.store,{keyPath:xa.keyPath})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Ce(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore(Sa.store)}(e),this.Ne(i)))),n<7&&r>=7&&(s=s.next(()=>this.xe(i))),n<8&&r>=8&&(s=s.next(()=>this.ke(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(Ta.store);t.createIndex(Ta.readTimeIndex,Ta.readTimeIndexPath,{unique:!1}),t.createIndex(Ta.collectionReadTimeIndex,Ta.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(s=s.next(()=>this.$e(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore(Na.store,{keyPath:Na.keyPath})}(e),function(e){e.createObjectStore(Ra.store,{keyPath:Ra.keyPath})}(e)})),s}Ne(e){let t=0;return e.store(Ta.store).Kt((e,n)=>{t+=yu(n)}).next(()=>{const n=new Sa(t);return e.store(Sa.store).put(Sa.key,n)})}Ce(e){const t=e.store(va.store),n=e.store(wa.store);return t.Lt().next(t=>La.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Lt(wa.userMutationsIndex,r).next(n=>La.forEach(n,n=>{jr(n.userId===t.userId);const r=ru(this.N,n);return mu(e,t.userId,r).next(()=>{})}))}))}xe(e){const t=e.store(Ca.store),n=e.store(Ta.store);return e.store(ka.store).get(ka.key).next(e=>{const r=[];return n.Kt((n,i)=>{const s=new ci(n),o=function(e){return[0,da(e)]}(s);r.push(t.get(o).next(n=>n?La.resolve():(n=>t.put(new Ca(0,da(n),e.highestListenSequenceNumber)))(s)))}).next(()=>La.waitFor(r))})}ke(e,t){e.createObjectStore(Aa.store,{keyPath:Aa.keyPath});const n=t.store(Aa.store),r=new hu,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:da(r)})}};return t.store(Ta.store).Kt({qt:!0},(e,t)=>{const n=new ci(e);return i(n.popLast())}).next(()=>t.store(_a.store).Kt({qt:!0},([e,t,n],r)=>{const s=ga(t);return i(s.popLast())}))}$e(e){const t=e.store(Ea.store);return t.Kt((e,n)=>{const r=iu(n),i=su(this.N,r);return t.put(i)})}}function Hu(e){e.createObjectStore(Ca.store,{keyPath:Ca.keyPath}).createIndex(Ca.documentTargetsIndex,Ca.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Ea.store,{keyPath:Ea.keyPath}).createIndex(Ea.queryTargetsIndexName,Ea.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(ka.store)}const $u="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gu{constructor(e,t,n,r,i,s,o,a,u,c){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Fe=u,this.Me=c,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=e=>Promise.resolve(),!Gu.bt())throw new Br(zr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pu(this,r),this.We=t+"main",this.N=new Qa(a),this.Ge=new Ma(this.We,11,new Bu(this.N)),this.ze=new Su(this.referenceDelegate,this.N),this.Ht=new du,this.He=function(e,t){return new Uu(e,t)}(this.N,this.Ht),this.Je=new au,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===c&&Fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Br(zr.FAILED_PRECONDITION,$u);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new Yr(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var n=(0,v.Z)(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,v.Z)(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,v.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ku(e).put(new xa(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(ja(e))return Lr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Lr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return Zu(e).get(ya.key).next(e=>La.resolve(this.cn(e)))}un(e){return Ku(e).delete(this.clientId)}hn(){var e=this;return(0,v.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Ga(t,xa.store);return n.Lt().next(t=>{const r=e.fn(t,18e5),i=t.filter(e=>-1===r.indexOf(e));return La.forEach(i,e=>n.delete(e.clientId)).next(()=>i)})}).catch(()=>[]);if(e.Ye)for(const n of t)e.Ye.removeItem(e.dn(n.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?La.resolve(!0):Zu(e).get(ya.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new Br(zr.FAILED_PRECONDITION,$u);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ku(e).Lt().next(e=>void 0===this.fn(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Lr("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return(0,v.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[ya.store,xa.store],t=>{const n=new $a(t,Yr.T);return e.on(n).next(()=>e.un(n))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(e=>this.ln(e.updateTimeMs,t)&&!this.wn(e.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Ku(e).Lt().next(e=>this.fn(e,18e5).map(e=>e.clientId)))}get started(){return this.Be}getMutationQueue(e){return vu.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,n){let r;return Lr("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",Oa,i=>(r=new $a(i,this.Le?this.Le.next():Yr.T),"readwrite-primary"===t?this.sn(r).next(e=>!!e||this.rn(r)).next(t=>{if(!t)throw Fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Br(zr.FAILED_PRECONDITION,Da);return n(r)}).next(e=>this.an(r).next(()=>e)):this.En(r).next(()=>n(r)))).then(e=>(r.raiseOnCommittedEvent(),e))}En(e){return Zu(e).get(ya.key).next(e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)&&!this.cn(e)&&!(this.Me||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Br(zr.FAILED_PRECONDITION,$u)})}an(e){const t=new ya(this.clientId,this.allowTabSynchronization,Date.now());return Zu(e).put(ya.key,t)}static bt(){return Ma.bt()}on(e){const t=Zu(e);return t.get(ya.key).next(e=>this.cn(e)?(Lr("IndexedDbPersistence","Releasing primary lease."),t.delete(ya.key)):La.resolve())}ln(e,t){const n=Date.now();return!(e<n-t||e>n&&(Fr(`Detected an update time that is in the future: ${e} > ${n}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,I.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return Lr("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Fr("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){Fr("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zu(e){return Ga(e,ya.store)}function Ku(e){return Ga(e,xa.store)}function Wu(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Qu{constructor(e,t){this.progress=e,this.Tn=t}}class Yu{constructor(e,t,n){this.He=e,this.In=t,this.Ht=n}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Rn(e,t,n))}Rn(e,t,n){return this.He.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}bn(e,t){e.forEach((e,n)=>{for(const r of t)r.applyToLocalView(n)})}Pn(e,t){return this.He.getEntries(e,t).next(t=>this.vn(e,t).next(()=>t))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.bn(t,e))}getDocumentsMatchingQuery(e,t,n){return function(e){return Si.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Vn(e,t.path):gs(t)?this.Sn(e,t,n):this.Dn(e,t,n)}Vn(e,t){return this.An(e,new Si(t)).next(e=>{let t=yo();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Sn(e,t,n){const r=t.collectionGroup;let i=yo();return this.Ht.getCollectionParents(e,r).next(s=>La.forEach(s,s=>{const o=function(e,t){return new us(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.Dn(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}Dn(e,t,n){let r,i;return this.He.getDocumentsMatchingQuery(e,t,n).next(n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(t=>(i=t,this.Cn(e,i,r).next(e=>{r=e;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=qi.newInvalidDocument(n),r=r.insert(n,i)),Gs(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((e,n)=>{Is(t,n)||(r=r.remove(e))}),r))}Cn(e,t,n){let r=bo();for(const s of t)for(const e of s.mutations)e instanceof Ys&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.He.getEntries(e,r).next(e=>(e.forEach((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))}),i))}}class Ju{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Nn=n,this.xn=r}static kn(e,t){let n=bo(),r=bo();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ju(e,t.fromCache,n,r)}}class Xu{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(ii.min())?this.Fn(e,t):this.On.Pn(e,r).next(i=>{const s=this.Mn(t,i);return(hs(t)||ds(t))&&this.Ln(t.limitType,s,r,n)?this.Fn(e,t):(Pr()<=b.in.DEBUG&&Lr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),bs(t)),this.On.getDocumentsMatchingQuery(e,t,n).next(e=>(s.forEach(t=>{e=e.insert(t.key,t)}),e)))})}Mn(e,t){let n=new ho(Ts(e));return t.forEach((t,r)=>{Is(e,r)&&(n=n.add(r))}),n}Ln(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Fn(e,t){return Pr()<=b.in.DEBUG&&Lr("QueryEngine","Using full collection scan to execute query:",bs(t)),this.On.getDocumentsMatchingQuery(e,t,ii.min())}}class ec{constructor(e,t,n,r){this.persistence=e,this.Bn=t,this.N=r,this.Un=new uo(ei),this.qn=new Fu(e=>Hi(e),$i),this.Kn=ii.min(),this.In=e.getMutationQueue(n),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new Yu(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function tc(e,t,n,r){return new ec(e,t,n,r)}function nc(e,t){return rc.apply(this,arguments)}function rc(){return(rc=(0,v.Z)(function*(e,t){const n=qr(e);let r=n.In,i=n.Qn;const s=yield n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.In.getAllMutationBatches(e).next(o=>(s=o,r=n.persistence.getMutationQueue(t),i=new Yu(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e))).next(t=>{const n=[],r=[];let o=bo();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.Pn(e,o).next(e=>({Wn:e,removedBatchIds:n,addedBatchIds:r}))})});return n.In=r,n.Qn=i,n.Bn.$n(n.Qn),s})).apply(this,arguments)}function ic(e,t){const n=qr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=La.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);jr(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),o.next(()=>e.In.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}function sc(e){const t=qr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.ze.getLastRemoteSnapshotVersion(e))}function oc(e,t){const n=qr(e),r=t.snapshotVersion;let i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;const o=[];t.targetChanges.forEach((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,s).next(()=>n.ze.addMatchingKeys(e,t.addedDocuments,s)));const u=t.resumeToken;if(u.approximateByteSize()>0){const c=a.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,c),function(e,t,n){return jr(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,t)&&o.push(n.ze.updateTargetData(e,c))}});let a=go();if(t.documentUpdates.forEach((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(ac(e,s,t.documentUpdates,r,void 0).next(e=>{a=e})),!r.isEqual(ii.min())){const t=n.ze.getLastRemoteSnapshotVersion(e).next(t=>n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return La.waitFor(o).next(()=>s.apply(e)).next(()=>n.Qn.vn(e,a)).next(()=>a)}).then(e=>(n.Un=i,e))}function ac(e,t,n,r,i){let s=bo();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=go();return n.forEach((n,o)=>{const a=e.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(ii.min())?(t.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,u),s=s.insert(n,o)):Lr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function uc(e,t){const n=qr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)))}function cc(e,t){const n=qr(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.ze.getTargetData(e,t).next(i=>i?(r=i,La.resolve(r)):n.ze.allocateTargetId(e).next(i=>(r=new Wa(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e})}function lc(e,t,n){return hc.apply(this,arguments)}function hc(){return(hc=(0,v.Z)(function*(e,t,n){const r=qr(e),i=r.Un.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ja(e))throw e;Lr("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Un=r.Un.remove(t),r.qn.delete(i.target)})).apply(this,arguments)}function dc(e,t,n){const r=qr(e);let i=ii.min(),s=bo();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=qr(e),i=r.qn.get(n);return void 0!==i?La.resolve(r.Un.get(i)):r.ze.getTargetData(t,n)}(r,e,ys(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Bn.getDocumentsMatchingQuery(e,t,n?i:ii.min(),n?s:bo())).next(e=>({documents:e,Gn:s})))}function fc(e,t){const n=qr(e),r=qr(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Et(e,t).next(e=>e?e.target:null))}function pc(e){const t=qr(e);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(e,t,n){const r=qr(e);let i=go(),s=Xa(n);const o=qu(t),a=IDBKeyRange.lowerBound(s,!0);return o.Kt({index:Ta.readTimeIndex,range:a},(e,t)=>{const n=Ya(r.N,t);i=i.insert(n.key,n),s=t.readTime}).next(()=>({Tn:i,readTime:eu(s)}))}(t.jn,e,t.Kn)).then(({Tn:e,readTime:n})=>(t.Kn=n,e))}function gc(){return(gc=(0,v.Z)(function*(e){const t=qr(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(e){const t=qu(e);let n=ii.min();return t.Kt({index:Ta.readTimeIndex,reverse:!0},(e,t,r)=>{t.readTime&&(n=eu(t.readTime)),r.done()}).next(()=>n)}(e)).then(e=>{t.Kn=e})})).apply(this,arguments)}function mc(){return(mc=(0,v.Z)(function*(e,t,n,r){const i=qr(e);let s=bo(),o=go(),a=wo();for(const l of n){const e=t.zn(l.metadata.name);l.document&&(s=s.add(e)),o=o.insert(e,t.Hn(l)),a=a.insert(e,t.Jn(l.metadata.readTime))}const u=i.jn.newChangeBuffer({trackRemovals:!0}),c=yield cc(i,function(e){return ys(ls(ci.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>ac(e,u,o,ii.min(),a).next(t=>(u.apply(e),t)).next(t=>i.ze.removeMatchingKeysForTargetId(e,c.targetId).next(()=>i.ze.addMatchingKeys(e,s,c.targetId)).next(()=>i.Qn.vn(e,t)).next(()=>t)))})).apply(this,arguments)}function yc(e,t){return vc.apply(this,arguments)}function vc(){return(vc=(0,v.Z)(function*(e,t,n=bo()){const r=yield cc(e,ys(ou(t.bundledQuery))),i=qr(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=Vo(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Je.saveNamedQuery(e,t);const o=r.withResumeToken(fi.EMPTY_BYTE_STRING,s);return i.Un=i.Un.insert(o.targetId,o),i.ze.updateTargetData(e,o).next(()=>i.ze.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.ze.addMatchingKeys(e,n,r.targetId)).next(()=>i.Je.saveNamedQuery(e,t))})})).apply(this,arguments)}class wc{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return La.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:Vo(n.createTime)}),La.resolve()}getNamedQuery(e,t){return La.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:ou(e.bundledQuery),readTime:Vo(e.readTime)}}(t)),La.resolve()}}class _c{constructor(){this.Zn=new ho(bc.ts),this.es=new ho(bc.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new bc(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.rs(new bc(e,t))}os(e,t){e.forEach(e=>this.removeReference(e,t))}cs(e){const t=new Si(new ci([])),n=new bc(t,e),r=new bc(t,e+1),i=[];return this.es.forEachInRange([n,r],e=>{this.rs(e),i.push(e.key)}),i}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Si(new ci([])),n=new bc(t,e),r=new bc(t,e+1);let i=bo();return this.es.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new bc(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class bc{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Si.comparator(e.key,t.key)||ei(e.ls,t.ls)}static ns(e,t){return ei(e.ls,t.ls)||Si.comparator(e.key,t.key)}}class Ic{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new ho(bc.ts)}checkEmpty(e){return La.resolve(0===this.In.length)}addMutationBatch(e,t,n,r){const i=this.fs;this.fs++;const s=new Za(i,t,n,r);this.In.push(s);for(const o of r)this.ds=this.ds.add(new bc(o.key,i)),this.Ht.addToCollectionParentIndex(e,o.key.path.popLast());return La.resolve(s)}lookupMutationBatch(e,t){return La.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const n=this._s(t+1),r=n<0?0:n;return La.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return La.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return La.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new bc(t,0),r=new bc(t,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],e=>{const t=this.ws(e.ls);i.push(t)}),La.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ho(ei);return t.forEach(e=>{const t=new bc(e,0),r=new bc(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,r],e=>{n=n.add(e.ls)})}),La.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Si.isDocumentKey(i)||(i=i.child(""));const s=new bc(new Si(i),0);let o=new ho(ei);return this.ds.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)},s),La.resolve(this.gs(o))}gs(e){const t=[];return e.forEach(e=>{const n=this.ws(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){jr(0===this.ys(t.batchId,"removed")),this.In.shift();let n=this.ds;return La.forEach(t.mutations,r=>{const i=new bc(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=n})}te(e){}containsKey(e,t){const n=new bc(t,0),r=this.ds.firstAfterOrEqual(n);return La.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return La.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class Tc{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new uo(Si.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return La.resolve(n?n.document.clone():qi.newInvalidDocument(t))}getEntries(e,t){let n=go();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():qi.newInvalidDocument(e))}),La.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=go();const i=new Si(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||Is(t,i)&&(r=r.insert(i.key,i.clone()))}return La.resolve(r)}Es(e,t){return La.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Sc(this)}getSize(e){return La.resolve(this.size)}}class Sc extends Mu{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?t.push(this.Se.addEntry(e,r.document,this.getReadTime(n))):this.Se.removeEntry(n)}),La.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class Ec{constructor(e){this.persistence=e,this.Ts=new Fu(e=>Hi(e),$i),this.lastRemoteSnapshotVersion=ii.min(),this.highestTargetId=0,this.Is=0,this.As=new _c,this.targetCount=0,this.Rs=Tu.se()}forEachTarget(e,t){return this.Ts.forEach((e,n)=>t(n)),La.resolve()}getLastRemoteSnapshotVersion(e){return La.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return La.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),La.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),La.resolve()}ae(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Tu(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,La.resolve()}updateTargetData(e,t){return this.ae(t),La.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,La.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Ts.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Ts.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),La.waitFor(i).next(()=>r)}getTargetCount(e){return La.resolve(this.targetCount)}getTargetData(e,t){const n=this.Ts.get(t)||null;return La.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),La.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),La.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),La.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return La.resolve(n)}containsKey(e,t){return La.resolve(this.As.containsKey(t))}}class Cc{constructor(e,t){this.bs={},this.Le=new Yr(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new Ec(this),this.Ht=new lu,this.He=function(e,t){return new Tc(e,t)}(this.Ht,e=>this.referenceDelegate.Ps(e)),this.N=new Qa(t),this.Je=new wc(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new Ic(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,n){Lr("MemoryPersistence","Starting transaction:",e);const r=new kc(this.Le.next());return this.referenceDelegate.vs(),n(r).next(e=>this.referenceDelegate.Vs(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ss(e,t){return La.or(Object.values(this.bs).map(n=>()=>n.containsKey(e,t)))}}class kc extends Pa{constructor(e){super(),this.currentSequenceNumber=e}}class Ac{constructor(e){this.persistence=e,this.Ds=new _c,this.Cs=null}static Ns(e){return new Ac(e)}get xs(){if(this.Cs)return this.Cs;throw Vr()}addReference(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),La.resolve()}removeReference(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),La.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),La.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(e=>this.xs.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.xs.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return La.forEach(this.xs,n=>{const r=Si.fromPath(n);return this.ks(e,r).next(e=>{e||t.removeEntry(r)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return La.or([()=>La.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function xc(e,t){return`firestore_clients_${e}_${t}`}function Nc(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Rc(e,t){return`firestore_targets_${e}_${t}`}class Oc{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static $s(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Br(r.error.code,r.error.message))),s?new Oc(e,t,r.state,i):(Fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dc{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static $s(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Br(n.error.code,n.error.message))),i?new Dc(e,n.state,r):(Fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pc{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=To();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Ti(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Pc(e,i):(Fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Lc{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Lc(t.clientId,t.onlineState):(Fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Fc{constructor(){this.activeTargetIds=To()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mc{constructor(e,t,n,r,i){this.window=e,this.Oe=t,this.persistenceKey=n,this.Ls=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new uo(ei),this.started=!1,this.Ks=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.js=xc(this.persistenceKey,this.Ls),this.Qs=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new Fc),this.Ws=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Hs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Js=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,v.Z)(function*(){const t=yield e.syncEngine.pn();for(const r of t){if(r===e.Ls)continue;const t=e.getItem(xc(e.persistenceKey,r));if(t){const n=Pc.$s(r,t);n&&(e.qs=e.qs.insert(n.clientId,n))}}e.Ys();const n=e.storage.getItem(e.Hs);if(n){const t=e.Xs(n);t&&e.Zs(t)}for(const r of e.Ks)e.Us(r);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,n){this.ei(e,t,n),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Rc(this.persistenceKey,e));if(n){const r=Dc.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Rc(this.persistenceKey,e))}updateQueryState(e,t,n){this.ii(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.ni(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Lr("SharedClientState","READ",e,t),t}setItem(e,t){Lr("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Lr("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const n=e;if(n.storageArea===this.storage){if(Lr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void Fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,v.Z)(function*(){if(t.started){if(null!==n.key)if(t.Ws.test(n.key)){if(null==n.newValue){const e=t.ai(n.key);return t.ci(e,null)}{const e=t.ui(n.key,n.newValue);if(e)return t.ci(e.clientId,e)}}else if(t.Gs.test(n.key)){if(null!==n.newValue){const e=t.hi(n.key,n.newValue);if(e)return t.li(e)}}else if(t.zs.test(n.key)){if(null!==n.newValue){const e=t.fi(n.key,n.newValue);if(e)return t.di(e)}}else if(n.key===t.Hs){if(null!==n.newValue){const e=t.Xs(n.newValue);if(e)return t.Zs(e)}}else if(n.key===t.Qs){const e=function(e){let t=Yr.T;if(null!=e)try{const n=JSON.parse(e);jr("number"==typeof n),t=n}catch(e){Fr("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue);e!==Yr.T&&t.sequenceNumberHandler(e)}else if(n.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(n)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,n){const r=new Oc(this.currentUser,e,t,n),i=Nc(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}ni(e){const t=Nc(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,n){const r=Rc(this.persistenceKey,e),i=new Dc(e,t,n);this.setItem(r,i.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const n=this.ai(e);return Pc.$s(n,t)}hi(e,t){const n=this.Gs.exec(e),r=Number(n[1]);return Oc.$s(new Rr(void 0!==n[2]?n[2]:null),r,t)}fi(e,t){const n=this.zs.exec(e),r=Number(n[1]);return Dc.$s(r,t)}Xs(e){return Lc.$s(e)}li(e){var t=this;return(0,v.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);Lr("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,t){const n=t?this.qs.insert(e,t):this.qs.remove(e),r=this.ti(this.qs),i=this.ti(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.gi(s,o).then(()=>{this.qs=n})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=To();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class Uc{constructor(){this.yi=new Fc,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,n){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new Fc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Vc{Ei(e){}shutdown(){}}class jc{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Lr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){Lr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const qc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class zc{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class Bc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,n,r){const i=this.Bi(e,t);Lr("RestConnection","Sending: ",i,n);const s={};return this.Ui(s,r),this.qi(e,i,s,n).then(e=>(Lr("RestConnection","Received: ",e),e),t=>{throw Mr("RestConnection",`${e} failed with error: `,t,"url: ",i,"request:",n),t})}Ki(e,t,n,r){return this.Li(e,t,n,r)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Or,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}Bi(e,t){return`${this.Fi}/v1/${t}:${qc[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,n,r){return new Promise((i,s)=>{const o=new Nr;o.listenOnce(Cr.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Er.NO_ERROR:const t=o.getResponseJson();Lr("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Er.TIMEOUT:Lr("Connection",'RPC "'+e+'" timed out'),s(new Br(zr.DEADLINE_EXCEEDED,"Request time out"));break;case Er.HTTP_ERROR:const n=o.getStatus();if(Lr("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(zr).indexOf(t)>=0?t:zr.UNKNOWN}(e.status);s(new Br(t,e.message))}else s(new Br(zr.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Br(zr.UNAVAILABLE,"Connection failed."));break;default:Vr()}}finally{Lr("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}ji(e,t){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=new _r,i=ft(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Ar({})),this.Ui(s.initMessageHeaders,t),(0,I.uI)()||(0,I.b$)()||(0,I.d)()||(0,I.w1)()||(0,I.Mn)()||(0,I.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");Lr("Connection","Creating WebChannel: "+o,s);const a=r.createWebChannel(o,s);let u=!1,c=!1;const l=new zc({vi:e=>{c?Lr("Connection","Not sending because WebChannel is closed:",e):(u||(Lr("Connection","Opening WebChannel transport."),a.open(),u=!0),Lr("Connection","WebChannel sending:",e),a.send(e))},Vi:()=>a.close()}),h=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return h(a,xr.EventType.OPEN,()=>{c||Lr("Connection","WebChannel transport opened.")}),h(a,xr.EventType.CLOSE,()=>{c||(c=!0,Lr("Connection","WebChannel transport closed"),l.$i())}),h(a,xr.EventType.ERROR,e=>{c||(c=!0,Mr("Connection","WebChannel transport errored:",e),l.$i(new Br(zr.UNAVAILABLE,"The operation could not be completed")))}),h(a,xr.EventType.MESSAGE,e=>{var t;if(!c){const n=e.data[0];jr(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Lr("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=io[e];if(void 0!==t)return ao(t)}(e),n=i.message;void 0===t&&(t=zr.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),c=!0,l.$i(new Br(t,n)),a.close()}else Lr("Connection","WebChannel received:",n),l.Oi(n)}}),h(i,kr.STAT_EVENT,e=>{10===e.stat?Lr("Connection","Detected buffering proxy"):11===e.stat&&Lr("Connection","Detected no buffering proxy")}),setTimeout(()=>{l.ki()},0),l}}function Hc(){return"undefined"!=typeof window?window:null}function $c(){return"undefined"!=typeof document?document:null}function Gc(e){return new Lo(e,!0)}class Zc{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=t,this.Qi=n,this.Wi=r,this.Gi=i,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,t-n);r>0&&Lr("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Kc{constructor(e,t,n,r,i,s){this.Oe=e,this.er=n,this.nr=r,this.credentialsProvider=i,this.listener=s,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Zc(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,v.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,v.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,t){var n=this;return(0,v.Z)(function*(){n._r(),n.rr.cancel(),n.sr++,3!==e?n.rr.reset():t&&t.code===zr.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),n.rr.Yi()):t&&t.code===zr.UNAUTHENTICATED&&n.credentialsProvider.invalidateToken(),null!==n.stream&&(n.mr(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.Ci(t)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then(e=>{this.sr===t&&this.yr(e)},t=>{e(()=>{const e=new Br(zr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.pr(e)})})}yr(e){const t=this.gr(this.sr);this.stream=this.Er(e),this.stream.Si(()=>{t(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(e=>{t(()=>this.pr(e))}),this.stream.onMessage(e=>{t(()=>this.onMessage(e))})}ur(){var e=this;this.state=4,this.rr.Xi((0,v.Z)(function*(){e.state=0,e.start()}))}pr(e){return Lr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget(()=>this.sr===e?t():(Lr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wc extends Kc{constructor(e,t,n,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,n,i),this.N=r}Er(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(e,t){let n;if("targetChange"in t){const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Vr()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.D?(jr(void 0===t||"string"==typeof t),fi.fromBase64String(t||"")):(jr(void 0===t||t instanceof Uint8Array),fi.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?zr.UNKNOWN:ao(e.code);return new Br(t,e.message||"")}(o);n=new Ao(r,i,s,a||null)}else if("documentChange"in t){const r=t.documentChange,i=Bo(e,r.document.name),s=Vo(r.document.updateTime),o=new Vi({mapValue:{fields:r.document.fields}}),a=qi.newFoundDocument(i,s,o);n=new Co(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,i=Bo(e,r.document),s=r.readTime?Vo(r.readTime):ii.min(),o=qi.newNoDocument(i,s);n=new Co([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,i=Bo(e,r.document);n=new Co([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return Vr();{const e=t.filter,r=new ro(e.count||0);n=new ko(e.targetId,r)}}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return ii.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ii.min():t.readTime?Vo(t.readTime):ii.min()}(e);return this.listener.Tr(t,n)}Ir(e){const t={};t.database=Go(this.N),t.addTarget=function(e,t){let n;const r=t.target;return n=Gi(r)?{documents:Jo(e,r)}:{query:Xo(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Mo(e,t.resumeToken):t.snapshotVersion.compareTo(ii.min())>0&&(n.readTime=Fo(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Vr()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.wr(t)}Ar(e){const t={};t.database=Go(this.N),t.removeTarget=e,this.wr(t)}}class Qc extends Kc{constructor(e,t,n,r,i){super(e,"write_stream_connection_backoff","write_stream_idle",t,n,i),this.N=r,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(e){return this.nr.ji("Write",e)}onMessage(e){if(jr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(e,t){return e&&e.length>0?(jr(void 0!==t),e.map(e=>function(e,t){let n=Vo(e.updateTime?e.updateTime:t);return n.isEqual(ii.min())&&(n=Vo(t)),new qs(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Vo(e.commitTime);return this.listener.vr(n,t)}return jr(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=Go(this.N),this.wr(e)}Pr(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Qo(this.N,e))};this.wr(t)}}class Yc extends class{}{constructor(e,t,n){super(),this.credentials=e,this.nr=t,this.N=n,this.Dr=!1}Cr(){if(this.Dr)throw new Br(zr.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Li(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===zr.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Br(zr.UNKNOWN,e.toString())})}Ki(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Ki(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===zr.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Br(zr.UNKNOWN,e.toString())})}terminate(){this.Dr=!0}}class Jc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(Fr(t),this.$r=!1):Lr("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class Xc{constructor(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=i,this.Qr.Ei(e=>{n.enqueueAndForget((0,v.Z)(function*(){var e;ll(s)&&(Lr("RemoteStore","Restarting streams for network reachability change."),yield(e=(0,v.Z)(function*(e){const t=qr(e);t.Kr.add(4),yield nl(t),t.Wr.set("Unknown"),t.Kr.delete(4),yield el(t)}),function(t){return e.apply(this,arguments)})(s))}))}),this.Wr=new Jc(n,r)}}function el(e){return tl.apply(this,arguments)}function tl(){return(tl=(0,v.Z)(function*(e){if(ll(e))for(const t of e.jr)yield t(!0)})).apply(this,arguments)}function nl(e){return rl.apply(this,arguments)}function rl(){return(rl=(0,v.Z)(function*(e){for(const t of e.jr)yield t(!1)})).apply(this,arguments)}function il(e,t){const n=qr(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),cl(n)?ul(n):Ml(n).cr()&&ol(n,t))}function sl(e,t){const n=qr(e),r=Ml(n);n.qr.delete(t),r.cr()&&al(n,t),0===n.qr.size&&(r.cr()?r.lr():ll(n)&&n.Wr.set("Unknown"))}function ol(e,t){e.Gr.Y(t.targetId),Ml(e).Ir(t)}function al(e,t){e.Gr.Y(t),Ml(e).Ar(t)}function ul(e){e.Gr=new No({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.qr.get(t)||null}),Ml(e).start(),e.Wr.Or()}function cl(e){return ll(e)&&!Ml(e).ar()&&e.qr.size>0}function ll(e){return 0===qr(e).Kr.size}function hl(e){e.Gr=void 0}function dl(e){return fl.apply(this,arguments)}function fl(){return(fl=(0,v.Z)(function*(e){e.qr.forEach((t,n)=>{ol(e,t)})})).apply(this,arguments)}function pl(e,t){return gl.apply(this,arguments)}function gl(){return(gl=(0,v.Z)(function*(e,t){hl(e),cl(e)?(e.Wr.Lr(t),ul(e)):e.Wr.set("Unknown")})).apply(this,arguments)}function ml(e,t,n){return yl.apply(this,arguments)}function yl(){return(yl=(0,v.Z)(function*(e,t,n){if(e.Wr.set("Online"),t instanceof Ao&&2===t.state&&t.cause)try{yield(r=(0,v.Z)(function*(e,t){const n=t.cause;for(const r of t.targetIds)e.qr.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e.qr.delete(r),e.Gr.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(n){Lr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield vl(e,n)}else if(t instanceof Co?e.Gr.rt(t):t instanceof ko?e.Gr.ft(t):e.Gr.ct(t),!n.isEqual(ii.min()))try{const t=yield sc(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.Gr._t(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.qr.get(r);i&&e.qr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.qr.get(t);if(!n)return;e.qr.set(t,n.withResumeToken(fi.EMPTY_BYTE_STRING,n.snapshotVersion)),al(e,t);const r=new Wa(n.target,t,1,n.sequenceNumber);ol(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(t){Lr("RemoteStore","Failed to raise snapshot:",t),yield vl(e,t)}var r})).apply(this,arguments)}function vl(e,t,n){return wl.apply(this,arguments)}function wl(){return(wl=(0,v.Z)(function*(e,t,n){if(!ja(t))throw t;e.Kr.add(1),yield nl(e),e.Wr.set("Offline"),n||(n=()=>sc(e.localStore)),e.asyncQueue.enqueueRetryable((0,v.Z)(function*(){Lr("RemoteStore","Retrying IndexedDB access"),yield n(),e.Kr.delete(1),yield el(e)}))})).apply(this,arguments)}function _l(e,t){return t().catch(n=>vl(e,n,t))}function bl(e){return Il.apply(this,arguments)}function Il(){return(Il=(0,v.Z)(function*(e){const t=qr(e),n=Ul(t);let r=t.Ur.length>0?t.Ur[t.Ur.length-1].batchId:-1;for(;Tl(t);)try{const e=yield uc(t.localStore,r);if(null===e){0===t.Ur.length&&n.lr();break}r=e.batchId,Sl(t,e)}catch(e){yield vl(t,e)}El(t)&&Cl(t)})).apply(this,arguments)}function Tl(e){return ll(e)&&e.Ur.length<10}function Sl(e,t){e.Ur.push(t);const n=Ul(e);n.cr()&&n.br&&n.Pr(t.mutations)}function El(e){return ll(e)&&!Ul(e).ar()&&e.Ur.length>0}function Cl(e){Ul(e).start()}function kl(e){return Al.apply(this,arguments)}function Al(){return(Al=(0,v.Z)(function*(e){Ul(e).Sr()})).apply(this,arguments)}function xl(e){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,v.Z)(function*(e){const t=Ul(e);for(const n of e.Ur)t.Pr(n.mutations)})).apply(this,arguments)}function Rl(e,t,n){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,v.Z)(function*(e,t,n){const r=e.Ur.shift(),i=Ka.from(r,t,n);yield _l(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield bl(e)})).apply(this,arguments)}function Dl(e,t){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,v.Z)(function*(e,t){var n;t&&Ul(e).br&&(yield(n=(0,v.Z)(function*(e,t){if(oo(n=t.code)&&n!==zr.ABORTED){const n=e.Ur.shift();Ul(e).hr(),yield _l(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield bl(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),El(e)&&Cl(e)})).apply(this,arguments)}function Ll(e,t){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,v.Z)(function*(e,t){const n=qr(e);t?(n.Kr.delete(2),yield el(n)):t||(n.Kr.add(2),yield nl(n),n.Wr.set("Unknown"))})).apply(this,arguments)}function Ml(e){return e.zr||(e.zr=function(e,t,n){const r=qr(e);return r.Cr(),new Wc(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:dl.bind(null,e),Ci:pl.bind(null,e),Tr:ml.bind(null,e)}),e.jr.push(function(){var t=(0,v.Z)(function*(t){t?(e.zr.hr(),cl(e)?ul(e):e.Wr.set("Unknown")):(yield e.zr.stop(),hl(e))});return function(e){return t.apply(this,arguments)}}())),e.zr}function Ul(e){return e.Hr||(e.Hr=function(e,t,n){const r=qr(e);return r.Cr(),new Qc(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:kl.bind(null,e),Ci:Dl.bind(null,e),Vr:xl.bind(null,e),vr:Rl.bind(null,e)}),e.jr.push(function(){var t=(0,v.Z)(function*(t){t?(e.Hr.hr(),yield bl(e)):(yield e.Hr.stop(),e.Ur.length>0&&(Lr("RemoteStore",`Stopping write stream with ${e.Ur.length} pending writes`),e.Ur=[]))});return function(e){return t.apply(this,arguments)}}())),e.Hr}class Vl{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Vl(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Br(zr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jl(e,t){if(Fr("AsyncQueue",`${t}: ${e}`),ja(e))return new Br(zr.UNAVAILABLE,`${t}: ${e}`);throw e}class ql{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Si.comparator(t.key,n.key):(e,t)=>Si.comparator(e.key,t.key),this.keyedMap=yo(),this.sortedSet=new uo(this.comparator)}static emptySet(e){return new ql(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ql))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ql;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class zl{constructor(){this.Jr=new uo(Si.comparator)}track(e){const t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):Vr():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal((t,n)=>{e.push(n)}),e}}class Bl{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Bl(e,t,ql.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ws(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Hl{constructor(){this.Xr=void 0,this.listeners=[]}}class $l{constructor(){this.queries=new Fu(e=>_s(e),ws),this.onlineState="Unknown",this.Zr=new Set}}function Gl(e,t){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,v.Z)(function*(e,t){const n=qr(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Hl),i)try{s.Xr=yield n.onListen(r)}catch(e){const n=jl(e,`Initialization of query '${bs(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.eo(n.onlineState),s.Xr&&t.no(s.Xr)&&Jl(n)})).apply(this,arguments)}function Kl(e,t){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,v.Z)(function*(e,t){const n=qr(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function Ql(e,t){const n=qr(e);let r=!1;for(const i of t){const e=n.queries.get(i.query);if(e){for(const t of e.listeners)t.no(i)&&(r=!0);e.Xr=i}}r&&Jl(n)}function Yl(e,t,n){const r=qr(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Jl(e){e.Zr.forEach(e=>{e.next()})}class Xl{constructor(e,t,n){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}no(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Bl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=Bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class eh{constructor(e,t){this.payload=e,this.byteLength=t}ho(){return"metadata"in this.payload}}class th{constructor(e){this.N=e}zn(e){return Bo(this.N,e)}Hn(e){return e.metadata.exists?Wo(this.N,e.document,!1):qi.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return Vo(e)}}class nh{constructor(e,t,n){this.lo=e,this.localStore=t,this.N=n,this.queries=[],this.documents=[],this.progress=rh(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}wo(e){const t=new Map,n=new th(this.N);for(const r of e)if(r.metadata.queries){const e=n.zn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||bo()).add(e);t.set(n,r)}}return t}complete(){var e=this;return(0,v.Z)(function*(){const t=yield function(e,t,n,r){return mc.apply(this,arguments)}(e.localStore,new th(e.N),e.documents,e.lo.id),n=e.wo(e.documents);for(const r of e.queries)yield yc(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",new Qu(Object.assign({},e.progress),t)})()}}function rh(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class ih{constructor(e){this.key=e}}class sh{constructor(e){this.key=e}}class oh{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=bo(),this.mutatedKeys=bo(),this.po=Ts(e),this.Eo=new ql(this.po)}get To(){return this._o}Io(e,t){const n=t?t.Ao:new zl,r=t?t.Eo:this.Eo;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=hs(this.query)&&r.size===this.query.limit?r.last():null,u=ds(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),l=Is(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Ro(c,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.po(l,a)>0||u&&this.po(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(a||u)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),hs(this.query)||ds(this.query))for(;s.size>this.query.limit;){const e=hs(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Eo:s,Ao:n,Ln:o,mutatedKeys:i}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Eo;this.Eo=e.Eo,this.mutatedKeys=e.mutatedKeys;const i=e.Ao.Yr();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vr()}};return n(e)-n(t)}(e.type,t.type)||this.po(e.doc,t.doc)),this.bo(n);const s=t?this.Po():[],o=0===this.yo.size&&this.current?1:0,a=o!==this.mo;return this.mo=o,0!==i.length||a?{snapshot:new Bl(this.query,e.Eo,r,i,e.mutatedKeys,0===o,a,!1),vo:s}:{vo:s}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new zl,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.Eo.has(e)&&!this.Eo.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(e=>this._o=this._o.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this._o=this._o.delete(e)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=bo(),this.Eo.forEach(e=>{this.Vo(e.key)&&(this.yo=this.yo.add(e.key))});const t=[];return e.forEach(e=>{this.yo.has(e)||t.push(new sh(e))}),this.yo.forEach(n=>{e.has(n)||t.push(new ih(n))}),t}So(e){this._o=e.Gn,this.yo=bo();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return Bl.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class ah{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class uh{constructor(e){this.key=e,this.Co=!1}}class ch{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.No={},this.xo=new Fu(e=>_s(e),ws),this.ko=new Map,this.$o=new Set,this.Oo=new uo(Si.comparator),this.Fo=new Map,this.Mo=new _c,this.Lo={},this.Bo=new Map,this.Uo=Tu.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function lh(e,t){return hh.apply(this,arguments)}function hh(){return(hh=(0,v.Z)(function*(e,t){const n=ed(e);let r,i;const s=n.xo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Do();else{const e=yield cc(n.localStore,ys(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=yield dh(n,t,r,"current"===s),n.isPrimaryClient&&il(n.remoteStore,e)}return i})).apply(this,arguments)}function dh(e,t,n,r){return fh.apply(this,arguments)}function fh(){return(fh=(0,v.Z)(function*(e,t,n,r){e.Ko=(t,n,r)=>{return(i=(0,v.Z)(function*(e,t,n,r){let i=t.view.Io(n);i.Ln&&(i=yield dc(e.localStore,t.query,!1).then(({documents:e})=>t.view.Io(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Rh(e,t.targetId,o.vo),o.snapshot}),function(e,t,n,r){return i.apply(this,arguments)})(e,t,n,r);var i};const i=yield dc(e.localStore,t,!0),s=new oh(t,i.Gn),o=s.Io(i.documents),a=Eo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=s.applyChanges(o,e.isPrimaryClient,a);Rh(e,n,u.vo);const c=new ah(t,n,s);return e.xo.set(t,c),e.ko.has(n)?e.ko.get(n).push(t):e.ko.set(n,[t]),u.snapshot})).apply(this,arguments)}function ph(e,t){return gh.apply(this,arguments)}function gh(){return(gh=(0,v.Z)(function*(e,t){const n=qr(e),r=n.xo.get(t),i=n.ko.get(r.targetId);if(i.length>1)return n.ko.set(r.targetId,i.filter(e=>!ws(e,t))),void n.xo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield lc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),sl(n.remoteStore,r.targetId),xh(n,r.targetId)}).catch(Au))):(xh(n,r.targetId),yield lc(n.localStore,r.targetId,!0))})).apply(this,arguments)}function mh(){return(mh=(0,v.Z)(function*(e,t,n){const r=td(e);try{const e=yield function(e,t){const n=qr(e),r=ri.now(),i=t.reduce((e,t)=>e.add(t.key),bo());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.Qn.Pn(e,i).next(i=>{s=i;const o=[];for(const e of t){const t=Zs(e,s.get(e.key));null!=t&&o.push(new Ys(e.key,t,ji(t.value.mapValue),zs.exists(!0)))}return n.In.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Lo[e.currentUser.toKey()];r||(r=new uo(ei)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(r,e.batchId,n),yield Ph(r,e.changes),yield bl(r.remoteStore)}catch(e){const t=jl(e,"Failed to persist write");n.reject(t)}})).apply(this,arguments)}function yh(e,t){return vh.apply(this,arguments)}function vh(){return(vh=(0,v.Z)(function*(e,t){const n=qr(e);try{const e=yield oc(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Fo.get(t);r&&(jr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Co=!0:e.modifiedDocuments.size>0?jr(r.Co):e.removedDocuments.size>0&&(jr(r.Co),r.Co=!1))}),yield Ph(n,e,t)}catch(e){yield Au(e)}})).apply(this,arguments)}function wh(e,t,n){const r=qr(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.xo.forEach((n,r)=>{const i=r.view.eo(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=qr(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.eo(t)&&(r=!0)}),r&&Jl(n)}(r.eventManager,t),e.length&&r.No.Tr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function _h(e,t,n){return bh.apply(this,arguments)}function bh(){return(bh=(0,v.Z)(function*(e,t,n){const r=qr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fo.get(t),s=i&&i.key;if(s){let e=new uo(Si.comparator);e=e.insert(s,qi.newNoDocument(s,ii.min()));const n=bo().add(s),i=new So(ii.min(),new Map,new ho(ei),e,n);yield yh(r,i),r.Oo=r.Oo.remove(s),r.Fo.delete(t),Dh(r)}else yield lc(r.localStore,t,!1).then(()=>xh(r,t,n)).catch(Au)})).apply(this,arguments)}function Ih(e,t){return Th.apply(this,arguments)}function Th(){return(Th=(0,v.Z)(function*(e,t){const n=qr(e),r=t.batch.batchId;try{const e=yield ic(n.localStore,t);Ah(n,r,null),kh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ph(n,e)}catch(e){yield Au(e)}})).apply(this,arguments)}function Sh(e,t,n){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,v.Z)(function*(e,t,n){const r=qr(e);try{const e=yield function(e,t){const n=qr(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.In.lookupMutationBatch(e,t).next(t=>(jr(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t))).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}(r.localStore,t);Ah(r,t,n),kh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield Ph(r,e)}catch(n){yield Au(n)}})).apply(this,arguments)}function Ch(){return(Ch=(0,v.Z)(function*(e,t){const n=qr(e);ll(n.remoteStore)||Lr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=qr(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.In.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Bo.get(e)||[];r.push(t),n.Bo.set(e,r)}catch(e){const n=jl(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}})).apply(this,arguments)}function kh(e,t){(e.Bo.get(t)||[]).forEach(e=>{e.resolve()}),e.Bo.delete(t)}function Ah(e,t,n){const r=qr(e);let i=r.Lo[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function xh(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.ko.get(t))e.xo.delete(r),n&&e.No.jo(r,n);e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach(t=>{e.Mo.containsKey(t)||Nh(e,t)})}function Nh(e,t){e.$o.delete(t.path.canonicalString());const n=e.Oo.get(t);null!==n&&(sl(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),Dh(e))}function Rh(e,t,n){for(const r of n)r instanceof ih?(e.Mo.addReference(r.key,t),Oh(e,r)):r instanceof sh?(Lr("SyncEngine","Document no longer in limbo: "+r.key),e.Mo.removeReference(r.key,t),e.Mo.containsKey(r.key)||Nh(e,r.key)):Vr()}function Oh(e,t){const n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(Lr("SyncEngine","New document in limbo: "+n),e.$o.add(r),Dh(e))}function Dh(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){const t=e.$o.values().next().value;e.$o.delete(t);const n=new Si(ci.fromString(t)),r=e.Uo.next();e.Fo.set(r,new uh(n)),e.Oo=e.Oo.insert(n,r),il(e.remoteStore,new Wa(ys(ls(n.path)),r,2,Yr.T))}}function Ph(e,t,n){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,v.Z)(function*(e,t,n){const r=qr(e),i=[],s=[],o=[];var a;r.xo.isEmpty()||(r.xo.forEach((e,a)=>{o.push(r.Ko(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Ju.kn(a.targetId,e);s.push(t)}}))}),yield Promise.all(o),r.No.Tr(i),yield(a=(0,v.Z)(function*(e,t){const n=qr(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>La.forEach(t,t=>La.forEach(t.Nn,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>La.forEach(t.xn,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!ja(e))throw e;Lr("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Un.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.Un=n.Un.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,s))})).apply(this,arguments)}function Fh(e,t){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,v.Z)(function*(e,t){const n=qr(e);if(!n.currentUser.isEqual(t)){Lr("SyncEngine","User change. New user:",t.toKey());const e=yield nc(n.localStore,t);n.currentUser=t,function(e,t){e.Bo.forEach(e=>{e.forEach(e=>{e.reject(new Br(zr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Bo.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield Ph(n,e.Wn)}})).apply(this,arguments)}function Uh(e,t){const n=qr(e),r=n.Fo.get(t);if(r&&r.Co)return bo().add(r.key);{let e=bo();const r=n.ko.get(t);if(!r)return e;for(const t of r){const r=n.xo.get(t);e=e.unionWith(r.view.To)}return e}}function Vh(e,t){return jh.apply(this,arguments)}function jh(){return(jh=(0,v.Z)(function*(e,t){const n=qr(e),r=yield dc(n.localStore,t.query,!0),i=t.view.So(r);return n.isPrimaryClient&&Rh(n,t.targetId,i.vo),i})).apply(this,arguments)}function qh(e){return zh.apply(this,arguments)}function zh(){return(zh=(0,v.Z)(function*(e){const t=qr(e);return pc(t.localStore).then(e=>Ph(t,e))})).apply(this,arguments)}function Bh(e,t,n,r){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,v.Z)(function*(e,t,n,r){const i=qr(e),s=yield function(e,t){const n=qr(e),r=qr(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Xt(e,t).next(t=>t?n.Qn.Pn(e,t):La.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?yield bl(i.remoteStore):"acknowledged"===n||"rejected"===n?(Ah(i,t,r||null),kh(i,t),function(e,t){qr(qr(e).In).te(t)}(i.localStore,t)):Vr(),yield Ph(i,s)):Lr("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function $h(){return($h=(0,v.Z)(function*(e,t){const n=qr(e);if(ed(n),td(n),!0===t&&!0!==n.qo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield Gh(n,e.toArray());n.qo=!0,yield Ll(n.remoteStore,!0);for(const r of t)il(n.remoteStore,r)}else if(!1===t&&!1!==n.qo){const e=[];let t=Promise.resolve();n.ko.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(xh(n,i),lc(n.localStore,i,!0))),sl(n.remoteStore,i)}),yield t,yield Gh(n,e),function(e){const t=qr(e);t.Fo.forEach((e,n)=>{sl(t.remoteStore,n)}),t.Mo.us(),t.Fo=new Map,t.Oo=new uo(Si.comparator)}(n),n.qo=!1,yield Ll(n.remoteStore,!1)}})).apply(this,arguments)}function Gh(e,t,n){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,v.Z)(function*(e,t,n){const r=qr(e),i=[],s=[];for(const o of t){let e;const t=r.ko.get(o);if(t&&0!==t.length){e=yield cc(r.localStore,ys(t[0]));for(const e of t){const t=r.xo.get(e),n=yield Vh(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=yield fc(r.localStore,o);e=yield cc(r.localStore,t),yield dh(r,Kh(t),o,!1)}i.push(e)}return r.No.Tr(s),i})).apply(this,arguments)}function Kh(e){return cs(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Wh(e){const t=qr(e);return qr(qr(t.localStore).persistence).pn()}function Qh(e,t,n,r){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,v.Z)(function*(e,t,n,r){const i=qr(e);if(i.qo)Lr("SyncEngine","Ignoring unexpected query state notification.");else if(i.ko.has(t))switch(n){case"current":case"not-current":{const e=yield pc(i.localStore),r=So.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield Ph(i,e,r);break}case"rejected":yield lc(i.localStore,t,!0),xh(i,t,r);break;default:Vr()}})).apply(this,arguments)}function Jh(e,t,n){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,v.Z)(function*(e,t,n){const r=ed(e);if(r.qo){for(const e of t){if(r.ko.has(e)){Lr("SyncEngine","Adding an already active target "+e);continue}const t=yield fc(r.localStore,e),n=yield cc(r.localStore,t);yield dh(r,Kh(t),n.targetId,!1),il(r.remoteStore,n)}for(const e of n)r.ko.has(e)&&(yield lc(r.localStore,e,!1).then(()=>{sl(r.remoteStore,e),xh(r,e)}).catch(Au))}})).apply(this,arguments)}function ed(e){const t=qr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=yh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_h.bind(null,t),t.No.Tr=Ql.bind(null,t.eventManager),t.No.jo=Yl.bind(null,t.eventManager),t}function td(e){const t=qr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ih.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sh.bind(null,t),t}class nd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,v.Z)(function*(){t.N=Gc(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),yield t.persistence.start(),t.gcScheduler=t.zo(e),t.localStore=t.Ho(e)})()}zo(e){return null}Ho(e){return tc(this.persistence,new Xu,e.initialUser,this.N)}Go(e){return new Cc(Ac.Ns,this.N)}Wo(e){return new Uc}terminate(){var e=this;return(0,v.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class rd extends nd{constructor(e,t,n){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,v.Z)(function*(){yield t().call(n,e),yield function(e){return gc.apply(this,arguments)}(n.localStore),yield n.Jo.initialize(n,e),yield td(n.Jo.syncEngine),yield bl(n.Jo.remoteStore),yield n.persistence.nn(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Ho(e){return tc(this.persistence,new Xu,e.initialUser,this.N)}zo(e){return new Ou(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const t=Wu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?gu.withCacheSize(this.cacheSizeBytes):gu.DEFAULT;return new Gu(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Hc(),$c(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new Uc}}class id extends rd{constructor(e,t){super(e,t,!1),this.Jo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,v.Z)(function*(){yield t().call(n,e);const r=n.Jo.syncEngine;n.sharedClientState instanceof Mc&&(n.sharedClientState.syncEngine={_i:Bh.bind(null,r),mi:Qh.bind(null,r),gi:Jh.bind(null,r),pn:Wh.bind(null,r),wi:qh.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.nn(function(){var e=(0,v.Z)(function*(e){yield function(e,t){return $h.apply(this,arguments)}(n.Jo.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):e||n.gcScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}Wo(e){const t=Hc();if(!Mc.bt(t))throw new Br(zr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Wu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mc(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class sd{initialize(e,t){var n=this;return(0,v.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>wh(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=Fh.bind(null,n.syncEngine),yield Ll(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new $l}createDatastore(e){const t=Gc(e.databaseInfo.databaseId),n=new Bc(e.databaseInfo);return function(e,t,n){return new Yc(e,t,n)}(e.credentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>wh(this.syncEngine,e,0),s=jc.bt()?new jc:new Vc,new Xc(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new ch(e,t,n,r,i,s);return o&&(a.qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,v.Z)(function*(e){const t=qr(e);Lr("RemoteStore","RemoteStore shutting down."),t.Kr.add(5),yield nl(t),t.Qr.shutdown(),t.Wr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function od(e,t=10240){let n=0;return{read:()=>(0,v.Z)(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>(0,v.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ad{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ud{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new Hr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(e=>{e&&e.ho()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,v.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,v.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,v.Z)(function*(){const t=yield e.na();if(null===t)return null;const n=e.ta.decode(t),r=Number(n);isNaN(r)&&e.sa(`length string (${n}) is not valid number`);const i=yield e.ia(r);return new eh(JSON.parse(i),t.length+r)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,v.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const t=e.ra();t<0&&e.sa("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}ia(e){var t=this;return(0,v.Z)(function*(){for(;t.buffer.length<e;)(yield t.oa())&&t.sa("Reached the end of bundle when more is expected.");const n=t.ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,v.Z)(function*(){const t=yield e.Zo.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class cd{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,v.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Br(zr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,v.Z)(function*(e,t){const n=qr(e),r=Go(n.N)+"/documents",i={documents:t.map(e=>zo(n.N,e))},s=yield n.Ki("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){jr(!!t.found);const n=Bo(e,t.found.name),r=Vo(t.found.updateTime),i=new Vi({mapValue:{fields:t.found.fields}});return qi.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){jr(!!t.missing),jr(!!t.readTime);const n=Bo(e,t.missing),r=Vo(t.readTime);return qi.newNoDocument(n,r)}(e,t):Vr()}(n.N,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());jr(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new to(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,v.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=Si.fromPath(n);e.mutations.push(new no(r,e.precondition(r)))}),yield(n=(0,v.Z)(function*(e,t){const n=qr(e),r=Go(n.N)+"/documents",i={writes:t.map(e=>Qo(n.N,e))};yield n.Li("Commit",r,i)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Vr();t=ii.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Br(zr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?zs.updateTime(t):zs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ii.min()))throw new Br(zr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zs.updateTime(t)}return zs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ld{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.aa=5,this.rr=new Zc(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,v.Z)(function*(){const t=new cd(e.datastore),n=e.ua(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.ha(t)}))}).catch(t=>{e.ha(t)})}))}ua(e){try{const t=this.updateFunction(e);return!bi(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!oo(t)}return!1}}class hd{constructor(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=Rr.UNAUTHENTICATED,this.clientId=Xr.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var e=(0,v.Z)(function*(e){Lr("FirestoreClient","Received user=",e.uid),yield r.credentialListener(e),r.user=e});return function(t){return e.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,v.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Br(zr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,v.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(n){const e=jl(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function dd(e,t){return fd.apply(this,arguments)}function fd(){return(fd=(0,v.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress(),Lr("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=(0,v.Z)(function*(e){r.isEqual(e)||(yield nc(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t})).apply(this,arguments)}function pd(e,t){return gd.apply(this,arguments)}function gd(){return(gd=(0,v.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield md(e);Lr("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>{return(n=(0,v.Z)(function*(e,t){const n=qr(e);n.asyncQueue.verifyOperationInProgress(),Lr("RemoteStore","RemoteStore received new credentials");const r=ll(n);n.Kr.add(3),yield nl(n),r&&n.Wr.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.Kr.delete(3),yield el(n)}),function(e,t){return n.apply(this,arguments)})(t.remoteStore,e);var n}),e.onlineComponents=t})).apply(this,arguments)}function md(e){return yd.apply(this,arguments)}function yd(){return(yd=(0,v.Z)(function*(e){return e.offlineComponents||(Lr("FirestoreClient","Using default OfflineComponentProvider"),yield dd(e,new nd)),e.offlineComponents})).apply(this,arguments)}function vd(e){return wd.apply(this,arguments)}function wd(){return(wd=(0,v.Z)(function*(e){return e.onlineComponents||(Lr("FirestoreClient","Using default OnlineComponentProvider"),yield pd(e,new sd)),e.onlineComponents})).apply(this,arguments)}function _d(e){return md(e).then(e=>e.persistence)}function bd(e){return md(e).then(e=>e.localStore)}function Id(e){return vd(e).then(e=>e.remoteStore)}function Td(e){return vd(e).then(e=>e.syncEngine)}function Sd(e){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,v.Z)(function*(e){const t=yield vd(e),n=t.eventManager;return n.onListen=lh.bind(null,t.syncEngine),n.onUnlisten=ph.bind(null,t.syncEngine),n})).apply(this,arguments)}function Cd(e,t,n={}){const r=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(e,t,n,r,i){const s=new ad({next:s=>{t.enqueueAndForget(()=>Kl(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Br(zr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Br(zr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Xl(ls(n.path),s,{includeMetadataChanges:!0,uo:!0});return Gl(e,o)}(yield Sd(e),e.asyncQueue,t,n,r)})),r.promise}function kd(e,t,n={}){const r=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(e,t,n,r,i){const s=new ad({next:n=>{t.enqueueAndForget(()=>Kl(e,o)),n.fromCache&&"server"===r.source?i.reject(new Br(zr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Xl(n,s,{includeMetadataChanges:!0,uo:!0});return Gl(e,o)}(yield Sd(e),e.asyncQueue,t,n,r)})),r.promise}class Ad{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class xd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xd&&e.projectId===this.projectId&&e.database===this.database}}const Nd=new Map;function Rd(e,t,n){if(!n)throw new Br(zr.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Od(e,t,n,r){if(!0===t&&!0===r)throw new Br(zr.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Dd(e){if(!Si.isDocumentKey(e))throw new Br(zr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Pd(e){if(Si.isDocumentKey(e))throw new Br(zr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ld(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){if(e.constructor){const t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Vr()}function Fd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Br(zr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ld(e);throw new Br(zr.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Md(e,t){if(t<=0)throw new Br(zr.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Ud{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Br(zr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Br(zr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Od("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vd{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ud({}),this._settingsFrozen=!1,e instanceof xd?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Br(zr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xd(e.options.projectId)}(e))}get app(){if(!this._app)throw new Br(zr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Br(zr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ud(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Gr;switch(e.type){case"gapi":const t=e.client;return jr(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Qr(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Br(zr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Nd.get(e);t&&(Lr("ComponentProvider","Removing Datastore"),Nd.delete(e),t.terminate())}(this),Promise.resolve()}}class jd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jd(this.firestore,e,this._key)}}class qd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new qd(this.firestore,e,this._query)}}class zd extends qd{constructor(e,t,n){super(e,t,ls(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jd(this.firestore,null,new Si(e))}withConverter(e){return new zd(this.firestore,e,this._path)}}function Bd(e,t,...n){if(e=(0,I.m9)(e),Rd("collection","path",t),e instanceof Vd){const r=ci.fromString(t,...n);return Pd(r),new zd(e,null,r)}{if(!(e instanceof jd||e instanceof zd))throw new Br(zr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ci.fromString(t,...n));return Pd(r),new zd(e.firestore,null,r)}}function Hd(e,t,...n){if(e=(0,I.m9)(e),1===arguments.length&&(t=Xr.I()),Rd("doc","path",t),e instanceof Vd){const r=ci.fromString(t,...n);return Dd(r),new jd(e,null,new Si(r))}{if(!(e instanceof jd||e instanceof zd))throw new Br(zr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ci.fromString(t,...n));return Dd(r),new jd(e.firestore,e instanceof zd?e.converter:null,new Si(r))}}function $d(e,t){return e=(0,I.m9)(e),t=(0,I.m9)(t),(e instanceof jd||e instanceof zd)&&(t instanceof jd||t instanceof zd)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Gd(e,t){return e=(0,I.m9)(e),t=(0,I.m9)(t),e instanceof qd&&t instanceof qd&&e.firestore===t.firestore&&ws(e._query,t._query)&&e.converter===t.converter}class Zd{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Zc(this,"async_queue_retry"),this.Ea=()=>{const e=$c();e&&Lr("AsyncQueue","Visibility state changed to "+e.visibilityState),this.rr.tr()};const e=$c();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ta(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=$c();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ea)}}enqueue(e){if(this.Ta(),this.wa)return new Promise(()=>{});const t=new Hr;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,v.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(t){if(!ja(t))throw t;Lr("AsyncQueue","Operation failed with retryable error: "+t)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const t=this.fa.then(()=>(this.ga=!0,e().catch(e=>{throw this.ma=e,this.ga=!1,Fr("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.ga=!1,e))));return this.fa=t,t}enqueueAfterDelay(e,t,n){this.Ta(),this.pa.indexOf(e)>-1&&(t=0);const r=Vl.createAndSchedule(this,e,t,n,e=>this.Ra(e));return this._a.push(r),r}Ta(){this.ma&&Vr()}verifyOperationInProgress(){}ba(){var e=this;return(0,v.Z)(function*(){let t;do{t=e.fa,yield t}while(t!==e.fa)})()}Pa(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function Kd(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Wd{constructor(){this._progressObserver={},this._taskCompletionResolver=new Hr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qd extends Vd{constructor(e,t){super(e,t),this.type="firestore",this._queue=new Zd,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Jd(this),this._firestoreClient.terminate()}}function Yd(e){return e._firestoreClient||Jd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Jd(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new Ad(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new hd(e._credentials,e._queue,r)}function Xd(e,t,n){const r=new Hr;return e.asyncQueue.enqueue((0,v.Z)(function*(){try{yield dd(e,n),yield pd(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===zr.FAILED_PRECONDITION||e.code===zr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then(()=>r.promise)}function ef(e){if(e._initialized||e._terminated)throw new Br(zr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class tf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Br(zr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nf(fi.fromBase64String(e))}catch(e){throw new Br(zr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new nf(fi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rf{constructor(e){this._methodName=e}}class sf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Br(zr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Br(zr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ei(this._lat,e._lat)||ei(this._long,e._long)}}const of=/^__.*__$/;class af{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ys(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qs(e,this.data,t,this.fieldTransforms)}}class uf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ys(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vr()}}class lf{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.N=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new lf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}$a(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return Nf(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(cf(this.Da)&&of.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class hf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=n||Gc(e)}Ba(e,t,n,r=!1){return new lf({Da:e,methodName:t,La:n,path:hi.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function df(e){const t=e._freezeSettings(),n=Gc(e._databaseId);return new hf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ff(e,t,n,r,i,s={}){const o=e.Ba(s.merge||s.mergeFields?2:0,t,n,i);Cf("Data must be an object, but it was:",o,r);const a=Sf(r,o);let u,c;if(s.merge)u=new di(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=kf(t,r,n);if(!o.contains(i))throw new Br(zr.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Rf(e,i)||e.push(i)}u=new di(e),c=o.fieldTransforms.filter(e=>u.covers(e.field))}else u=null,c=o.fieldTransforms;return new af(new Vi(a),u,c)}class pf extends rf{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pf}}function gf(e,t,n){return new lf({Da:3,La:t.settings.La,methodName:e._methodName,xa:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}class mf extends rf{_toFieldTransform(e){return new js(e.path,new Os)}isEqual(e){return e instanceof mf}}class yf extends rf{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=gf(this,e,!0),n=this.Ua.map(e=>Tf(e,t)),r=new Ds(n);return new js(e.path,r)}isEqual(e){return this===e}}class vf extends rf{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=gf(this,e,!0),n=this.Ua.map(e=>Tf(e,t)),r=new Ls(n);return new js(e.path,r)}isEqual(e){return this===e}}class wf extends rf{constructor(e,t){super(e),this.qa=t}_toFieldTransform(e){const t=new Ms(e.N,ks(e.N,this.qa));return new js(e.path,t)}isEqual(e){return this===e}}function _f(e,t,n,r){const i=e.Ba(1,t,n);Cf("Data must be an object, but it was:",i,r);const s=[],o=Vi.empty();oi(r,(e,r)=>{const a=xf(t,e,n);r=(0,I.m9)(r);const u=i.$a(a);if(r instanceof pf)s.push(a);else{const e=Tf(r,u);null!=e&&(s.push(a),o.set(a,e))}});const a=new di(s);return new uf(o,a,i.fieldTransforms)}function bf(e,t,n,r,i,s){const o=e.Ba(1,t,n),a=[kf(t,r,n)],u=[i];if(s.length%2!=0)throw new Br(zr.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(kf(t,s[d])),u.push(s[d+1]);const c=[],l=Vi.empty();for(let d=a.length-1;d>=0;--d)if(!Rf(c,a[d])){const e=a[d];let t=u[d];t=(0,I.m9)(t);const n=o.$a(e);if(t instanceof pf)c.push(e);else{const r=Tf(t,n);null!=r&&(c.push(e),l.set(e,r))}}const h=new di(c);return new uf(l,h,o.fieldTransforms)}function If(e,t,n,r=!1){return Tf(n,e.Ba(r?4:3,t))}function Tf(e,t){if(Ef(e=(0,I.m9)(e)))return Cf("Unsupported field value:",t,e),Sf(e,t);if(e instanceof rf)return function(e,t){if(!cf(t.Da))throw t.Fa(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Fa(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Tf(i,t.Oa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,I.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ks(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ri.fromDate(e);return{timestampValue:Fo(t.N,n)}}if(e instanceof ri){const n=new ri(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Fo(t.N,n)}}if(e instanceof sf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof nf)return{bytesValue:Mo(t.N,e._byteString)};if(e instanceof jd){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Fa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:jo(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa(`Unsupported field value: ${Ld(e)}`)}(e,t)}function Sf(e,t){const n={};return ai(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):oi(e,(e,r)=>{const i=Tf(r,t.Na(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Ef(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ri||e instanceof sf||e instanceof nf||e instanceof jd||e instanceof rf)}function Cf(e,t,n){if(!Ef(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ld(n);throw t.Fa("an object"===r?e+" a custom object":e+" "+r)}}function kf(e,t,n){if((t=(0,I.m9)(t))instanceof tf)return t._internalPath;if("string"==typeof t)return xf(e,t);throw Nf("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const Af=new RegExp("[~\\*/\\[\\]]");function xf(e,t,n){if(t.search(Af)>=0)throw Nf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new tf(...t.split("."))._internalPath}catch(r){throw Nf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Nf(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Br(zr.INVALID_ARGUMENT,a+e+u)}function Rf(e,t){return e.some(e=>e.isEqual(t))}class Of{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Df(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Df extends Of{data(){return super.data()}}function Pf(e,t){return"string"==typeof t?xf(e,t):t instanceof tf?t._internalPath:t._delegate._internalPath}class Lf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ff extends Of{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Pf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Mf extends Ff{data(e={}){return super.data(e)}}class Uf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Lf(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Mf(this._firestore,this._userDataWriter,n.key,n,new Lf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Br(zr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new Mf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Lf(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Mf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Lf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Vf(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Vf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vr()}}function jf(e,t){return e instanceof Ff&&t instanceof Ff?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Uf&&t instanceof Uf&&e._firestore===t._firestore&&Gd(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function qf(e){if(ds(e)&&0===e.explicitOrderBy.length)throw new Br(zr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zf{}function Bf(e,...t){for(const n of t)e=n._apply(e);return e}class Hf extends zf{constructor(e,t,n){super(),this.Ka=e,this.ja=t,this.Qa=n,this.type="where"}_apply(e){const t=df(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Br(zr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){Yf(o,s);const t=[];for(const n of o)t.push(Qf(r,e,n));a={arrayValue:{values:t}}}else a=Qf(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Yf(o,s),a=If(n,"where",o,"in"===s||"not-in"===s);const u=Zi.create(i,s,a);return function(e,t){if(t.v()){const n=ps(e);if(null!==n&&!n.isEqual(t.field))throw new Br(zr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=fs(e);null!==r&&Jf(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new Br(zr.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,u),u}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new qd(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new us(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class $f extends zf{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Br(zr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Br(zr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new is(t,n);return function(e,t){if(null===fs(e)){const n=ps(e);null!==n&&Jf(0,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new qd(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new us(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Gf extends zf{constructor(e,t,n){super(),this.type=e,this.Ga=t,this.za=n}_apply(e){return new qd(e.firestore,e.converter,vs(e._query,this.Ga,this.za))}}class Zf extends zf{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=Wf(e,this.type,this.Ha,this.Ja);return new qd(e.firestore,e.converter,function(e,t){return new us(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Kf extends zf{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=Wf(e,this.type,this.Ha,this.Ja);return new qd(e.firestore,e.converter,function(e,t){return new us(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Wf(e,t,n,r){if(n[0]=(0,I.m9)(n[0]),n[0]instanceof Of)return function(e,t,n,r,i){if(!r)throw new Br(zr.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of ms(e))if(o.field.isKeyField())s.push(Oi(t,r.key));else{const e=r.data.field(o.field);if(vi(e))throw new Br(zr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Br(zr.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new ns(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=df(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Br(zr.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<i.length;u++){const s=i[u];if(o[u].field.isKeyField()){if("string"!=typeof s)throw new Br(zr.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!gs(e)&&-1!==s.indexOf("/"))throw new Br(zr.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(ci.fromString(s));if(!Si.isDocumentKey(n))throw new Br(zr.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new Si(n);a.push(Oi(t,i))}else{const e=If(n,r,s);a.push(e)}}return new ns(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Qf(e,t,n){if("string"==typeof(n=(0,I.m9)(n))){if(""===n)throw new Br(zr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!gs(t)&&-1!==n.indexOf("/"))throw new Br(zr.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ci.fromString(n));if(!Si.isDocumentKey(r))throw new Br(zr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Oi(e,new Si(r))}if(n instanceof jd)return Oi(e,n._key);throw new Br(zr.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ld(n)}.`)}function Yf(e,t){if(!Array.isArray(e)||0===e.length)throw new Br(zr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Br(zr.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Jf(e,t,n){if(!n.isEqual(t))throw new Br(zr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Xf{convertValue(e,t="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Vr()}}convertObject(e,t){const n={};return oi(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new sf(mi(e.latitude),mi(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=wi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(_i(e));default:return null}}convertTimestamp(e){const t=gi(e);return new ri(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ci.fromString(e);jr(ha(n));const r=new xd(n.get(1),n.get(3)),i=new Si(n.popFirst(5));return r.isEqual(t)||Fr(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function ep(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class tp extends Xf{constructor(e){super(),this.firestore=e}convertBytes(e){return new nf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jd(this.firestore,null,t)}}class np{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=df(e)}set(e,t,n){this._verifyNotCommitted();const r=rp(e,this._firestore),i=ep(r.converter,t,n),s=ff(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,zs.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=rp(e,this._firestore);let s;return s="string"==typeof(t=(0,I.m9)(t))||t instanceof tf?bf(this._dataReader,"WriteBatch.update",i._key,t,n,r):_f(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,zs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rp(e,this._firestore);return this._mutations=this._mutations.concat(new to(t._key,zs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Br(zr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rp(e,t){if((e=(0,I.m9)(e)).firestore!==t)throw new Br(zr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class ip extends Xf{constructor(e){super(),this.firestore=e}convertBytes(e){return new nf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jd(this.firestore,null,t)}}function sp(e,t,n){e=Fd(e,jd);const r=Fd(e.firestore,Qd),i=ep(e.converter,t,n);return up(r,[ff(df(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,zs.none())])}function op(e,t,n,...r){e=Fd(e,jd);const i=Fd(e.firestore,Qd),s=df(i);let o;return o="string"==typeof(t=(0,I.m9)(t))||t instanceof tf?bf(s,"updateDoc",e._key,t,n,r):_f(s,"updateDoc",e._key,t),up(i,[o.toMutation(e._key,zs.exists(!0))])}function ap(e,...t){var n,r,i;e=(0,I.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Kd(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Kd(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,c,l;if(e instanceof jd)c=Fd(e.firestore,Qd),l=ls(e._key.path),u={next:n=>{t[o]&&t[o](cp(c,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Fd(e,qd);c=Fd(n.firestore,Qd),l=n._query;const r=new ip(c);u={next:e=>{t[o]&&t[o](new Uf(c,r,n,e))},error:t[o+1],complete:t[o+2]},qf(e._query)}return function(e,t,n,r){const i=new ad(r),s=new Xl(t,i,n);return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return Gl(yield Sd(e),s)})),()=>{i.Xo(),e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return Kl(yield Sd(e),s)}))}}(Yd(c),l,a,u)}function up(e,t){return function(e,t){const n=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(e,t,n){return mh.apply(this,arguments)}(yield Td(e),t,n)})),n.promise}(Yd(e),t)}function cp(e,t,n){const r=n.docs.get(t._key),i=new ip(e);return new Ff(e,i,t._key,r,new Lf(n.hasPendingWrites,n.fromCache),t.converter)}class lp extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=df(e)}get(e){const t=rp(e,this._firestore),n=new tp(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Vr();const r=e[0];if(r.isFoundDocument())return new Of(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Of(this._firestore,n,t._key,null,t.converter);throw Vr()})}set(e,t,n){const r=rp(e,this._firestore),i=ep(r.converter,t,n),s=ff(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=rp(e,this._firestore);let s;return s="string"==typeof(t=(0,I.m9)(t))||t instanceof tf?bf(this._dataReader,"Transaction.update",i._key,t,n,r):_f(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=rp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rp(e,this._firestore),n=new ip(this._firestore);return super.get(e).then(e=>new Ff(this._firestore,n,t._key,e._document,new Lf(!1,!1),t.converter))}}function hp(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Br("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function dp(){if("undefined"==typeof Uint8Array)throw new Br("unimplemented","Uint8Arrays are not available in this environment.")}function fp(){if("undefined"==typeof atob)throw new Br("unimplemented","Blobs are unavailable in Firestore in this environment.")}Or=w.SDK_VERSION,(0,w._registerComponent)(new _.wA("firestore",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=new Qd(n,new Kr(e.getProvider("auth-internal")));return t=Object.assign({useFetchStreams:!0},t),r._setSettings(t),r},"PUBLIC")),(0,w.registerVersion)("@firebase/firestore","3.0.2",void 0);class pp{constructor(e){this._delegate=e}static fromBase64String(e){return fp(),new pp(nf.fromBase64String(e))}static fromUint8Array(e){return dp(),new pp(nf.fromUint8Array(e))}toBase64(){return fp(),this._delegate.toBase64()}toUint8Array(){return dp(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class mp{enableIndexedDbPersistence(e,t){return function(e,t){ef(e=Fd(e,Qd));const n=Yd(e),r=e._freezeSettings(),i=new sd;return Xd(n,i,new rd(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){ef(e=Fd(e,Qd));const t=Yd(e),n=e._freezeSettings(),r=new sd;return Xd(t,r,new id(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Br(zr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Hr;return e._queue.enqueueAndForgetEvenWhileRestricted((0,v.Z)(function*(){try{yield(n=(0,v.Z)(function*(e){if(!Ma.bt())return Promise.resolve();const t=e+"main";yield Ma.delete(t)}),function(e){return n.apply(this,arguments)})(Wu(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var n})),t.promise}(e._delegate)}}class yp{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof xd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Mr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=Fd(e,Vd))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Mr("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Rr.MOCK_USER;else{t=(0,I.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Br(zr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Rr(s)}e._credentials=new Zr(new $r(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return e.asyncQueue.enqueue((0,v.Z)(function*(){const t=yield _d(e),n=yield Id(e);return t.setNetworkEnabled(!0),function(e){const t=qr(e);return t.Kr.delete(0),el(t)}(n)}))}(Yd(Fd(this._delegate,Qd)))}disableNetwork(){return function(e){return e.asyncQueue.enqueue((0,v.Z)(function*(){const t=yield _d(e),n=yield Id(e);return t.setNetworkEnabled(!1),(r=(0,v.Z)(function*(e){const t=qr(e);t.Kr.add(0),yield nl(t),t.Wr.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(Yd(Fd(this._delegate,Qd)))}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Od("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){const t=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(e,t){return Ch.apply(this,arguments)}(yield Td(e),t)})),t.promise}(Yd(Fd(this._delegate,Qd)))}onSnapshotsInSync(e){return t=e,function(e,t){const n=new ad(t);return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(e,t){qr(e).Zr.add(t),t.next()}(yield Sd(e),n)})),()=>{n.Xo(),e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(e,t){qr(e).Zr.delete(t)}(yield Sd(e),n)}))}}(Yd(Fd(this._delegate,Qd)),Kd(t)?t:{next:t});var t}get app(){if(!this._appCompat)throw new Br("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Rp(this,Bd(this._delegate,e))}catch(t){throw Tp(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ip(this,Hd(this._delegate,e))}catch(t){throw Tp(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ap(this,function(e,t){if(e=Fd(e,Vd),Rd("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Br(zr.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qd(e,null,function(e){return new us(ci.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Tp(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return n=t=>e(new wp(this,t)),function(e,t){const n=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){const r=yield function(e){return vd(e).then(e=>e.datastore)}(e);new ld(e.asyncQueue,r,t,n).run()})),n.promise}(Yd(t=this._delegate),e=>n(new lp(t,e)));var t,n}batch(){return Yd(this._delegate),new _p(new np(this._delegate,e=>up(this._delegate,e)))}loadBundle(e){return function(e,t){const n=Yd(e=Fd(e,Qd)),r=new Wd;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new ud(e,t)}(function(e,t){if(e instanceof Uint8Array)return od(e,t);if(e instanceof ArrayBuffer)return od(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Gc(t));e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){!function(e,t,n){const r=qr(e);var i;(i=(0,v.Z)(function*(e,t,n){try{const r=yield t.getMetadata();if(yield function(e,t){const n=qr(e),r=Vo(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Je.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return yield t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r));n._updateProgress(rh(r));const i=new nh(r,e.localStore,t.N);let s=yield t.Qo();for(;s;){const e=yield i.fo(s);e&&n._updateProgress(e),s=yield t.Qo()}const o=yield i.complete();yield Ph(e,o.Tn,void 0),yield function(e,t){const n=qr(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Je.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress)}catch(e){Mr("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e)}}),function(e,t,n){return i.apply(this,arguments)})(r,t,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield Td(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return(t=this._delegate,n=e,function(e,t){return e.asyncQueue.enqueue((0,v.Z)(function*(){return function(e,t){const n=qr(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Je.getNamedQuery(e,t))}(yield bd(e),t)}))}(Yd(t=Fd(t,Qd)),n).then(e=>e?new qd(t,null,e.query):null)).then(e=>e?new Ap(this,e):null);var t,n}}class vp extends Xf{constructor(e){super(),this.firestore=e}convertBytes(e){return new pp(new nf(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ip.forKey(t,this.firestore,null)}}class wp{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new vp(e)}get(e){const t=Op(e);return this._delegate.get(t).then(e=>new Cp(this._firestore,new Ff(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=Op(e);return n?(hp("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=Op(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=Op(e);return this._delegate.delete(t),this}}class _p{constructor(e){this._delegate=e}set(e,t,n){const r=Op(e);return n?(hp("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=Op(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=Op(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class bp{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Mf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kp(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=bp.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new bp(e,new vp(e),t),r.set(t,i)),i}}bp.INSTANCES=new WeakMap;class Ip{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vp(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Br("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ip(t,new jd(t._delegate,n,new Si(e)))}static forKey(e,t,n){return new Ip(t,new jd(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Rp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Rp(this.firestore,Bd(this._delegate,e))}catch(t){throw Tp(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,I.m9)(e))instanceof jd&&$d(this._delegate,e)}set(e,t){t=hp("DocumentReference.set",t);try{return t?sp(this._delegate,e,t):sp(this._delegate,e)}catch(n){throw Tp(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?op(this._delegate,e):op(this._delegate,e,t,...n)}catch(r){throw Tp(r,"updateDoc()","DocumentReference.update()")}}delete(){return up(Fd((e=this._delegate).firestore,Qd),[new to(e._key,zs.none())]);var e}onSnapshot(...e){const t=Sp(e),n=Ep(e,e=>new Cp(this.firestore,new Ff(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return ap(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Fd(e,jd);const t=Fd(e.firestore,Qd),n=Yd(t),r=new ip(t);return function(e,t){const n=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return(r=(0,v.Z)(function*(e,t,n){try{const r=yield function(e,t){const n=qr(e);return n.persistence.runTransaction("read document","readonly",e=>n.Qn.An(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Br(zr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=jl(e,`Failed to get document '${t} from cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield bd(e),t,n);var r})),n.promise}(n,e._key).then(n=>new Ff(t,r,e._key,n,new Lf(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Fd(e,jd);const t=Fd(e.firestore,Qd);return Cd(Yd(t),e._key,{source:"server"}).then(n=>cp(t,e,n))}(this._delegate):function(e){e=Fd(e,jd);const t=Fd(e.firestore,Qd);return Cd(Yd(t),e._key).then(n=>cp(t,e,n))}(this._delegate),t.then(e=>new Cp(this.firestore,new Ff(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new Ip(this.firestore,this._delegate.withConverter(e?bp.getInstance(this.firestore,e):null))}}function Tp(e,t,n){return e.message=e.message.replace(t,n),e}function Sp(e){for(const t of e)if("object"==typeof t&&!gp(t))return t;return{}}function Ep(e,t){var n,r;let i;return i=gp(e[0])?e[0]:gp(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Cp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ip(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jf(this._delegate,e._delegate)}}class kp extends Cp{data(e){const t=this._delegate.data(e);return void 0!==t||Vr(),t}}class Ap{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vp(e)}where(e,t,n){try{return new Ap(this.firestore,Bf(this._delegate,function(e,t,n){const r=t,i=Pf("where",e);return new Hf(i,r,n)}(e,t,n)))}catch(r){throw Tp(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ap(this.firestore,Bf(this._delegate,function(e,t="asc"){const n=t,r=Pf("orderBy",e);return new $f(r,n)}(e,t)))}catch(n){throw Tp(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ap(this.firestore,Bf(this._delegate,(Md("limit",t=e),new Gf("limit",t,"F"))))}catch(n){throw Tp(n,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Ap(this.firestore,Bf(this._delegate,(Md("limitToLast",t=e),new Gf("limitToLast",t,"L"))))}catch(n){throw Tp(n,"limitToLast()","Query.limitToLast()")}var t}startAt(...e){try{return new Ap(this.firestore,Bf(this._delegate,function(...e){return new Zf("startAt",e,!0)}(...e)))}catch(t){throw Tp(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ap(this.firestore,Bf(this._delegate,function(...e){return new Zf("startAfter",e,!1)}(...e)))}catch(t){throw Tp(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ap(this.firestore,Bf(this._delegate,function(...e){return new Kf("endBefore",e,!0)}(...e)))}catch(t){throw Tp(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ap(this.firestore,Bf(this._delegate,function(...e){return new Kf("endAt",e,!1)}(...e)))}catch(t){throw Tp(t,"endAt()","Query.endAt()")}}isEqual(e){return Gd(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Fd(e,qd);const t=Fd(e.firestore,Qd),n=Yd(t),r=new ip(t);return function(e,t){const n=new Hr;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return(r=(0,v.Z)(function*(e,t,n){try{const r=yield dc(e,t,!0),i=new oh(t,r.Gn),s=i.Io(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=jl(e,`Failed to execute query '${t} against cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield bd(e),t,n);var r})),n.promise}(n,e._query).then(n=>new Uf(t,r,e,n))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Fd(e,qd);const t=Fd(e.firestore,Qd),n=Yd(t),r=new ip(t);return kd(n,e._query,{source:"server"}).then(n=>new Uf(t,r,e,n))}(this._delegate):function(e){e=Fd(e,qd);const t=Fd(e.firestore,Qd),n=Yd(t),r=new ip(t);return qf(e._query),kd(n,e._query).then(n=>new Uf(t,r,e,n))}(this._delegate),t.then(e=>new Np(this.firestore,new Uf(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=Sp(e),n=Ep(e,e=>new Np(this.firestore,new Uf(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return ap(this._delegate,t,n)}withConverter(e){return new Ap(this.firestore,this._delegate.withConverter(e?bp.getInstance(this.firestore,e):null))}}class xp{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new kp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Np{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ap(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new kp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new xp(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new kp(this._firestore,n))})}isEqual(e){return jf(this._delegate,e._delegate)}}class Rp extends Ap{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ip(this.firestore,e):null}doc(e){try{return new Ip(this.firestore,void 0===e?Hd(this._delegate):Hd(this._delegate,e))}catch(t){throw Tp(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Fd(e.firestore,Qd),r=Hd(e),i=ep(e.converter,t);return up(n,[ff(df(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,zs.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new Ip(this.firestore,e))}isEqual(e){return $d(this._delegate,e._delegate)}withConverter(e){return new Rp(this.firestore,this._delegate.withConverter(e?bp.getInstance(this.firestore,e):null))}}function Op(e){return Fd(e,jd)}class Dp{constructor(...e){this._delegate=new tf(...e)}static documentId(){return new Dp(hi.keyField().canonicalString())}isEqual(e){return(e=(0,I.m9)(e))instanceof tf&&this._delegate._internalPath.isEqual(e._internalPath)}}class Pp{constructor(e){this._delegate=e}static serverTimestamp(){const e=new mf("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Pp(e)}static delete(){const e=new pf("deleteField");return e._methodName="FieldValue.delete",new Pp(e)}static arrayUnion(...e){const t=function(...e){return new yf("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new Pp(t)}static arrayRemove(...e){const t=function(...e){return new vf("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new Pp(t)}static increment(e){const t=new wf("increment",e);return t._methodName="FieldValue.increment",new Pp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Lp={Firestore:yp,GeoPoint:sf,Timestamp:ri,Blob:pp,Transaction:wp,WriteBatch:_p,DocumentReference:Ip,DocumentSnapshot:Cp,Query:Ap,QueryDocumentSnapshot:kp,QuerySnapshot:Np,CollectionReference:Rp,FieldPath:Dp,FieldValue:Pp,setLogLevel:function(e){Dr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};var Fp,Mp;Mp=(e,t)=>new yp(e,t,new mp),(Fp=y.Z).INTERNAL.registerComponent(new _.wA("firestore-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return Mp(t,n)},"PUBLIC").setServiceProps(Object.assign({},Lp))),Fp.registerVersion("@firebase/firestore-compat","0.1.2");var Up=n(3820),Vp=n(7841);function jp(e,t){return function(e,t=i.z){return new s.y(n=>{let r;return null!=t?t.schedule(()=>{r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(e,t)}function qp(e,t){return jp(e,t).pipe((0,h.U)(e=>({payload:e,type:"query"})))}function zp(e,t){return qp(e,t).pipe((0,c.O)(void 0),(0,l.G)(),(0,h.U)(([e,t])=>{const n=t.payload.docChanges(),r=n.map(e=>({type:e.type,payload:e}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((t,i)=>{const s=n.find(e=>e.doc.ref.isEqual(t.ref)),o=null==e?void 0:e.payload.docs.find(e=>e.ref.isEqual(t.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(t.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(t.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:t}})}),r}))}function Bp(e,t,n){return zp(e,n).pipe((0,d.R)((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return Hp(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return Hp(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return Hp(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(e=>e.payload),t),[]),(0,f.x)(),(0,h.U)(e=>e.map(e=>({type:e.type,payload:e}))))}function Hp(e,t,n,...r){const i=e.slice();return i.splice(t,n,...r),i}function $p(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}class Gp{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=zp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,h.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)))),t.pipe((0,c.O)(void 0),(0,l.G)(),(0,p.h)(([e,t])=>t.length>0||!e),(0,h.U)(([e,t])=>t),u.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,d.R)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=$p(e);return Bp(this.query,t,this.afs.schedulers.outsideAngular).pipe(u.iC)}valueChanges(e={}){return qp(this.query,this.afs.schedulers.outsideAngular).pipe((0,h.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),u.iC)}get(e){return(0,o.D)(this.query.get(e)).pipe(u.iC)}add(e){return this.ref.add(e)}doc(e){return new Zp(this.ref.doc(e),this.afs)}}class Zp{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=Xp(n,t);return new Gp(r,i,this.afs)}snapshotChanges(){return jp(this.ref,this.afs.schedulers.outsideAngular).pipe((0,c.O)(void 0),(0,l.G)(),(0,h.U)(([e,t])=>t.exists?(null==e?void 0:e.exists)?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"})).pipe(u.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,h.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,o.D)(this.ref.get(e)).pipe(u.iC)}}class Kp{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zp(this.query,this.afs.schedulers.outsideAngular).pipe((0,h.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)),(0,p.h)(e=>e.length>0),u.iC):zp(this.query,this.afs.schedulers.outsideAngular).pipe(u.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,d.R)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=$p(e);return Bp(this.query,t,this.afs.schedulers.outsideAngular).pipe(u.iC)}valueChanges(e={}){return qp(this.query,this.afs.schedulers.outsideAngular).pipe((0,h.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign({[e.idField]:t.id},t.data()):t.data())),u.iC)}get(e){return(0,o.D)(this.query.get(e)).pipe(u.iC)}}const Wp=new r.OlP("angularfire2.enableFirestorePersistence"),Qp=new r.OlP("angularfire2.firestore.persistenceSettings"),Yp=new r.OlP("angularfire2.firestore.settings"),Jp=new r.OlP("angularfire2.firestore.use-emulator");function Xp(e,t=(e=>e)){return{query:t(e),ref:e}}let eg=(()=>{class e{constructor(e,t,n,r,i,s,c,l,h,d,f,p,y,v,w,_){this.schedulers=c;const b=(0,g.on)(e,s,t),I=h;d&&(0,Up.nw)(b,s,f,y,v,w,p,_),[this.firestore,this.persistenceEnabled$]=(0,u.cc)(`${b.name}.firestore`,"AngularFirestore",b.name,()=>{const e=s.runOutsideAngular(()=>b.firestore());if(r&&e.settings(r),I&&e.useEmulator(...I),n&&!(0,m.PM)(i)){const t=()=>{try{return(0,o.D)(e.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,a.of)(!1)}};return[e,s.runOutsideAngular(t)]}return[e,(0,a.of)(!1)]},[r,I,n])}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=Xp(n,t),s=this.schedulers.ngZone.run(()=>r);return new Gp(s,i,this)}collectionGroup(e,t){const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new Kp(n(r),this)}doc(e){let t;t="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>t);return new Zp(n,this)}createId(){return this.firestore.collection("_").doc().id}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(g.Dh),r.LFG(g.xv,8),r.LFG(Wp,8),r.LFG(Yp,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(u.HU),r.LFG(Qp,8),r.LFG(Jp,8),r.LFG(Up.zQ,8),r.LFG(Up.Qv,8),r.LFG(Up.L6,8),r.LFG(Up._Q,8),r.LFG(Up.rT,8),r.LFG(Up.lh,8),r.LFG(Up.f7,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),tg=(()=>{class e{constructor(){Vp.Z.registerVersion("angularfire",u.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:e,providers:[{provide:Wp,useValue:!0},{provide:Qp,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[eg]}),e})()},8939:(e,t,n)=>{"use strict";n.d(t,{hO:()=>g,xv:()=>h,Dh:()=>l,GT:()=>u,on:()=>d,pX:()=>a});var r=n(3018),i=n(7841),s=n(9126);e=n.hmd(e);const o=["ngOnDestroy"],a=(e,t,n,r={})=>new Proxy(e,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(e[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,e[s]),e[s];if(o.indexOf(s)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[s];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const i=e&&e(...n);return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(s,n,i),i})})})}),u=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class c{constructor(e){return e}}const l=new r.OlP("angularfire2.app.options"),h=new r.OlP("angularfire2.app.name");function d(t,n,r){const s="object"==typeof r&&r||{};s.name=s.name||"string"==typeof r&&r||"[DEFAULT]";const o=i.Z.apps.filter(e=>e&&e.name===s.name)[0]||n.runOutsideAngular(()=>i.Z.initializeApp(t,s));try{JSON.stringify(t)!==JSON.stringify(o.options)&&f("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new c(o)}const f=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)},p={provide:c,useFactory:d,deps:[l,r.R0b,[new r.FiY,h]]};let g=(()=>{class e{constructor(e){i.Z.registerVersion("angularfire",s.q4.full,"core"),i.Z.registerVersion("angularfire",s.q4.full,"app-compat"),i.Z.registerVersion("angular",r.q4F.full,e.toString())}static initializeApp(t,n){return{ngModule:e,providers:[{provide:l,useValue:t},{provide:h,useValue:n}]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[p]}),e})()},9126:(e,t,n)=>{"use strict";n.d(t,{q4:()=>c,iC:()=>v,HU:()=>m,cc:()=>d});var r=n(3018);(0,n(5452).registerVersion)("firebase","9.0.2","app");var i=n(7771),s=n(3637),o=n(3342),a=n(9673),u=n(309);e=n.hmd(e);const c=new r.GfV("7.0.4"),l=!!e.hot,h=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};function d(e,t,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(i,o)||(h("error",`${t} was already initialized on the ${n} Firebase App with different settings.${l?" You may need to reload as Firebase is not HMR aware.":""}`),h("warn",{is:i,was:o})),s;{const t=r();return globalThis.\u0275AngularfireInstanceCache.push([e,t,i]),t}}function f(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class p{constructor(e,t=i.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class g{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",f,{},f,f)),t.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let m=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new p(Zone.current)),this.insideAngular=e.run(()=>new p(Zone.current,s.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function y(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("AngularFireModule has not been provided");return e}function v(e){return y(),(t=y(),function(e){return(e=e.lift(new g(t.ngZone))).pipe((0,a.R)(t.outsideAngular),(0,u.QV)(t.insideAngular))})(e);var t}},5496:(e,t,n)=>{"use strict";n.d(t,{F0:()=>An,Od:()=>On,yS:()=>Nn,Bz:()=>Bn,lC:()=>Dn});var r=n(8583),i=n(3018),s=n(4869),o=n(9796),a=n(7393);class u extends a.L{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class c extends a.L{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var l=n(7444),h=n(7574);function d(e,t,n,r,i=new c(e,n,r)){if(!i.closed)return t instanceof h.y?t.subscribe(i):(0,l.s)(t)(i)}var f=n(6693);const p={};class g{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new m(e,this.resultSelector))}}class m extends u{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(p),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(d(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,i=this.toRespond?r[n]===p?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}var y=n(4402),v=n(9193);function w(e){return new h.y(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,y.D)(n):(0,v.c)()).subscribe(t)})}var _=n(5917),b=n(6215),I=n(3410),T=n(8071),S=n(2441),E=n(9765),C=n(5345);function k(e){return function(t){const n=new A(e),r=t.lift(n);return n.caught=r}}class A{constructor(e){this.selector=e}call(e,t){return t.subscribe(new x(e,this.selector,this.caught))}}class x extends C.Ds{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new C.IY(this);this.add(r);const i=(0,C.ft)(n,r);i!==r&&this.add(i)}}}var N=n(9773);function R(e,t){return(0,N.zg)(e,t,1)}var O=n(5435),D=n(7108);function P(e){return function(t){return 0===e?(0,v.c)():t.lift(new L(e))}}class L{constructor(e){if(this.total=e,this.total<0)throw new D.W}call(e,t){return t.subscribe(new F(e,this.total))}}class F extends a.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}var M=n(4635),U=n(5242),V=n(4487),j=n(5319);class q{constructor(e){this.callback=e}call(e,t){return t.subscribe(new z(e,this.callback))}}class z extends a.L{constructor(e,t){super(e),this.add(new j.w(t))}}var B=n(8002),H=n(3190),$=n(5257),G=n(9761),Z=n(2145),K=n(8049),W=n(3342),Q=n(1307),Y=n(3282);class J{constructor(e,t){this.id=e,this.url=t}}class X extends J{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ee extends J{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class te extends J{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ne extends J{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class re extends J{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ie extends J{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class se extends J{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class oe extends J{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ae extends J{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ue{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ce{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class le{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class he{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class de{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fe{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pe{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ge="primary";class me{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ye(e){return new me(e)}function ve(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function we(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function _e(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!be(e[i],t[i]))return!1;return!0}function be(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function Ie(e){return Array.prototype.concat.apply([],e)}function Te(e){return e.length>0?e[e.length-1]:null}function Se(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Ee(e){return(0,i.CqO)(e)?e:(0,i.QGY)(e)?(0,y.D)(Promise.resolve(e)):(0,_.of)(e)}const Ce={exact:function e(t,n,r){if(!Le(t.segments,n.segments))return!1;if(!Re(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i],r))return!1}return!0},subset:xe},ke={exact:function(e,t){return _e(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>be(e[n],t[n]))},ignored:()=>!0};function Ae(e,t,n){return Ce[n.paths](e.root,t.root,n.matrixParams)&&ke[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function xe(e,t,n){return Ne(e,t,t.segments,n)}function Ne(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!!Le(i,n)&&!t.hasChildren()&&!!Re(i,n,r)}if(e.segments.length===n.length){if(!Le(e.segments,n))return!1;if(!Re(e.segments,n,r))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!xe(e.children[n],t.children[n],r))return!1}return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!Le(e.segments,i)&&!!Re(e.segments,i,r)&&!!e.children.primary&&Ne(e.children.primary,t,s,r)}}function Re(e,t,n){return t.every((t,r)=>ke[n](e[r].parameters,t.parameters))}class Oe{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ye(this.queryParams)),this._queryParamMap}toString(){return Ue.serialize(this)}}class De{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Se(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ve(this)}}class Pe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ye(this.parameters)),this._parameterMap}toString(){return Ge(this)}}function Le(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class Fe{}class Me{parse(e){const t=new Ye(e);return new Oe(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`/${je(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${ze(t)}=${ze(e)}`).join("&"):`${ze(t)}=${ze(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const Ue=new Me;function Ve(e){return e.segments.map(e=>Ge(e)).join("/")}function je(e,t){if(!e.hasChildren())return Ve(e);if(t){const t=e.children.primary?je(e.children.primary,!1):"",n=[];return Se(e.children,(e,t)=>{t!==ge&&n.push(`${t}:${je(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return Se(e.children,(e,r)=>{r===ge&&(n=n.concat(t(e,r)))}),Se(e.children,(e,r)=>{r!==ge&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>n===ge?[je(e.children.primary,!1)]:[`${n}:${je(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${Ve(e)}/${t[0]}`:`${Ve(e)}/(${t.join("//")})`}}function qe(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ze(e){return qe(e).replace(/%3B/gi,";")}function Be(e){return qe(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function He(e){return decodeURIComponent(e)}function $e(e){return He(e.replace(/\+/g,"%20"))}function Ge(e){return`${Be(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${Be(e)}=${Be(t[e])}`).join("")}`;var t}const Ze=/^[^\/()?;=#]+/;function Ke(e){const t=e.match(Ze);return t?t[0]:""}const We=/^[^=?&#]+/,Qe=/^[^?&#]+/;class Ye{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new De(e,t)),n}parseSegment(){const e=Ke(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Pe(He(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ke(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=Ke(this.remaining);e&&(n=e,this.capture(n))}e[He(t)]=He(n)}parseQueryParam(e){const t=function(e){const t=e.match(We);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Qe);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=$e(t),i=$e(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Ke(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=ge);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s.primary:new De([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Je{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Xe(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Xe(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=et(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return et(e,this._root).map(e=>e.value)}}function Xe(e,t){if(e===t.value)return t;for(const n of t.children){const t=Xe(e,n);if(t)return t}return null}function et(e,t){if(e===t.value)return[t];for(const n of t.children){const r=et(e,n);if(r.length)return r.unshift(t),r}return[]}class tt{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function nt(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class rt extends Je{constructor(e,t){super(e),this.snapshot=t,ct(this,e)}toString(){return this.snapshot.toString()}}function it(e,t){const n=function(e,t){const n=new at([],{},{},"",{},ge,t,null,e.root,-1,{});return new ut("",new tt(n,[]))}(e,t),r=new b.X([new Pe("",{})]),i=new b.X({}),s=new b.X({}),o=new b.X({}),a=new b.X(""),u=new st(r,i,o,a,s,ge,t,n.root);return u.snapshot=n.root,new rt(new tt(u,[]),n)}class st{constructor(e,t,n,r,i,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,B.U)(e=>ye(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,B.U)(e=>ye(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ot(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class at{constructor(e,t,n,r,i,s,o,a,u,c,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ye(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ye(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ut extends Je{constructor(e,t){super(t),this.url=e,ct(this,t)}toString(){return lt(this._root)}}function ct(e,t){t.value._routerState=e,t.children.forEach(t=>ct(e,t))}function lt(e){const t=e.children.length>0?` { ${e.children.map(lt).join(", ")} } `:"";return`${e.value}${t}`}function ht(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,_e(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),_e(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!_e(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),_e(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function dt(e,t){var n,r;return _e(e.params,t.params)&&Le(n=e.url,r=t.url)&&n.every((e,t)=>_e(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||dt(e.parent,t.parent))}function ft(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return ft(e,t,r);return ft(e,t)})}(e,t,n);return new tt(r,i)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return pt(t,e),e}}const n=new st(new b.X((r=t.value).url),new b.X(r.params),new b.X(r.queryParams),new b.X(r.fragment),new b.X(r.data),r.outlet,r.component,r),i=t.children.map(t=>ft(e,t));return new tt(n,i)}var r}function pt(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)pt(e.children[n],t.children[n])}function gt(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function mt(e){return"object"==typeof e&&null!=e&&e.outlets}function yt(e,t,n,r,i){let s={};return r&&Se(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new Oe(n.root===e?t:vt(n.root,e,t),s,i)}function vt(e,t,n){const r={};return Se(e.children,(e,i)=>{r[i]=e===t?n:vt(e,t,n)}),new De(e.segments,r)}class wt{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&gt(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(mt);if(r&&r!==Te(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _t{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function bt(e,t,n){if(e||(e=new De([],{})),0===e.segments.length&&e.hasChildren())return It(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],o=n[r];if(mt(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Ct(a,u,t))return s;r+=2}else{if(!Ct(a,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new De(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new De(e.segments.slice(r.pathIndex),e.children),It(t,0,i)}return r.match&&0===i.length?new De(e.segments,{}):r.match&&!e.hasChildren()?Tt(e,t,n):r.match?It(e,0,i):Tt(e,t,n)}function It(e,t,n){if(0===n.length)return new De(e.segments,{});{const r=function(e){return mt(e[0])?e[0].outlets:{[ge]:e}}(n),i={};return Se(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=bt(e.children[r],t,n))}),Se(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new De(e.segments,i)}}function Tt(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(mt(s)){const e=St(s.outlets);return new De(r,e)}if(0===i&&gt(n[0])){r.push(new Pe(e.segments[t].path,Et(n[0]))),i++;continue}const o=mt(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&gt(a)?(r.push(new Pe(o,Et(a))),i+=2):(r.push(new Pe(o,{})),i++)}return new De(r,{})}function St(e){const t={};return Se(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=Tt(new De([],{}),0,e))}),t}function Et(e){const t={};return Se(e,(e,n)=>t[n]=`${e}`),t}function Ct(e,t,n){return e==n.path&&_e(t,n.parameters)}class kt{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),ht(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=nt(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),Se(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=nt(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=nt(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new fe(e.value.snapshot))}),e.children.length&&this.forwardEvent(new he(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(ht(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),At(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function At(e){ht(e.value),e.children.forEach(At)}class xt{constructor(e,t){this.routes=e,this.module=t}}function Nt(e){return"function"==typeof e}function Rt(e){return e instanceof Oe}const Ot=Symbol("INITIAL_VALUE");function Dt(){return(0,H.w)(e=>function(...e){let t,n;return(0,s.K)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&(0,o.k)(e[0])&&(e=e[0]),(0,f.n)(e,n).lift(new g(t))}(e.map(e=>e.pipe((0,$.q)(1),(0,G.O)(Ot)))).pipe((0,Z.R)((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==Ot)return e;if(r===Ot&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||Rt(r))return r}return e},e)},Ot),(0,O.h)(e=>e!==Ot),(0,B.U)(e=>Rt(e)?e:!0===e),(0,$.q)(1)))}let Pt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&i._UZ(0,"router-outlet")},directives:function(){return[Dn]},encapsulation:2}),e})();function Lt(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];Ft(r,Mt(t,r))}}function Ft(e,t){e.children&&Lt(e.children,t)}function Mt(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Ut(e){const t=e.children&&e.children.map(Ut),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ge&&(n.component=Pt),n}function Vt(e){return e.outlet||ge}function jt(e,t){const n=e.filter(e=>Vt(e)===t);return n.push(...e.filter(e=>Vt(e)!==t)),n}const qt={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function zt(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},qt):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||we)(n,e,t);if(!i)return Object.assign({},qt);const s={};Se(i.posParams,(e,t)=>{s[t]=e.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Bt(e,t,n,r,i="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>Ht(e,t,n)&&Vt(n)!==ge)}(e,n,r)){const i=new De(t,function(e,t,n,r){const i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&Vt(s)!==ge){const n=new De([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[Vt(s)]=n}return i}(e,t,r,new De(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>Ht(e,t,n))}(e,n,r)){const s=new De(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(Ht(e,n,a)&&!i[Vt(a)]){const n=new De([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[Vt(a)]=n}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new De(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function Ht(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function $t(e,t,n,r){return!!(Vt(e)===r||r!==ge&&Ht(t,n,e))&&("**"===e.path||zt(t,e,n).matched)}function Gt(e,t,n){return 0===t.length&&!e.children[n]}class Zt{constructor(e){this.segmentGroup=e||null}}class Kt{constructor(e){this.urlTree=e}}function Wt(e){return new h.y(t=>t.error(new Zt(e)))}function Qt(e){return new h.y(t=>t.error(new Kt(e)))}function Yt(e){return new h.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Jt{constructor(e,t,n,r,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(i.h0i)}apply(){const e=Bt(this.urlTree.root,[],[],this.config).segmentGroup,t=new De(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ge).pipe((0,B.U)(e=>this.createUrlTree(Xt(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(k(e=>{if(e instanceof Kt)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof Zt)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ge).pipe((0,B.U)(t=>this.createUrlTree(Xt(t),e.queryParams,e.fragment))).pipe(k(e=>{if(e instanceof Zt)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new De([],{[ge]:e}):e;return new Oe(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,B.U)(e=>new De([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,y.D)(r).pipe(R(r=>{const i=n.children[r],s=jt(t,r);return this.expandSegmentGroup(e,s,i,r).pipe((0,B.U)(e=>({segment:e,outlet:r})))}),(0,Z.R)((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?(0,O.h)((t,n)=>e(t,n,r)):V.y,P(1),n?(0,U.d)(t):(0,M.T)(()=>new I.K))}())}expandSegment(e,t,n,r,i,s){return(0,y.D)(n).pipe(R(o=>this.expandSegmentAgainstRoute(e,t,n,o,r,i,s).pipe(k(e=>{if(e instanceof Zt)return(0,_.of)(null);throw e}))),(0,K.P)(e=>!!e),k((e,n)=>{if(e instanceof I.K||"EmptyError"===e.name){if(Gt(t,r,i))return(0,_.of)(new De([],{}));throw new Zt(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,i,s,o){return $t(r,t,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):Wt(t):Wt(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Qt(i):this.lineralizeSegments(n,i).pipe((0,N.zg)(n=>{const i=new De(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=zt(t,r,i);if(!o)return Wt(t);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Qt(l):this.lineralizeSegments(r,l).pipe((0,N.zg)(r=>this.expandSegment(e,t,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,_.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,B.U)(e=>(n._loadedConfig=e,new De(r,{})))):(0,_.of)(new De(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=zt(t,n,r);if(!s)return Wt(t);const u=r.slice(a);return this.getChildConfig(e,n,r).pipe((0,N.zg)(e=>{const r=e.module,s=e.routes,{segmentGroup:a,slicedSegments:c}=Bt(t,o,u,s),l=new De(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,B.U)(e=>new De(o,e)));if(0===s.length&&0===c.length)return(0,_.of)(new De(o,{}));const h=Vt(n)===i;return this.expandSegment(r,l,s,c,h?ge:i,!0).pipe((0,B.U)(e=>new De(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,_.of)(new xt(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,_.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,N.zg)(n=>n?this.configLoader.load(e.injector,t).pipe((0,B.U)(e=>(t._loadedConfig=e,e))):function(e){return new h.y(t=>t.error(ve(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):(0,_.of)(new xt([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return(0,_.of)(!0);const i=r.map(r=>{const i=e.get(r);let s;if(function(e){return e&&Nt(e.canLoad)}(i))s=i.canLoad(t,n);else{if(!Nt(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}return Ee(s)});return(0,_.of)(i).pipe(Dt(),(0,W.b)(e=>{if(!Rt(e))return;const t=ve(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,B.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,_.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Yt(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new Oe(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Se(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return Se(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new De(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function Xt(e){const t={};for(const n of Object.keys(e.children)){const r=Xt(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new De(e.segments.concat(t.segments),t.children)}return e}(new De(e.segments,t))}class en{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class tn{constructor(e,t){this.component=e,this.route=t}}function nn(e,t,n){const r=e._root;return sn(r,t?t._root:null,n,[r.value])}function rn(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function sn(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=nt(t);return e.children.forEach(e=>{!function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Le(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Le(e.url,t.url)||!_e(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dt(e,t)||!_e(e.queryParams,t.queryParams);case"paramsChange":default:return!dt(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new en(r)):(s.data=o.data,s._resolvedData=o._resolvedData),sn(e,t,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new tn(a.outlet.component,o))}else o&&on(t,a,i),i.canActivateChecks.push(new en(r)),sn(e,null,s.component?a?a.children:null:n,r,i)}(e,s[e.value.outlet],n,r.concat([e.value]),i),delete s[e.value.outlet]}),Se(s,(e,t)=>on(e,n.getContext(t),i)),i}function on(e,t,n){const r=nt(e),i=e.value;Se(r,(e,r)=>{on(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new tn(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class an{}function un(e){return new h.y(t=>t.error(e))}class cn{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const e=Bt(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ge);if(null===t)return null;const n=new at([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ge,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new tt(n,t),i=new ut(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,n=ot(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const i of Object.keys(t.children)){const r=t.children[i],s=jt(e,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=hn(n);return r.sort((e,t)=>e.value.outlet===ge?-1:t.value.outlet===ge?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,n,r){for(const i of e){const e=this.processSegmentAgainstRoute(i,t,n,r);if(null!==e)return e}return Gt(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!$t(e,t,n,r))return null;let i,s=[],o=[];if("**"===e.path){const r=n.length>0?Te(n).parameters:{};i=new at(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pn(e),Vt(e),e.component,e,dn(t),fn(t)+n.length,gn(e))}else{const r=zt(t,e,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new at(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pn(e),Vt(e),e.component,e,dn(t),fn(t)+s.length,gn(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:u,slicedSegments:c}=Bt(t,s,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const e=this.processChildren(a,u);return null===e?null:[new tt(i,e)]}if(0===a.length&&0===c.length)return[new tt(i,[])];const l=Vt(e)===r,h=this.processSegment(a,u,c,l?ge:r);return null===h?null:[new tt(i,h)]}}function ln(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function hn(e){const t=[],n=new Set;for(const r of e){if(!ln(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=hn(r.children);t.push(new tt(r.value,e))}return t.filter(e=>!n.has(e))}function dn(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function fn(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function pn(e){return e.data||{}}function gn(e){return e.resolve||{}}function mn(e){return(0,H.w)(t=>{const n=e(t);return n?(0,y.D)(n).pipe((0,B.U)(()=>t)):(0,_.of)(t)})}class yn extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const vn=new i.OlP("ROUTES");class wn{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,B.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new xt(Ie(r.injector.get(vn,void 0,i.XFs.Self|i.XFs.Optional)).map(Ut),r)}),k(e=>{throw t._loader$=void 0,e}));return t._loader$=new S.c(n,()=>new E.xQ).pipe((0,Q.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,y.D)(this.loader.load(e)):Ee(e()).pipe((0,N.zg)(e=>e instanceof i.YKP?(0,_.of)(e):(0,y.D)(this.compiler.compileModuleAsync(e))))}}class _n{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new bn,this.attachRef=null}}class bn{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new _n,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class In{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Tn(e){throw e}function Sn(e,t,n){return t.parse("/")}function En(e,t){return(0,_.of)(null)}const Cn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let An=(()=>{class e{constructor(e,t,n,r,s,o,a,u){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new E.xQ,this.errorHandler=Tn,this.malformedUriErrorHandler=Sn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:En,afterPreactivation:En},this.urlHandlingStrategy=new In,this.routeReuseStrategy=new yn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(i.h0i),this.console=s.get(i.c2e);const c=s.get(i.R0b);this.isNgZoneEnabled=c instanceof i.R0b&&i.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Oe(new De([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new wn(o,a,e=>this.triggerEvent(new ue(e)),e=>this.triggerEvent(new ce(e))),this.routerState=it(this.currentUrlTree,this.rootComponentType),this.transitions=new b.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const t=this.events;return e.pipe((0,O.h)(e=>0!==e.id),(0,B.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),(0,H.w)(e=>{let n=!1,r=!1;return(0,_.of)(e).pipe((0,W.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,H.w)(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,_.of)(e).pipe((0,H.w)(e=>{const n=this.transitions.getValue();return t.next(new X(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?v.E:Promise.resolve(e)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,(0,H.w)(e=>function(e,t,n,r,i){return new Jt(e,t,n,r,i).apply()}(r,i,s,e.extractedUrl,o).pipe((0,B.U)(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),(0,W.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return(0,N.zg)(s=>function(e,t,n,r,i="emptyOnly",s="legacy"){try{const o=new cn(e,t,n,r,i,s).recognize();return null===o?un(new an):(0,_.of)(o)}catch(o){return un(o)}}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,B.U)(e=>Object.assign(Object.assign({},s),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,W.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new re(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=e,a=new X(n,this.serializeUrl(r),i,s);t.next(a);const u=it(r,this.rootComponentType).snapshot;return(0,_.of)(Object.assign(Object.assign({},e),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),v.E}),mn(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,W.b)(e=>{const t=new ie(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,B.U)(e=>Object.assign(Object.assign({},e),{guards:nn(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,N.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,_.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,y.D)(e).pipe((0,N.zg)(e=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,_.of)(!0);const o=s.map(s=>{const o=rn(s,t,i);let a;if(function(e){return e&&Nt(e.canDeactivate)}(o))a=Ee(o.canDeactivate(e,t,n,r));else{if(!Nt(o))throw new Error("Invalid CanDeactivate guard");a=Ee(o(e,t,n,r))}return a.pipe((0,K.P)())});return(0,_.of)(o).pipe(Dt())}(e.component,e.route,n,t,r)),(0,K.P)(e=>!0!==e,!0))}(o,r,i,e).pipe((0,N.zg)(n=>n&&"boolean"==typeof n?function(e,t,n,r){return(0,y.D)(t).pipe(R(t=>(0,T.z)(function(e,t){return null!==e&&t&&t(new le(e)),(0,_.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new de(e)),(0,_.of)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>w(()=>{const i=t.guards.map(i=>{const s=rn(i,t.node,n);let o;if(function(e){return e&&Nt(e.canActivateChild)}(s))o=Ee(s.canActivateChild(r,e));else{if(!Nt(s))throw new Error("Invalid CanActivateChild guard");o=Ee(s(r,e))}return o.pipe((0,K.P)())});return(0,_.of)(i).pipe(Dt())}));return(0,_.of)(i).pipe(Dt())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,_.of)(!0);const i=r.map(r=>w(()=>{const i=rn(r,t,n);let s;if(function(e){return e&&Nt(e.canActivate)}(i))s=Ee(i.canActivate(t,e));else{if(!Nt(i))throw new Error("Invalid CanActivate guard");s=Ee(i(t,e))}return s.pipe((0,K.P)())}));return(0,_.of)(i).pipe(Dt())}(e,t.route,n))),(0,K.P)(e=>!0!==e,!0))}(r,s,e,t):(0,_.of)(n)),(0,B.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,W.b)(e=>{if(Rt(e.guardsResult)){const t=ve(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new se(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),(0,O.h)(e=>!!e.guardsResult||(this.restoreHistory(e),this.cancelNavigationTransition(e,""),!1)),mn(e=>{if(e.guards.canActivateChecks.length)return(0,_.of)(e).pipe((0,W.b)(e=>{const t=new oe(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,H.w)(e=>{let t=!1;return(0,_.of)(e).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,N.zg)(e=>{const{targetSnapshot:t,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,_.of)(e);let s=0;return(0,y.D)(i).pipe(R(e=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return(0,_.of)({});const s={};return(0,y.D)(i).pipe((0,N.zg)(i=>function(e,t,n,r){const i=rn(e,t,r);return Ee(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,W.b)(e=>{s[i]=e}))),P(1),(0,N.zg)(()=>Object.keys(s).length===i.length?(0,_.of)(s):v.E))}(e._resolve,e,t,r).pipe((0,B.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),ot(e,n).resolve),null)))}(e.route,t,n,r)),(0,W.b)(()=>s++),P(1),(0,N.zg)(t=>s===i.length?(0,_.of)(e):v.E))})),(0,W.b)({next:()=>t=!0,complete:()=>{t||(this.restoreHistory(e),this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}));var n,r}),(0,W.b)(e=>{const t=new ae(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),mn(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,B.U)(e=>{const t=function(e,t,n){const r=ft(e,t._root,n?n._root:void 0);return new rt(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,W.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=e=>this.triggerEvent(e),(0,B.U)(e=>(new kt(o,e.targetRouterState,e.currentRouterState,a).activate(s),e))),(0,W.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){const t=`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(e),this.cancelNavigationTransition(e,t)):this.cancelNavigationTransition(e,t)}this.currentNavigation=null},e=>e.lift(new q(i))),k(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Rt(n.url);r||(this.navigated=!0,this.restoreHistory(e,!0));const i=new te(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.restoreHistory(e,!0);const r=new ne(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(s){e.reject(s)}}var i;return v.E}));var i,s,o,a}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Lt(e),this.config=e.map(Ut),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=t,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,r,i){if(0===n.length)return yt(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new wt(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return Se(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new wt(n,t,r)}(n);if(s.toRoot())return yt(t.root,new De([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new _t(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new _t(e,e===t.root,0)}const r=gt(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new _t(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?It(o.segmentGroup,o.index,s.commands):bt(o.segmentGroup,o.index,s.commands);return yt(o.segmentGroup,a,t,r,i)}(a,this.currentUrlTree,e,c,null!=u?u:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=Rt(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},Cn):!1===t?Object.assign({},kn):t,Rt(e))return Ae(this.currentUrlTree,e,n);const r=this.parseUrl(e);return Ae(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new ee(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,i){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u="imperative"!==t&&"imperative"===(null==a?void 0:a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===e.toString();if(u&&c)return Promise.resolve(!0);let l,h,d;i?(l=i.resolve,h=i.reject,d=i.promise):d=new Promise((e,t)=>{l=e,h=t});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:l,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(e,t=!1){var n,r;if("computed"===this.canceledNavigationResolution){const t=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===t?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===t&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(t)}else"replace"===this.canceledNavigationResolution&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){const n=new te(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.DyG),i.LFG(Fe),i.LFG(bn),i.LFG(r.Ye),i.LFG(i.zs3),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(void 0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),xn=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.route=t,this.commands=[],this.onChanges=new E.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}onClick(){const e={skipLocationChange:Rn(this.skipLocationChange),replaceUrl:Rn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Rn(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(An),i.Y36(st),i.$8M("tabindex"),i.Y36(i.Qsj),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&i.NdJ("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[i.TTD]}),e})(),Nn=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.onChanges=new E.xQ,this.subscription=e.events.subscribe(e=>{e instanceof ee&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r,i){if(0!==e||t||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:Rn(this.skipLocationChange),replaceUrl:Rn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Rn(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(An),i.Y36(st),i.Y36(r.S$))},e.\u0275dir=i.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(i.Ikx("href",t.href,i.LSH),i.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[i.TTD]}),e})();function Rn(e){return""===e||!!e}let On=(()=>{class e{constructor(e,t,n,r,i,s){this.router=e,this.element=t,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe(e=>{e instanceof ee&&this.update()})}ngAfterContentInit(){(0,_.of)(this.links.changes,this.linksWithHrefs.changes,(0,_.of)(null)).pipe((0,Y.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(e=>!!e).map(e=>e.onChanges);this.linkInputChangesSubscription=(0,y.D)(t).pipe((0,Y.J)()).subscribe(e=>{this.isActive!==this.isLinkActive(this.router)(e)&&this.update()})}set routerLinkActive(e){const t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(t=>{e?this.renderer.addClass(this.element.nativeElement,t):this.renderer.removeClass(this.element.nativeElement,t)}))})}isLinkActive(e){const t="paths"in this.routerLinkActiveOptions?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return n=>e.isActive(n.urlTree,t)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(An),i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.sBO),i.Y36(xn,8),i.Y36(Nn,8))},e.\u0275dir=i.lG2({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){if(1&e&&(i.Suo(n,xn,5),i.Suo(n,Nn,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.links=e),i.iGM(e=i.CRH())&&(t.linksWithHrefs=e)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[i.TTD]}),e})(),Dn=(()=>{class e{constructor(e,t,n,r,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.vpe,this.deactivateEvents=new i.vpe,this.name=r||ge,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Pn(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(bn),i.Y36(i.s_b),i.Y36(i._Vd),i.$8M("name"),i.Y36(i.sBO))},e.\u0275dir=i.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class Pn{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===st?this.route:e===bn?this.childContexts:this.parent.get(e,t)}}class Ln{}class Fn{preload(e,t){return(0,_.of)(null)}}let Mn=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new wn(t,n,t=>e.triggerEvent(new ue(t)),t=>e.triggerEvent(new ce(t)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,O.h)(e=>e instanceof ee),R(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(i.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return(0,y.D)(n).pipe((0,Y.J)(),(0,B.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,_.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,N.zg)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(An),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(i.zs3),i.LFG(Ln))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),Un=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof X?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ee&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof pe&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new pe(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(An),i.LFG(r.EM),i.LFG(void 0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const Vn=new i.OlP("ROUTER_CONFIGURATION"),jn=new i.OlP("ROUTER_FORROOT_GUARD"),qn=[r.Ye,{provide:Fe,useClass:Me},{provide:An,useFactory:function(e,t,n,r,i,s,o,a={},u,c){const l=new An(null,e,t,n,r,i,s,Ie(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Fe,bn,r.Ye,i.zs3,i.v3s,i.Sil,vn,Vn,[class{},new i.FiY],[class{},new i.FiY]]},bn,{provide:st,useFactory:function(e){return e.routerState.root},deps:[An]},{provide:i.v3s,useClass:i.EAV},Mn,Fn,class{preload(e,t){return t().pipe(k(()=>(0,_.of)(null)))}},{provide:Vn,useValue:{enableTracing:!1}}];function zn(){return new i.PXZ("Router",An)}let Bn=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[qn,Zn(t),{provide:jn,useFactory:Gn,deps:[[An,new i.FiY,new i.tp0]]},{provide:Vn,useValue:n||{}},{provide:r.S$,useFactory:$n,deps:[r.lw,[new i.tBr(r.mr),new i.FiY],Vn]},{provide:Un,useFactory:Hn,deps:[An,r.EM,Vn]},{provide:Ln,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Fn},{provide:i.PXZ,multi:!0,useFactory:zn},[Kn,{provide:i.ip1,multi:!0,useFactory:Wn,deps:[Kn]},{provide:Yn,useFactory:Qn,deps:[Kn]},{provide:i.tb,multi:!0,useExisting:Yn}]]}}static forChild(t){return{ngModule:e,providers:[Zn(t)]}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(jn,8),i.LFG(An,8))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})();function Hn(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Un(e,t,n)}function $n(e,t,n={}){return n.useHash?new r.Do(e,t):new r.b0(e,t)}function Gn(e){return"guarded"}function Zn(e){return[{provide:i.deG,multi:!0,useValue:e},{provide:vn,multi:!0,useValue:e}]}let Kn=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new E.xQ}appInitializer(){return this.injector.get(r.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let e=null;const t=new Promise(t=>e=t),n=this.injector.get(An),r=this.injector.get(Vn);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,_.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(Vn),n=this.injector.get(Mn),r=this.injector.get(Un),s=this.injector.get(An),o=this.injector.get(i.z2F);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||s.initialNavigation(),n.setUpPreloading(),r.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.zs3))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function Wn(e){return e.appInitializer.bind(e)}function Qn(e){return e.bootstrapListener.bind(e)}const Yn=new i.OlP("Router Initializer")},4486:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(4685),i=n(6034),s=n(5452),o=n(300);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const u=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(t,a.name))return t[a.name];const u=new e(a,n);return t[a.name]=u,u},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw u.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function i(e){if(!(0,r.r3)(t,e=e||s._DEFAULT_ENTRY_NAME))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=c;(0,s.registerVersion)("@firebase/app-compat","0.1.1",void 0);const d=h},5452:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FirebaseError:()=>o.ZR,SDK_VERSION:()=>I,_DEFAULT_ENTRY_NAME:()=>l,_addComponent:()=>p,_addOrOverwriteComponent:()=>g,_apps:()=>d,_clearComponents:()=>w,_components:()=>f,_getProvider:()=>y,_registerComponent:()=>m,_removeServiceInstance:()=>v,deleteApp:()=>C,getApp:()=>S,getApps:()=>E,initializeApp:()=>T,onLog:()=>x,registerVersion:()=>A,setLogLevel:()=>N});var r=n(6304),i=n(6034),s=n(300),o=n(4685);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const u="@firebase/app",c=new s.Yd("@firebase/app"),l="[DEFAULT]",h={[u]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},d=new Map,f=new Map;function p(e,t){try{e.container.addComponent(t)}catch(n){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function g(e,t){e.container.addOrOverwriteComponent(t)}function m(e){const t=e.name;if(f.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;f.set(t,e);for(const n of d.values())p(n,e);return!0}function y(e,t){return e.container.getProvider(t)}function v(e,t,n=l){y(e,t).clearInstance(n)}function w(){f.clear()}const _=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class b{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _.create("app-deleted",{appName:this._name})}}const I="9.0.0";function T(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:l,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw _.create("bad-app-name",{appName:String(r)});const s=d.get(r);if(s){if((0,o.vZ)(e,s.options)&&(0,o.vZ)(n,s.config))return s;throw _.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const i of f.values())a.addComponent(i);const u=new b(e,n,a);return d.set(r,u),u}function S(e=l){const t=d.get(e);if(!t)throw _.create("no-app",{appName:e});return t}function E(){return Array.from(d.values())}function C(e){return k.apply(this,arguments)}function k(){return(k=(0,r.Z)(function*(e){const t=e.name;d.has(t)&&(d.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function A(e,t,n){var r;let s=null!==(r=h[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}m(new i.wA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}function x(e,t){if(null!==e&&"function"!=typeof e)throw _.create("invalid-log-argument");(0,s.Am)(e,t)}function N(e){(0,s.Ub)(e)}m(new i.wA("platform-logger",e=>new a(e),"PRIVATE")),A(u,"0.7.0",void 0),A("fire-js","")},6034:(e,t,n)=>{"use strict";n.d(t,{wA:()=>s,H0:()=>u});var r=n(4762),i=n(4685),s=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),o="[DEFAULT]",a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=o),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var e;return(0,r.Jh)(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),(0,r.CR)(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=o),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=o),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(d){t={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&e(s,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,s=this.onInitCallbacks.get(t);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var u=a.value;try{u(e,t)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===o?void 0:t),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=o),this.component?this.component.multipleInstances?e:o:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},300:(e,t,n)=>{"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(t,{in:()=>o,Yd:()=>h,Ub:()=>d,Am:()=>f});var s=[],o=(()=>(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={})),o))(),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var s=(new Date).toISOString(),o=c[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,r(["["+s+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?a[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function d(e){s.forEach(function(t){t.setLogLevel(e)})}function f(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=a[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:a,args:i,type:t.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},4685:(e,t,n)=>{"use strict";n.d(t,{BH:()=>c,LL:()=>T,ZR:()=>I,tV:()=>a,r3:()=>C,Sg:()=>l,ne:()=>D,vZ:()=>A,ZB:()=>u,pd:()=>O,m9:()=>F,z$:()=>h,jU:()=>p,ru:()=>g,d:()=>y,xb:()=>k,w1:()=>v,hl:()=>b,uI:()=>d,UG:()=>f,b$:()=>m,G6:()=>_,Mn:()=>w,xO:()=>N,zd:()=>R});var r=n(4762),i=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{s=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){var t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=u(e[n],t[n]));return e}var c=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();function l(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function f(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function p(){return"object"==typeof self&&self.self===self}function g(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return h().indexOf("Electron/")>=0}function v(){var e=h();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function w(){return h().indexOf("MSAppHost/")>=0}function _(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){return"indexedDB"in self&&null!=indexedDB}var I=function(e){function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,T.prototype.create),s}return(0,r.ZT)(t,e),t}(Error),T=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,s=this.errors[e],o=s?S(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new I(i,a,r);return u},e}();function S(e,t){return e.replace(E,function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"})}var E=/\{\$([^}]+)}/g;function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function A(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,s=n;i<s.length;i++){if(!r.includes(l=s[i]))return!1;var o=e[l],a=t[l];if(x(o)&&x(a)){if(!A(o,a))return!1}else if(o!==a)return!1}for(var u=0,c=r;u<c.length;u++){var l;if(!n.includes(l=c[u]))return!1}return!0}function x(e){return null!==e&&"object"==typeof e}function N(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var s=i[r];n(s[0],s[1])}return t.length?"&"+t.join("&"):""}function R(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("="),r=n[1];t[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),t}function O(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function D(e,t){var n=new P(e,t);return n.subscribe.bind(n)}!function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,s,o=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),s=1518500249):(i=a^u^c,s=1859775393):r<60?(i=a&u|c&(a|u),s=2400959708):(i=a^u^c,s=3395469782);var h=(o<<5|o>>>27)+i+l+s+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}();var P=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),s},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function L(){}function F(e){return e&&e._delegate?e._delegate:e}},7841:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r.Z});var r=n(4486);r.Z.registerVersion("firebase","9.0.2","app-compat")},6780:(e,t,n)=>{"use strict";n.r(t);var r=n(6304),i=n(4486),s=n(4685),o=n(5452),a=n(4762),u=n(300),c=n(6034);const l=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},h=new s.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new u.Yd("@firebase/auth");function f(e,...t){d.logLevel<=u.in.ERROR&&d.error(`Auth (${o.SDK_VERSION}): ${e}`,...t)}function p(e,...t){throw v(e,...t)}function g(e,...t){return v(e,...t)}function m(e,t,n){const r=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[t]:n});return new s.LL("auth","Firebase",r).create(t,{appName:e.name})}function y(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&p(e,"argument-error"),m(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function v(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return h.create(e,...t)}function w(e,t,...n){if(!e)throw v(t,...n)}function _(e){const t="INTERNAL ASSERTION FAILED: "+e;throw f(t),new Error(t)}function b(e,t){e||_(t)}const I=new Map;function T(e){b(e instanceof Function,"Expected a class definition");let t=I.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,I.set(e,t),t)}function S(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function E(){return"http:"===C()||"https:"===C()}function C(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.uI)()||(0,s.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(E()||(0,s.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function A(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class x{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},R=new k(3e4,6e4);function O(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function D(e,t,n,r){return P.apply(this,arguments)}function P(){return(P=(0,r.Z)(function*(e,t,n,r,i={}){return L(e,i,()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=(0,s.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),u=new(x.headers());return u.set("Content-Type","application/json"),u.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&u.set("X-Firebase-Locale",e.languageCode),x.fetch()(V(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},i))})})).apply(this,arguments)}function L(e,t,n){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},N),t);try{const t=new j(e),i=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw q(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw q(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw q(e,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw m(e,a,o);p(e,a)}}catch(i){if(i instanceof s.ZR)throw i;p(e,"network-request-failed")}})).apply(this,arguments)}function M(e,t,n,r){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(function*(e,t,n,r,i={}){const s=yield D(e,t,n,r,i);return"mfaPendingCredential"in s&&p(e,"multi-factor-auth-required",{serverResponse:s}),s})).apply(this,arguments)}function V(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?A(e.config,i):`${e.config.apiScheme}://${i}`}class j{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(g(this.auth,"timeout")),R.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function q(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=g(e,t,r);return i.customData._tokenResponse=n,i}function z(){return(z=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function B(e,t){return H.apply(this,arguments)}function H(){return(H=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function $(e,t){return G.apply(this,arguments)}function G(){return(G=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function Z(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function K(){return(K=(0,r.Z)(function*(e,t=!1){const n=(0,s.m9)(e),r=yield n.getIdToken(t),i=Q(r);w(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Z(W(i.auth_time)),issuedAtTime:Z(W(i.iat)),expirationTime:Z(W(i.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function W(e){return 1e3*Number(e)}function Q(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return f("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.tV)(n);return e?JSON.parse(e):(f("Failed to decode base64 JWT payload"),null)}catch(i){return f("Caught error parsing JWT payload as JSON",i),null}}function Y(e,t){return J.apply(this,arguments)}function J(){return(J=(0,r.Z)(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof s.ZR&&X(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function X({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class ee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,r.Z)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,r.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class te{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Z(this.lastLoginAt),this.creationTime=Z(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ne(e){return re.apply(this,arguments)}function re(){return(re=(0,r.Z)(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield Y(e,$(n,{idToken:r}));w(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?oe(s.providerUserInfo):[],a=se(e.providerData,o),u=!!e.isAnonymous&&!(e.email&&s.passwordHash||(null==a?void 0:a.length)),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new te(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,c)})).apply(this,arguments)}function ie(){return(ie=(0,r.Z)(function*(e){const t=(0,s.m9)(e);yield ne(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function se(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function oe(e){return e.map(e=>{var{providerId:t}=e,n=(0,a._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ae(){return(ae=(0,r.Z)(function*(e,t){const n=yield L(e,{},()=>{const n=(0,s.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=V(e,r,"/v1/token",`key=${i}`);return x.fetch()(o,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class ue{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){w(e.idToken,"internal-error"),w(void 0!==e.idToken,"internal-error"),w(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Q(e);return w(t,"internal-error"),w(void 0!==t.exp,"internal-error"),w(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return(0,r.Z)(function*(){return w(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,r.Z)(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(e,t){return ae.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ue;return n&&(w("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(w("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(w("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ue,this.toJSON())}_performRefresh(){return _("not implemented")}}function ce(e,t){w("string"==typeof e||void 0===e,"internal-error",{appName:t})}class le{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=(0,a._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.metadata=new te(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,r.Z)(function*(){const n=yield Y(t,t.stsTokenManager.getToken(t.auth,e));return w(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function(e){return K.apply(this,arguments)}(this,e)}reload(){return function(e){return ie.apply(this,arguments)}(this)}_assign(e){this!==e&&(w(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new le(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){w(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,r.Z)(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ne(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,r.Z)(function*(){const t=yield e.getIdToken();return yield Y(e,function(e,t){return z.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,u,c;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(u=t.createdAt)&&void 0!==u?u:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:b,providerData:I,stsTokenManager:T}=t;w(v&&T,e,"internal-error");const S=ue.fromJSON(this.name,T);w("string"==typeof v,e,"internal-error"),ce(l,e.name),ce(h,e.name),w("boolean"==typeof _,e,"internal-error"),w("boolean"==typeof b,e,"internal-error"),ce(d,e.name),ce(f,e.name),ce(p,e.name),ce(g,e.name),ce(m,e.name),ce(y,e.name);const E=new le({uid:v,auth:e,email:h,emailVerified:_,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:y});return I&&Array.isArray(I)&&(E.providerData=I.map(e=>Object.assign({},e))),g&&(E._redirectEventId=g),E}static _fromIdTokenResponse(e,t,n=!1){return(0,r.Z)(function*(){const r=new ue;r.updateFromServerResponse(t);const i=new le({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield ne(i),i})()}}const he=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,r.Z)(function*(){return!0})()}_set(e,t){var n=this;return(0,r.Z)(function*(){n.storage[e]=t})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return(0,r.Z)(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function de(e,t,n){return`firebase:${e}:${t}:${n}`}class fe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=de(this.userKey,r.apiKey,i),this.fullPersistenceKey=de("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,r.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?le._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,r.Z)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,r.Z)(function*(){if(!t.length)return new fe(T(he),e,n);const i=(yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let s=i[0]||T(he);const o=de(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=yield n._get(o);if(t){const r=le._fromJSON(e,t);n!==s&&(a=r),s=n;break}}catch(c){}const u=i.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(e!==s)try{yield e._remove(o)}catch(c){}});return function(t){return e.apply(this,arguments)}}())),new fe(s,e,n)):new fe(s,e,n)})()}}function pe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ve(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ge(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_e(t))return"Blackberry";if(be(t))return"Webos";if(me(t))return"Safari";if((t.includes("chrome/")||ye(t))&&!t.includes("edge/"))return"Chrome";if(we(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function ge(e=(0,s.z$)()){return/firefox\//i.test(e)}function me(e=(0,s.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ye(e=(0,s.z$)()){return/crios\//i.test(e)}function ve(e=(0,s.z$)()){return/iemobile/i.test(e)}function we(e=(0,s.z$)()){return/android/i.test(e)}function _e(e=(0,s.z$)()){return/blackberry/i.test(e)}function be(e=(0,s.z$)()){return/webos/i.test(e)}function Ie(e=(0,s.z$)()){return/iphone|ipad|ipod/i.test(e)}function Te(e=(0,s.z$)()){return Ie(e)||we(e)||be(e)||_e(e)||/windows phone/i.test(e)||ve(e)}function Se(e,t=[]){let n;switch(e){case"Browser":n=pe((0,s.z$)());break;case"Worker":n=`${pe((0,s.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${o.SDK_VERSION}/${r}`}class Ee{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ke(this),this.idTokenSubscription=new ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=T(t)),this._initializationPromise=this.queue((0,r.Z)(function*(){var r;n._deleted||(n.persistenceManager=yield fe.create(n,e),n._deleted||((null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)&&(yield n._popupRedirectResolver._initialize(n)),yield n.initializeCurrentUser(t),n._deleted||(n._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,r.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();return e.currentUser||t?e.currentUser&&t&&e.currentUser.uid===t.uid?(e._currentUser._assign(t),void(yield e.currentUser.getIdToken())):void(yield e._updateCurrentUser(t)):void 0})()}initializeCurrentUser(e){var t=this;return(0,r.Z)(function*(){var n;let r=yield t.assertedPersistence.getCurrentUser();if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const i=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null==r?void 0:r._redirectEventId,o=yield t.tryRedirectSignIn(e);i&&i!==s||!(null==o?void 0:o.user)||(r=o.user)}return r?r._redirectEventId?(w(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===r._redirectEventId?t.directlySetCurrentUser(r):t.reloadAndSetCurrentUserOrClear(r)):t.reloadAndSetCurrentUserOrClear(r):t.directlySetCurrentUser(null)})()}tryRedirectSignIn(e){var t=this;return(0,r.Z)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,r.Z)(function*(){try{yield ne(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return(0,r.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){const n=e?(0,s.m9)(e):null;return n&&w(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){if(!t._deleted)return e&&w(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,r.Z)(function*(){yield t.directlySetCurrentUser(e),t.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,r.Z)(function*(){return(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null)})()}setPersistence(e){var t=this;return this.queue((0,r.Z)(function*(){yield t.assertedPersistence.setPersistence(T(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new s.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,r.Z)(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,r.Z)(function*(){if(!t.redirectPersistenceManager){const n=e&&T(e)||t._popupRedirectResolver;w(n,t,"argument-error"),t.redirectPersistenceManager=yield fe.create(t,[T(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,r.Z)(function*(){var n,i;return t._isInitialized&&(yield t.queue((0,r.Z)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,r.Z)(function*(){if(e===t.currentUser)return t.queue((0,r.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return w(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,r.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return w(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Se(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Ce(e){return(0,s.m9)(e)}class ke{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.ne)(e=>this.observer=e)}get next(){return w(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ae(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function xe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ne{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _("not implemented")}_getIdTokenResponse(e){return _("not implemented")}_linkToIdToken(e,t){return _("not implemented")}_getReauthenticationResolver(e){return _("not implemented")}}function Re(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:resetPassword",O(e,t))})).apply(this,arguments)}function De(e,t){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Le(e,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",O(e,t))})).apply(this,arguments)}function Me(){return(Me=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPassword",O(e,t))})).apply(this,arguments)}function Ue(e,t){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:sendOobCode",O(e,t))})).apply(this,arguments)}function je(e,t){return qe.apply(this,arguments)}function qe(){return(qe=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function ze(e,t){return Be.apply(this,arguments)}function Be(){return(Be=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function He(e,t){return $e.apply(this,arguments)}function $e(){return($e=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Ge(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Ke(){return(Ke=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",O(e,t))})).apply(this,arguments)}function We(){return(We=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",O(e,t))})).apply(this,arguments)}class Qe extends Ne{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Qe(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Qe(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,r.Z)(function*(){switch(t.signInMethod){case"password":return function(e,t){return Me.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return Ke.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:p(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,r.Z)(function*(){switch(n.signInMethod){case"password":return De(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return We.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:p(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Ye(e,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithIdp",O(e,t))})).apply(this,arguments)}class Xe extends Ne{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):p("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=(0,a._T)(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Xe(n,r);return Object.assign(s,i),s}_getIdTokenResponse(e){return Ye(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ye(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ye(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.xO)(t)}return e}}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:sendVerificationCode",O(e,t))})).apply(this,arguments)}function nt(){return(nt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",O(e,t))})).apply(this,arguments)}function rt(){return(rt=(0,r.Z)(function*(e,t){const n=yield M(e,"POST","/v1/accounts:signInWithPhoneNumber",O(e,t));if(n.temporaryProof)throw q(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const it={USER_NOT_FOUND:"user-not-found"};function st(){return(st=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",O(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),it)})).apply(this,arguments)}class ot extends Ne{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ot({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ot({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return nt.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return rt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return st.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ot({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class at{constructor(e){var t,n,r,i,o,a;const u=(0,s.zd)((0,s.pd)(e)),c=null!==(t=u.apiKey)&&void 0!==t?t:null,l=null!==(n=u.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=u.mode)&&void 0!==r?r:null);w(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,s.zd)((0,s.pd)(e)).link,n=t?(0,s.zd)((0,s.pd)(t)).deep_link_id:null,r=(0,s.zd)((0,s.pd)(e)).deep_link_id;return(r?(0,s.zd)((0,s.pd)(r)).link:null)||r||n||t||e}(e);try{return new at(t)}catch(n){return null}}}let ut=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Qe._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=at.parseLink(t);return w(n,"argument-error"),Qe._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class ct{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class lt extends ct{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ht extends lt{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return w("providerId"in t&&"signInMethod"in t,"argument-error"),Xe._fromParams(t)}credential(e){return this._credential(e)}_credential(e){return w(e.idToken||e.accessToken,"argument-error"),Xe._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ht.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ht.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new ht(o)._credential({idToken:t,accessToken:n,rawNonce:s,pendingToken:i})}catch(a){return null}}}let dt=(()=>{class e extends lt{constructor(){super("facebook.com")}static credential(t){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),ft=(()=>{class e extends lt{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),pt=(()=>{class e extends lt{constructor(){super("github.com")}static credential(t){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class gt extends Ne{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Ye(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ye(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ye(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new gt(n,i):null}static _create(e,t){return new gt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let mt=(()=>{class e extends lt{constructor(){super("twitter.com")}static credential(t,n){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();function yt(e,t){return vt.apply(this,arguments)}function vt(){return(vt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signUp",O(e,t))})).apply(this,arguments)}class wt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,i=!1){return(0,r.Z)(function*(){const r=yield le._fromIdTokenResponse(e,n,i),s=_t(n);return new wt({user:r,providerId:s,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,r.Z)(function*(){yield e._updateTokensIfNecessary(n,!0);const r=_t(n);return new wt({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function _t(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function bt(){return(bt=(0,r.Z)(function*(e){var t;const n=Ce(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new wt({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield yt(n,{returnSecureToken:!0}),i=yield wt._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class It extends s.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,this.name="FirebaseError",Object.setPrototypeOf(this,It.prototype),this.appName=e.name,this.code=t.code,this.tenantId=null!==(i=e.tenantId)&&void 0!==i?i:void 0,this.serverResponse=t.customData.serverResponse}static _fromErrorAndOperation(e,t,n,r){return new It(e,t,n,r)}}function Tt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw It._fromErrorAndOperation(e,n,t,r);throw n})}function St(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function Et(){return(Et=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);yield At(!0,n,t);const{providerUserInfo:r}=yield B(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),i=St(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function Ct(e,t){return kt.apply(this,arguments)}function kt(){return(kt=(0,r.Z)(function*(e,t,n=!1){const r=yield Y(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return wt._forOperation(e,"link",r)})).apply(this,arguments)}function At(e,t,n){return xt.apply(this,arguments)}function xt(){return(xt=(0,r.Z)(function*(e,t,n){yield ne(t);const r=!1===e?"provider-already-linked":"no-such-provider";w(St(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function Nt(e,t){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,r.Z)(function*(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=yield Y(e,Tt(r,i,t,e),n);w(s.idToken,r,"internal-error");const o=Q(s.idToken);w(o,r,"internal-error");const{sub:a}=o;return w(e.uid===a,r,"user-mismatch"),wt._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&p(r,"user-mismatch"),s}})).apply(this,arguments)}function Ot(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,r.Z)(function*(e,t,n=!1){const r="signIn",i=yield Tt(e,r,t),s=yield wt._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(s.user)),s})).apply(this,arguments)}function Pt(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,r.Z)(function*(e,t){return Ot(Ce(e),t)})).apply(this,arguments)}function Ft(e,t){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);return yield At(!1,n,t.providerId),Ct(n,t)})).apply(this,arguments)}function Ut(e,t){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,r.Z)(function*(e,t){return Nt((0,s.m9)(e),t)})).apply(this,arguments)}function jt(e,t){return qt.apply(this,arguments)}function qt(){return(qt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithCustomToken",O(e,t))})).apply(this,arguments)}function zt(){return(zt=(0,r.Z)(function*(e,t){const n=Ce(e),r=yield jt(n,{token:t,returnSecureToken:!0}),i=yield wt._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class Bt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Ht._fromServerResponse(e,t):p(e,"internal-error")}}class Ht extends Bt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Ht(t)}}function $t(e,t,n){var r;w((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),w(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(w(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iosBundleId=n.iOS.bundleId),n.android&&(w(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Gt(){return(Gt=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"PASSWORD_RESET",email:t};n&&$t(r,i,n),yield ze(r,i)})).apply(this,arguments)}function Zt(){return(Zt=(0,r.Z)(function*(e,t,n){yield Re((0,s.m9)(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function Kt(){return(Kt=(0,r.Z)(function*(e,t){yield Le((0,s.m9)(e),{oobCode:t})})).apply(this,arguments)}function Wt(e,t){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r=yield Re(n,{oobCode:t}),i=r.requestType;switch(w(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":w(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":w(r.mfaInfo,n,"internal-error");default:w(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Bt._fromServerResponse(Ce(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}})).apply(this,arguments)}function Yt(){return(Yt=(0,r.Z)(function*(e,t){const{data:n}=yield Wt((0,s.m9)(e),t);return n.email})).apply(this,arguments)}function Jt(){return(Jt=(0,r.Z)(function*(e,t,n){const r=Ce(e),i=yield yt(r,{returnSecureToken:!0,email:t,password:n}),s=yield wt._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function Xt(){return(Xt=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"EMAIL_SIGNIN",email:t};w(n.handleCodeInApp,r,"argument-error"),n&&$t(r,i,n),yield He(r,i)})).apply(this,arguments)}function en(){return(en=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=ut.credentialWithLink(t,n||S());return w(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Pt(r,i)})).apply(this,arguments)}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:createAuthUri",O(e,t))})).apply(this,arguments)}function rn(){return(rn=(0,r.Z)(function*(e,t){const n={identifier:t,continueUri:E()?S():"http://localhost"},{signinMethods:r}=yield tn((0,s.m9)(e),n);return r||[]})).apply(this,arguments)}function sn(){return(sn=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&$t(n.auth,r,t);const{email:i}=yield je(n.auth,r);i!==e.email&&(yield e.reload())})).apply(this,arguments)}function on(){return(on=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&$t(r.auth,i,n);const{email:o}=yield Ge(r.auth,i);o!==e.email&&(yield e.reload())})).apply(this,arguments)}function an(e,t){return un.apply(this,arguments)}function un(){return(un=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function cn(){return(cn=(0,r.Z)(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,s.m9)(e),i={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=yield Y(r,an(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)})).apply(this,arguments)}function ln(e,t,n){return hn.apply(this,arguments)}function hn(){return(hn=(0,r.Z)(function*(e,t,n){const{auth:r}=e,i={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=yield Y(e,De(r,i));yield e._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class dn{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class fn extends dn{constructor(e,t,n,r){super(e,t,n),this.username=r}}class pn extends dn{constructor(e,t){super(e,"facebook.com",t)}}class gn extends fn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class mn extends dn{constructor(e,t){super(e,"google.com",t)}}class yn extends fn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function vn(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Q(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new dn(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new pn(s,i);case"github.com":return new gn(s,i);case"google.com":return new mn(s,i);case"twitter.com":return new yn(s,i,e.screenName||null);case"custom":case"anonymous":return new dn(s,null);default:return new dn(s,r,i)}}(n)}class wn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new wn("enroll",e)}static _fromMfaPendingCredential(e){return new wn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return wn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return wn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class _n{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ce(e),i=(t.serverResponse.mfaInfo||[]).map(e=>Bt._fromServerResponse(n,e));w(t.serverResponse.mfaPendingCredential,n,"internal-error");const s=wn._fromMfaPendingCredential(t.serverResponse.mfaPendingCredential);return new _n(s,i,function(){var e=(0,r.Z)(function*(e){const r=yield e._process(n,s);delete t.serverResponse.mfaInfo,delete t.serverResponse.mfaPendingCredential;const i=Object.assign(Object.assign({},t.serverResponse),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=yield wt._fromIdTokenResponse(n,t.operationType,i);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return w(t.user,n,"internal-error"),wt._forOperation(t.user,t.operationType,i);default:p(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,r.Z)(function*(){return t.signInResolver(e)})()}}function bn(e,t){return D(e,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:e.tenantId},t))}class In{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Bt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new In(e)}getSession(){var e=this;return(0,r.Z)(function*(){return wn._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return(0,r.Z)(function*(){const r=e,i=yield n.getSession(),s=yield Y(n.user,r._process(n.user.auth,i,t));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(e){var t=this;return(0,r.Z)(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken(),i=yield Y(t.user,(s=t.user.auth,o={idToken:r,mfaEnrollmentId:n},D(s,"POST","/v2/accounts/mfaEnrollment:withdraw",Object.assign({tenantId:s.tenantId},o))));var s,o;t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(i);try{yield t.user.reload()}catch(a){if("auth/user-token-expired"!==a.code)throw a}})()}}const Tn=new WeakMap,Sn="__sak";class En{constructor(e,t){this.storage=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sn,"1"),this.storage.removeItem(Sn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}}const Cn=(()=>{class e extends En{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,s.z$)();return me(e)||Ie(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Te(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.w1)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,i=this;return(0,r.Z)(function*(){yield n().call(i,e,t),i.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return(0,r.Z)(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return(0,r.Z)(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),kn=(()=>{class e extends En{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let An=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return(0,r.Z)(function*(){const n=e,{eventId:i,eventType:s,data:o}=n.data,a=t.handlersMap[s];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(a).map(function(){var e=(0,r.Z)(function*(e){return e(n.origin,o)});return function(t){return e.apply(this,arguments)}}()),c=yield function(e){return Promise.all(e.map(function(){var e=(0,r.Z)(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function xn(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class Nn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var i=this;return(0,r.Z)(function*(){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=xn("",20);r.port1.start();const l=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(l),clearTimeout(s),u(new Error("invalid_response"))}}},i.handlers.add(o),r.port1.addEventListener("message",o.onMessage),i.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&i.removeMessageHandler(o)})})()}}function Rn(){return window}function On(){return void 0!==Rn().WorkerGlobalScope&&"function"==typeof Rn().importScripts}function Dn(){return(Dn=(0,r.Z)(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(e){return null}})).apply(this,arguments)}const Pn="firebaseLocalStorageDb",Ln="firebaseLocalStorage",Fn="fbase_key";class Mn{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Un(e,t){return e.transaction([Ln],t?"readwrite":"readonly").objectStore(Ln)}function Vn(){const e=indexedDB.open(Pn,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Ln,{keyPath:Fn})}catch(r){n(r)}}),e.addEventListener("success",(0,r.Z)(function*(){const n=e.result;n.objectStoreNames.contains(Ln)?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(Pn);return new Mn(e).toPromise()}(),t(yield Vn()))}))})}function jn(e,t,n){return qn.apply(this,arguments)}function qn(){return(qn=(0,r.Z)(function*(e,t,n){const r=Un(e,!0).put({[Fn]:t,value:n});return new Mn(r).toPromise()})).apply(this,arguments)}function zn(){return(zn=(0,r.Z)(function*(e,t){const n=Un(e,!1).get(t),r=yield new Mn(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function Bn(e,t){const n=Un(e,!0).delete(t);return new Mn(n).toPromise()}const Hn=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return(0,r.Z)(function*(){return e.db||(e.db=yield Vn()),e.db})()}_withRetries(e){var t=this;return(0,r.Z)(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return(0,r.Z)(function*(){return On()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return(0,r.Z)(function*(){e.receiver=An._getInstance(On()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,r.Z)(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,r.Z)(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return(0,r.Z)(function*(){var t,n;if(e.activeServiceWorker=yield function(){return Dn.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new Nn(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);r&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return(0,r.Z)(function*(){var n;if(t.sender&&t.activeServiceWorker&&((null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,r.Z)(function*(){try{if(!indexedDB)return!1;const e=yield Vn();return yield jn(e,Sn,"1"),yield Bn(e,Sn),!0}catch(e){}return!1})()}_withPendingWrite(e){var t=this;return(0,r.Z)(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return(0,r.Z)(function*(){return n._withPendingWrite((0,r.Z)(function*(){return yield n._withRetries(n=>jn(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=yield t._withRetries(t=>function(e,t){return zn.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return(0,r.Z)(function*(){return t._withPendingWrite((0,r.Z)(function*(){return yield t._withRetries(t=>Bn(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return(0,r.Z)(function*(){const t=yield e._withRetries(e=>{const t=Un(e,!1).getAll();return new Mn(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(e.localCache[i])!==JSON.stringify(s)&&(e.notifyListeners(i,s),n.push(i));for(const i of Object.keys(e.localCache))e.localCache[i]&&!r.has(i)&&(e.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,r.Z)(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function $n(e,t){return D(e,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:e.tenantId},t))}function Gn(){return(Gn=(0,r.Z)(function*(e){return(yield D(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Zn(e){return new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=g("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})}function Kn(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Wn=1e12;class Qn{constructor(e){this.auth=e,this.counter=Wn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Yn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Wn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||Wn))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,r.Z)(function*(){var n;return null===(n=t._widgets.get(e||Wn))||void 0===n||n.execute(),""})()}}class Yn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;w(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jn=Kn("rcb"),Xn=new k(3e4,6e4);class er{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Rn().grecaptcha}load(e,t=""){return w(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(Rn().grecaptcha):new Promise((n,r)=>{const i=Rn().setTimeout(()=>{r(g(e,"network-request-failed"))},Xn.get());Rn()[Jn]=()=>{Rn().clearTimeout(i),delete Rn()[Jn];const s=Rn().grecaptcha;if(!s)return void r(g(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)},Zn(`https://www.google.com/recaptcha/api.js??${(0,s.xO)({onload:Jn,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(i),r(g(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Rn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class tr{load(e){return(0,r.Z)(function*(){return new Qn(e)})()}clearedOneInstance(){}}const nr="recaptcha",rr={theme:"light",type:"image"};class ir{constructor(e,t=Object.assign({},rr),n){this.parameters=t,this.type=nr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ce(n),this.isInvisible="invisible"===this.parameters.size,w("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;w(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tr:new er,this.validateStartingState()}verify(){var e=this;return(0,r.Z)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(r=>{const i=t=>{t&&(e.tokenChangeListeners.delete(i),r(t))};e.tokenChangeListeners.add(i),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){w(!this.parameters.sitekey,this.auth,"argument-error"),w(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),w("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=Rn()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){w(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,r.Z)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,r.Z)(function*(){w(E()&&!On(),e.auth,"internal-error"),yield function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function(e){return Gn.apply(this,arguments)}(e.auth);w(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return w(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class sr{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ot._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function or(){return(or=(0,r.Z)(function*(e,t,n){const r=Ce(e),i=yield cr(r,t,(0,s.m9)(n));return new sr(i,e=>Pt(r,e))})).apply(this,arguments)}function ar(){return(ar=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);yield At(!1,r,"phone");const i=yield cr(r.auth,t,(0,s.m9)(n));return new sr(i,e=>Ft(r,e))})).apply(this,arguments)}function ur(){return(ur=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=yield cr(r.auth,t,(0,s.m9)(n));return new sr(i,e=>Ut(r,e))})).apply(this,arguments)}function cr(e,t,n){return lr.apply(this,arguments)}function lr(){return(lr=(0,r.Z)(function*(e,t,n){var r;const i=yield n.verify();try{let s;if(w("string"==typeof i,e,"argument-error"),w(n.type===nr,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return w("enroll"===t.type,e,"internal-error"),(yield bn(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{w("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return w(n,e,"missing-multi-factor-info"),(yield $n(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield et(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}})).apply(this,arguments)}function hr(){return(hr=(0,r.Z)(function*(e,t){yield Ct((0,s.m9)(e),t)})).apply(this,arguments)}let dr=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Ce(t)}verifyPhoneNumber(e,t){return cr(this.auth,e,(0,s.m9)(t))}static credential(e,t){return ot._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ot._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function fr(e,t){return t?T(t):(w(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class pr extends Ne{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ye(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ye(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ye(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gr(e){return Ot(e.auth,new pr(e),e.bypassAuthState)}function mr(e){const{auth:t,user:n}=e;return w(n,t,"internal-error"),Nt(n,new pr(e),e.bypassAuthState)}function yr(e){return vr.apply(this,arguments)}function vr(){return(vr=(0,r.Z)(function*(e){const{auth:t,user:n}=e;return w(n,t,"internal-error"),Ct(n,new pr(e),e.bypassAuthState)})).apply(this,arguments)}class wr{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,r.Z)(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,r.Z)(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o)return void t.reject(o);const u={auth:t.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(u))}catch(c){t.reject(c)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gr;case"linkViaPopup":case"linkViaRedirect":return yr;case"reauthViaPopup":case"reauthViaRedirect":return mr;default:p(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _r=new k(2e3,1e4);function br(){return(br=(0,r.Z)(function*(e,t,n){const r=Ce(e);y(e,t,ct);const i=fr(r,n);return new Sr(r,"signInViaPopup",t,i).executeNotNull()})).apply(this,arguments)}function Ir(){return(Ir=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=fr(r.auth,n);return new Sr(r.auth,"reauthViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}function Tr(){return(Tr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=fr(r.auth,n);return new Sr(r.auth,"linkViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}let Sr=(()=>{class e extends wr{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return(0,r.Z)(function*(){const t=yield e.execute();return w(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return(0,r.Z)(function*(){b(1===e.filter.length,"Popup operations only handle one event");const t=xn();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(g(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(g(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(g(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,_r.get())};e()}}return e.currentPopupAction=null,e})();const Er=new Map;class Cr extends wr{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,r.Z)(function*(){let n=Er.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return kr.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}Er.set(t.auth._key(),n)}return n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,r.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,r.Z)(function*(){})()}cleanUp(){}}function kr(){return(kr=(0,r.Z)(function*(e,t){const n=Rr(t),r="true"===(yield Nr(e)._get(n));return yield Nr(e)._remove(n),r})).apply(this,arguments)}function Ar(e,t){return xr.apply(this,arguments)}function xr(){return(xr=(0,r.Z)(function*(e,t){return Nr(e)._set(Rr(t),"true")})).apply(this,arguments)}function Nr(e){return T(e._redirectPersistence)}function Rr(e){return de("pendingRedirect",e.config.apiKey,e.name)}function Or(){return(Or=(0,r.Z)(function*(e,t,n){const r=Ce(e);y(e,t,ct);const i=fr(r,n);return yield Ar(i,r),i._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function Dr(){return(Dr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=fr(r.auth,n);yield Ar(i,r.auth);const o=yield Ur(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)})).apply(this,arguments)}function Pr(){return(Pr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=fr(r.auth,n);yield At(!1,r,t.providerId),yield Ar(i,r.auth);const o=yield Ur(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)})).apply(this,arguments)}function Lr(){return(Lr=(0,r.Z)(function*(e,t){return yield Ce(e)._initializationPromise,Fr(e,t,!1)})).apply(this,arguments)}function Fr(e,t){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,r.Z)(function*(e,t,n=!1){const r=Ce(e),i=fr(r,t),s=new Cr(r,i,n),o=yield s.execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,t)),o})).apply(this,arguments)}function Ur(e){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,r.Z)(function*(e){const t=xn(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class jr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!zr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(g(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qr(e))}saveEventToCache(e){this.cachedEventUids.add(qr(e)),this.lastProcessedEventTime=Date.now()}}function qr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function zr({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function Br(e){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,r.Z)(function*(e,t={}){return D(e,"GET","/v1/projects",t)})).apply(this,arguments)}const $r=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gr=/^https?/;function Zr(){return(Zr=(0,r.Z)(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield Br(e);for(const r of t)try{if(Kr(r))return}catch(n){}p(e,"unauthorized-domain")})).apply(this,arguments)}function Kr(e){const t=S(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Gr.test(n))return!1;if($r.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Wr=new k(3e4,6e4);function Qr(){const e=Rn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Yr=null;function Jr(e){return Yr=Yr||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Qr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Qr(),n(g(e,"network-request-failed"))},timeout:Wr.get()})}if(null===(i=null===(r=Rn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Rn().gapi)||void 0===s?void 0:s.load)){const t=Kn("iframefcb");return Rn()[t]=()=>{gapi.load?o():n(g(e,"network-request-failed"))},Zn(`https://apis.google.com/js/api.js?onload=${t}`)}o()}}).catch(e=>{throw Yr=null,e})}(e),Yr}const Xr=new k(5e3,15e3),ei={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},ti=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ni(e){const t=e.config;w(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?A(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:o.SDK_VERSION},i=ti.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,s.xO)(r).slice(1)}`}function ri(){return(ri=(0,r.Z)(function*(e){const t=yield Jr(e),n=Rn().gapi;return w(n,e,"internal-error"),t.open({where:document.body,url:ni(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ei,dontclear:!0},t=>new Promise(function(){var n=(0,r.Z)(function*(n,r){yield t.restyle({setHideOnLeave:!1});const i=g(e,"network-request-failed"),s=Rn().setTimeout(()=>{r(i)},Xr.get());function o(){Rn().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const ii={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class si{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function oi(e,t,n,r,i,a){w(e.config.authDomain,e,"auth-domain-config-required"),w(e.config.apiKey,e,"invalid-api-key");const u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:o.SDK_VERSION,eventId:i};if(t instanceof ct){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",(0,s.xb)(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))u[e]=t}if(t instanceof lt){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(u.scopes=e.join(","))}e.tenantId&&(u.tid=e.tenantId);const c=u;for(const s of Object.keys(c))void 0===c[s]&&delete c[s];return`${function({config:e}){return e.emulator?A(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,s.xO)(c).slice(1)}`}const ai="webStorageSupport";class ui extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ui(e)}_finalizeEnroll(e,t,n){return function(e,t){return D(e,"POST","/v2/accounts/mfaEnrollment:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return D(e,"POST","/v2/accounts/mfaSignIn:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}var ci;class li{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,r.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){w(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hi(){return window}function di(){return(di=(0,r.Z)(function*(e,t,n){var r;const{BuildInfo:i}=hi();b(t.sessionId,"AuthEvent did not contain a session ID");const s=yield gi(t.sessionId),o={};return Ie()?o.ibi=i.packageName:we()?o.apn=i.packageName:p(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,oi(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)})).apply(this,arguments)}function fi(){return(fi=(0,r.Z)(function*(e){const{BuildInfo:t}=hi(),n={};Ie()?n.iosBundleId=t.packageName:we()?n.androidPackageName=t.packageName:p(e,"operation-not-supported-in-this-environment"),yield Br(e,n)})).apply(this,arguments)}function pi(){return(pi=(0,r.Z)(function*(e,t,n){const{cordova:r}=hi();let i=()=>{};try{yield new Promise((s,o)=>{let a=null;function u(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(g(e,"redirect-cancelled-by-user"))},2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(u),document.addEventListener("resume",c,!1),we()&&document.addEventListener("visibilitychange",l,!1),i=()=>{t.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}})}finally{i()}})).apply(this,arguments)}function gi(e){return mi.apply(this,arguments)}function mi(){return(mi=(0,r.Z)(function*(e){const t=yi(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function yi(e){if(b(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}ci="Browser",(0,o._registerComponent)(new c.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{w(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),w(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:ci,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Se(ci)},s=new Ee(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(T);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,o._registerComponent)(new c.wA("auth-internal",e=>{return t=Ce(e.getProvider("auth").getImmediate()),new li(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.registerVersion)("@firebase/auth","0.17.2",void 0);class vi extends jr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,r.Z)(function*(){yield e.initPromise})()}}function wi(e){return _i.apply(this,arguments)}function _i(){return(_i=(0,r.Z)(function*(e){const t=yield Ii()._get(Ti(e));return t&&(yield Ii()._remove(Ti(e))),t})).apply(this,arguments)}function bi(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function Ii(){return T(Cn)}function Ti(e){return de("authEvent",e.config.apiKey,e.name)}function Si(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,s.zd)(n.join("?"))}function Ei(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:g("no-auth-event")}}function Ci(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ki(e=(0,s.z$)()){return!("file:"!==Ci()&&"ionic:"!==Ci()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ai(){try{const e=self.localStorage,t=xn();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,s.z$)()){return(0,s.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,s.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,s.hl)()}catch(e){return xi()&&(0,s.hl)()}return!1}function xi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ni(){return("http:"===Ci()||"https:"===Ci()||(0,s.ru)()||ki())&&!((0,s.b$)()||(0,s.UG)())&&Ai()&&!xi()}function Ri(){return ki()&&"undefined"!=typeof document}function Oi(){return(Oi=(0,r.Z)(function*(){return!!Ri()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})})).apply(this,arguments)}const Di={LOCAL:"local",NONE:"none",SESSION:"session"},Pi=w,Li="persistence";function Fi(e){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,r.Z)(function*(e){yield e._initializationPromise;const t=Ui(),n=de(Li,e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())})).apply(this,arguments)}function Ui(){return"undefined"!=typeof window?window:null}const Vi=w;class ji{constructor(){this.browserResolver=T(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kn,this._completeRedirectFn=Fr}_openPopup(e,t,n,i){var o=this;return(0,r.Z)(function*(){var r;b(null===(r=o.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const a=oi(e,t,n,S(),i);return function(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},ii),{width:r.toString(),height:i.toString(),top:o,left:a}),l=(0,s.z$)().toLowerCase();n&&(u=ye(l)?"_blank":n),ge(l)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,s.z$)()){var t;return Ie(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==u)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new si(null);const d=window.open(t||"",u,h);w(d,e,"popup-blocked");try{d.focus()}catch(f){}return new si(d)}(e,a,xn())})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){var r;return yield s._originValidation(e),r=oi(e,t,n,S(),i),Rn().location.href=r,new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}initAndGetManager(e){var t=this;return(0,r.Z)(function*(){const n=yield function(e){return ri.apply(this,arguments)}(e),r=new jr(e);return n.register("authEvent",t=>(w(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ai,{type:ai},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),p(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Zr.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Te()||me()||Ie()}}),this.cordovaResolver=T(class{constructor(){this._redirectPersistence=kn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fr}_initialize(e){var t=this;return(0,r.Z)(function*(){const n=e._key();let r=t.eventManagers.get(n);return r||(r=new vi(e),t.eventManagers.set(n,r),t.attachCallbackListeners(e,r)),r})()}_openPopup(e){p(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,i){var o=this;return(0,r.Z)(function*(){!function(e){var t,n,r,i,s,o,a,u,c,l;const h=hi();w("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),w(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),w("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),w("function"==typeof(null===(u=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),w("function"==typeof(null===(l=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=yield o._initialize(e);yield r.initialized(),r.resetRedirect(),Er.clear(),yield o._originValidation(e);const a=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:bi(),postBody:null,tenantId:e.tenantId,error:g(e,"no-auth-event")}}(e,n,i);yield function(e,t){return Ii()._set(Ti(e),t)}(e,a);const u=yield function(e,t,n){return di.apply(this,arguments)}(e,a,t),c=yield function(e){const{cordova:t}=hi();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=(0,s.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}(u);return function(e,t,n){return pi.apply(this,arguments)}(e,r,c)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return fi.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=hi(),o=setTimeout((0,r.Z)(function*(){yield wi(e),t.onEvent(Ei())}),500),a=function(){var n=(0,r.Z)(function*(n){clearTimeout(o);const r=yield wi(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=Si(e),n=t.link?decodeURIComponent(t.link):void 0,r=Si(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Si(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Si(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?g(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||Ei())});return function(e){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,a);const u=i,c=`${s.packageName.toLowerCase()}://`;hi().handleOpenURL=function(){var e=(0,r.Z)(function*(e){if(e.toLowerCase().startsWith(c)&&a({url:e}),"function"==typeof u)try{u(e)}catch(t){console.error(t)}});return function(t){return e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=kn,this._completeRedirectFn=Fr}_initialize(e){var t=this;return(0,r.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(e,t,n,i)})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(e,t,n,i)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Ri()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Vi(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,r.Z)(function*(){if(e.underlyingResolver)return;const t=yield function(){return Oi.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function qi(e){return e.unwrap()}function zi(e){return Hi(e)}function Bi(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Wi(e,function(e,t){var n;const r=(0,s.m9)(e),i=t;return w(t.operationType,r,"argument-error"),w(null===(n=i.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),_n._fromError(r,i)}(e,t));else if(r){const e=Hi(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Hi(e){const{_tokenResponse:t}=e instanceof s.ZR?e.customData:e;if(!t)return null;if(!(e instanceof s.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return dr.credentialFromResult(e);const n=t.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=ft;break;case"facebook.com":r=dt;break;case"github.com":r=pt;break;case"twitter.com":r=mt;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?gt._create(n,o):Xe._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new ht(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof s.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function $i(e,t){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,r.Z)(function*(e,t){let n;try{n=yield t}catch(o){throw o instanceof s.ZR&&Bi(e,o),o}const{operationType:r,user:i}=n;return{operationType:r,credential:zi(n),additionalUserInfo:vn(n),user:Qi.getOrCreate(i)}})).apply(this,arguments)}function Zi(e,t){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,r.Z)(function*(e,t){const n=yield t;return{verificationId:n.verificationId,confirm:t=>$i(e,n.confirm(t))}})).apply(this,arguments)}class Wi{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return $i(qi(this.auth),this.resolver.resolveSignIn(e))}}class Qi{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=(0,s.m9)(e);return Tn.has(t)||Tn.set(t,In._fromUser(t)),Tn.get(t)}(e)}static getOrCreate(e){return Qi.USER_MAP.has(e)||Qi.USER_MAP.set(e,new Qi(e)),Qi.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,r.Z)(function*(){return $i(t.auth,Ft(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,r.Z)(function*(){return Zi(n.auth,function(e,t,n){return ar.apply(this,arguments)}(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,r.Z)(function*(){return $i(t.auth,function(e,t,n){return Tr.apply(this,arguments)}(t._delegate,e,ji))})()}linkWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Fi(Ce(t.auth)),function(e,t,n){return function(e,t,n){return Pr.apply(this,arguments)}(e,t,n)}(t._delegate,e,ji)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,r.Z)(function*(){return $i(t.auth,Ut(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return Zi(this.auth,function(e,t,n){return ur.apply(this,arguments)}(this._delegate,e,t))}reauthenticateWithPopup(e){return $i(this.auth,function(e,t,n){return Ir.apply(this,arguments)}(this._delegate,e,ji))}reauthenticateWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Fi(Ce(t.auth)),function(e,t,n){return function(e,t,n){return Dr.apply(this,arguments)}(e,t,n)}(t._delegate,e,ji)})()}sendEmailVerification(e){return function(e,t){return sn.apply(this,arguments)}(this._delegate,e)}unlink(e){var t=this;return(0,r.Z)(function*(){return yield function(e,t){return Et.apply(this,arguments)}(t._delegate,e),t})()}updateEmail(e){return function(e,t){return ln((0,s.m9)(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return ln((0,s.m9)(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return function(e,t){return hr.apply(this,arguments)}(this._delegate,e)}updateProfile(e){return function(e,t){return cn.apply(this,arguments)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return function(e,t,n){return on.apply(this,arguments)}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qi.USER_MAP=new WeakMap;const Yi=w;let Ji=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Yi(n,"invalid-api-key",{appName:e.name});let r=[he];if("undefined"!=typeof window){r=function(e,t){const n=Ui();if(!(null==n?void 0:n.sessionStorage))return[];const r=de(Li,e,t);switch(n.sessionStorage.getItem(r)){case Di.NONE:return[he];case Di.LOCAL:return[Hn,kn];case Di.SESSION:return[kn];default:return[]}}(n,e.name);for(const e of[Hn,Cn,kn])r.includes(e)||r.push(e)}Yi(n,"invalid-api-key",{appName:e.name});const i="undefined"!=typeof window?ji:void 0;this._delegate=t.initialize({options:{persistence:r,popupRedirectResolver:i}}),this._delegate._updateErrorMap(l),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=Ce(e);w(r._canInitEmulator,r,"emulator-config-failed"),w(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=Ae(t),{host:o,port:a}=function(e){const t=Ae(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:xe(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:xe(t)}}}(t);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),function(e){function t(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"==typeof window||"undefined"==typeof document||e||("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}(i)}(this._delegate,e,t)}applyActionCode(e){return function(e,t){return Kt.apply(this,arguments)}(this._delegate,e)}checkActionCode(e){return Wt(this._delegate,e)}confirmPasswordReset(e,t){return function(e,t,n){return Zt.apply(this,arguments)}(this._delegate,e,t)}createUserWithEmailAndPassword(e,t){var n=this;return(0,r.Z)(function*(){return $i(n._delegate,function(e,t,n){return Jt.apply(this,arguments)}(n._delegate,e,t))})()}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return function(e,t){return rn.apply(this,arguments)}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=at.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,e)}getRedirectResult(){var e=this;return(0,r.Z)(function*(){Yi(Ni(),e._delegate,"operation-not-supported-in-this-environment");const t=yield function(e,t){return Lr.apply(this,arguments)}(e._delegate,ji);return t?$i(e._delegate,Promise.resolve(t)):{credential:null,user:null}})()}addFrameworkForLogging(e){!function(e,t){Ce(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Xi(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Xi(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return function(e,t,n){return Xt.apply(this,arguments)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return function(e,t,n){return Gt.apply(this,arguments)}(this._delegate,e,t||void 0)}setPersistence(e){var t=this;return(0,r.Z)(function*(){let n;switch(function(e,t){Pi(Object.values(Di).includes(t),e,"invalid-persistence-type"),(0,s.b$)()?Pi(t!==Di.SESSION,e,"unsupported-persistence-type"):(0,s.UG)()?Pi(t===Di.NONE,e,"unsupported-persistence-type"):xi()?Pi(t===Di.NONE||t===Di.LOCAL&&(0,s.hl)(),e,"unsupported-persistence-type"):Pi(t===Di.NONE||Ai(),e,"unsupported-persistence-type")}(t._delegate,e),e){case Di.SESSION:n=kn;break;case Di.LOCAL:n=(yield T(Hn)._isAvailable())?Hn:Cn;break;case Di.NONE:n=he;break;default:return p("argument-error",{appName:t._delegate.name})}return t._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return $i(this._delegate,function(e){return bt.apply(this,arguments)}(this._delegate))}signInWithCredential(e){return $i(this._delegate,Pt(this._delegate,e))}signInWithCustomToken(e){return $i(this._delegate,function(e,t){return zt.apply(this,arguments)}(this._delegate,e))}signInWithEmailAndPassword(e,t){return $i(this._delegate,function(e,t,n){return Pt((0,s.m9)(e),ut.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return $i(this._delegate,function(e,t,n){return en.apply(this,arguments)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Zi(this._delegate,function(e,t,n){return or.apply(this,arguments)}(this._delegate,e,t))}signInWithPopup(e){var t=this;return(0,r.Z)(function*(){return Yi(Ni(),t._delegate,"operation-not-supported-in-this-environment"),$i(t._delegate,function(e,t,n){return br.apply(this,arguments)}(t._delegate,e,ji))})()}signInWithRedirect(e){var t=this;return(0,r.Z)(function*(){return Yi(Ni(),t._delegate,"operation-not-supported-in-this-environment"),yield Fi(t._delegate),function(e,t,n){return function(e,t,n){return Or.apply(this,arguments)}(e,t,n)}(t._delegate,e,ji)})()}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return function(e,t){return Yt.apply(this,arguments)}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=Di,e})();function Xi(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Qi.getOrCreate(e)),error:t,complete:n}}class es{constructor(){this.providerId="phone",this._delegate=new dr(qi(i.Z.auth()))}static credential(e,t){return dr.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}es.PHONE_SIGN_IN_METHOD=dr.PHONE_SIGN_IN_METHOD,es.PROVIDER_ID=dr.PROVIDER_ID;const ts=w;var ns;(ns=i.Z).INTERNAL.registerComponent(new c.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ji(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ut,FacebookAuthProvider:dt,GithubAuthProvider:pt,GoogleAuthProvider:ft,OAuthProvider:ht,PhoneAuthProvider:es,PhoneMultiFactorGenerator:class{constructor(){}static assertion(e){return ui._fromCredential(e)}},RecaptchaVerifier:class{constructor(e,t,n=i.Z.app()){var r;ts(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new ir(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:mt,Auth:Ji,AuthCredential:Ne,Error:s.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ns.registerVersion("@firebase/auth-compat","0.1.2")},6215:(e,t,n)=>{"use strict";n.d(t,{X:()=>s});var r=n(9765),i=n(7971);class s extends r.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.N;return this._value}next(e){super.next(this._value=e)}}},7574:(e,t,n)=>{"use strict";n.d(t,{y:()=>c});var r=n(7393),i=n(9181),s=n(6490),o=n(6554),a=n(4487),u=n(2494);let c=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(s.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){u.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof r.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=l(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?a.y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=l(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function l(e){if(e||(e=u.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var r=n(2494),i=n(4449);const s={closed:!0,next(e){},error(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete(){}}},9765:(e,t,n)=>{"use strict";n.d(t,{Yc:()=>c,xQ:()=>l});var r=n(7574),i=n(7393),s=n(5319),o=n(7971),a=n(8858),u=n(9181);class c extends i.L{constructor(e){super(e),this.destination=e}}let l=(()=>{class e extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new r.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends l{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.w.EMPTY}}},8858:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var r=n(5319);class i extends r.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},7393:(e,t,n)=>{"use strict";n.d(t,{L:()=>c});var r=n(9105),i=n(6490),s=n(5319),o=n(9181),a=n(2494),u=n(4449);class c extends s.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!e){this.destination=i.c;break}if("object"==typeof e){e instanceof c?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const r=new c(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class l extends c{constructor(e,t,n,s){let o;super(),this._parentSubscriber=e;let a=this;(0,r.m)(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==i.c&&(a=Object.create(t),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,u.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,u.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},5319:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(9796),i=n(1555),s=n(9105);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class a{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof a)t.remove(this);else if(null!==t)for(let r=0;r<t.length;++r)t[r].remove(this);if((0,s.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){e=h instanceof o?c(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(c(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let t=e;if(!e)return a.EMPTY;switch(typeof e){case"function":t=new a(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof a)){const e=t;t=new a,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof a){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var u;function c(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:(e,t,n)=>{"use strict";n.d(t,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(7393),i=n(7574),s=n(7444);class o extends r.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function u(e,t){if(t.closed)return;if(e instanceof i.y)return e.subscribe(t);let n;try{n=(0,s.s)(e)(t)}catch(r){t.error(r)}return n}},2441:(e,t,n)=>{"use strict";n.d(t,{c:()=>a,N:()=>u});var r=n(9765),i=n(7574),s=n(5319),o=n(1307);class a extends i.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.w,e.add(this.source.subscribe(new c(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const u=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class c extends r.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},8071:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});var r=n(5917),i=n(3282);function s(...e){return(0,i.J)(1)((0,r.of)(...e))}},9193:(e,t,n)=>{"use strict";n.d(t,{E:()=>i,c:()=>s});var r=n(7574);const i=new r.y(e=>e.complete());function s(e){return e?function(e){return new r.y(t=>e.schedule(()=>t.complete()))}(e):i}},4402:(e,t,n)=>{"use strict";n.d(t,{D:()=>h});var r=n(7574),i=n(7444),s=n(5319),o=n(6554),a=n(4087),u=n(377),c=n(4072),l=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>{const i=e[o.L]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if((0,l.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[u.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[u.hZ](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(7574),i=n(5015),s=n(4087);function o(e,t){return t?(0,s.r)(e,t):new r.y((0,i.V)(e))}},6682:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});var r=n(7574),i=n(4869),s=n(3282),o=n(6693);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,i.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.y?e[0]:(0,s.J)(t)((0,o.n)(e,n))}},5917:(e,t,n)=>{"use strict";n.d(t,{of:()=>o});var r=n(4869),i=n(6693),s=n(4087);function o(...e){let t=e[e.length-1];return(0,r.K)(t)?(e.pop(),(0,s.r)(e,t)):(0,i.n)(e)}},5242:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(7393);function i(e=null){return t=>t.lift(new s(e))}class s{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new o(e,this.defaultValue))}}class o extends r.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var r=n(7393);function i(e,t){return n=>n.lift(new s(e,t))}class s{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new o(e,this.compare,this.keySelector))}}class o extends r.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}},5435:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(7393);function i(e,t){return function(n){return n.lift(new s(e,t))}}class s{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.predicate,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}},8049:(e,t,n)=>{"use strict";n.d(t,{P:()=>c});var r=n(3410),i=n(5435),s=n(5257),o=n(5242),a=n(4635),u=n(4487);function c(e,t){const n=arguments.length>=2;return c=>c.pipe(e?(0,i.h)((t,n)=>e(t,n,c)):u.y,(0,s.q)(1),n?(0,o.d)(t):(0,a.T)(()=>new r.K))}},8002:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},3282:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(9773),i=n(4487);function s(e=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,e)}},9773:(e,t,n)=>{"use strict";n.d(t,{zg:()=>o});var r=n(8002),i=n(4402),s=n(5345);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?s=>s.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new u(e,this.project,this.concurrent))}}class u extends s.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new s.IY(this),n=this.destination;n.add(t);const r=(0,s.ft)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(e,t,n)=>{"use strict";n.d(t,{ht:()=>l,QV:()=>u});var r=n(7393),i=n(9193),s=n(5917),o=n(7574);class a{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return e=this.error,new o.y(t=>t.error(e));case"C":return(0,i.c)()}var e;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new a("N",e):a.undefinedValueNotification}static createError(e){return new a("E",void 0,e)}static createComplete(){return a.completeNotification}}function u(e,t=0){return function(n){return n.lift(new c(e,t))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new l(e,this.scheduler,this.delay))}}class l extends r.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(e,this.destination)))}_next(e){this.scheduleMessage(a.createNext(e))}_error(e){this.scheduleMessage(a.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(e,t){this.notification=e,this.destination=t}}},9328:(e,t,n)=>{"use strict";n.d(t,{G:()=>i});var r=n(7393);function i(){return e=>e.lift(new s)}class s{call(e,t){return t.subscribe(new o(e))}}class o extends r.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}},1307:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var r=n(7393);function i(){return function(e){return e.lift(new s(e))}}class s{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},2145:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var r=n(7393);function i(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new s(e,t,n))}}class s{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new o(e,this.accumulator,this.seed,this.hasSeed))}}class o extends r.L{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},2066:(e,t,n)=>{"use strict";n.d(t,{d:()=>h});var r=n(9765),i=n(7771),s=n(5319),o=n(309),a=n(7971),u=n(8858);class c extends r.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new l(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let c;if(this.closed)throw new a.N;if(this.isStopped||this.hasError?c=s.w.EMPTY:(this.observers.push(e),c=new u.W(this,e)),r&&e.add(e=new o.ht(e,r)),t)for(let s=0;s<i&&!e.closed;s++)e.next(n[s]);else for(let s=0;s<i&&!e.closed;s++)e.next(n[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),c}_getNow(){return(this.scheduler||i.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}class l{constructor(e,t){this.time=e,this.value=t}}function h(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(l){let h;o++,!i||a?(a=!1,i=new c(e,t,r),h=i.subscribe(this),s=l.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):h=i.subscribe(this),this.add(()=>{o--,h.unsubscribe(),h=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}},9761:(e,t,n)=>{"use strict";n.d(t,{O:()=>s});var r=n(8071),i=n(4869);function s(...e){const t=e[e.length-1];return(0,i.K)(t)?(e.pop(),n=>(0,r.z)(e,n,t)):t=>(0,r.z)(e,t)}},9673:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(7574),i=n(4581),s=n(6561);class o extends r.y{constructor(e,t=0,n=i.e){super(),this.source=e,this.delayTime=t,this.scheduler=n,(!(0,s.k)(t)||t<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=i.e)}static create(e,t=0,n=i.e){return new o(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(o.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function a(e,t=0){return function(n){return n.lift(new u(e,t))}}class u{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new o(t,this.delay,this.scheduler).subscribe(e)}}},3190:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var r=n(8002),i=n(4402),s=n(5345);function o(e,t){return"function"==typeof t?n=>n.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))))):t=>t.lift(new a(e))}class a{constructor(e){this.project=e}call(e,t){return t.subscribe(new u(e,this.project))}}class u extends s.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new s.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,s.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}},5257:(e,t,n)=>{"use strict";n.d(t,{q:()=>o});var r=n(7393),i=n(7108),s=n(9193);function o(e){return t=>0===e?(0,s.c)():t.lift(new a(e))}class a{constructor(e){if(this.total=e,this.total<0)throw new i.W}call(e,t){return t.subscribe(new u(e,this.total))}}class u extends r.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}},3342:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(7393);function i(){}var s=n(9105);function o(e,t,n){return function(r){return r.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new u(e,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(e,t,n,r){super(e),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||i,this._tapError=t.error||i,this._tapComplete=t.complete||i)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},4635:(e,t,n)=>{"use strict";n.d(t,{T:()=>s});var r=n(3410),i=n(7393);function s(e=u){return t=>t.lift(new o(e))}class o{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new a(e,this.errorFactory))}}class a extends i.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function u(){return new r.K}},4087:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var r=n(7574),i=n(5319);function s(e,t){return new r.y(n=>{const r=new i.w;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:(e,t,n)=>{"use strict";n.d(t,{o:()=>s});var r=n(5319);class i extends r.w{constructor(e,t){super()}schedule(e,t=0){return this}}class s extends i{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},6102:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class i extends r{constructor(e,t=r.now){super(e,()=>i.delegate&&i.delegate!==this?i.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},4581:(e,t,n)=>{"use strict";n.d(t,{e:()=>h,E:()=>l});let r=1;const i=Promise.resolve(),s={};function o(e){return e in s&&(delete s[e],!0)}const a={setImmediate(e){const t=r++;return s[t]=!0,i.then(()=>o(t)&&e()),t},clearImmediate(e){o(e)}};var u=n(6465),c=n(6102);const l=new class extends c.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends u.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=a.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(a.clearImmediate(t),e.scheduled=void 0)}}),h=l},3637:(e,t,n)=>{"use strict";n.d(t,{z:()=>i,P:()=>s});var r=n(6465);const i=new(n(6102).v)(r.o),s=i},7771:(e,t,n)=>{"use strict";n.d(t,{c:()=>o,N:()=>s});var r=n(6465),i=n(6102);const s=new class extends i.v{}(class extends r.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}),o=s},377:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})()},3410:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})()},7971:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},4449:(e,t,n)=>{"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,{z:()=>r})},4487:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{y:()=>r})},9796:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});const r=Array.isArray||(e=>e&&"number"==typeof e.length)},9489:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},9105:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},6561:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(9796);function i(e){return!(0,r.k)(e)&&e-parseFloat(e)+1>=0}},1555:(e,t,n)=>{"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:()=>r})},4072:(e,t,n)=>{"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:()=>r})},4869:(e,t,n)=>{"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:()=>r})},7444:(e,t,n)=>{"use strict";n.d(t,{s:()=>l});var r=n(5015),i=n(4449),s=n(377),o=n(6554),a=n(9489),u=n(4072),c=n(1555);const l=e=>{if(e&&"function"==typeof e[o.L])return l=e,e=>{const t=l[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,a.z)(e))return(0,r.V)(e);if((0,u.t)(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,i.z),e);if(e&&"function"==typeof e[s.hZ])return t=e,e=>{const n=t[s.hZ]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=(0,c.K)(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,l}},5015:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},7556:(e,t,n)=>{"use strict";n.d(t,{e:()=>l});var r=n(7841),i=n(6215),s=n(8002),o=n(3018),a=n(4612),u=n(3820),c=n(5496);let l=(()=>{class e{constructor(e,t,n){this.afStore=e,this.afAuth=t,this.router=n,this.user$=new i.X(null),this.afAuth.authState.subscribe(e=>{this.setCurrentUser(e),e?(this.userData=e,localStorage.setItem("user",JSON.stringify(e))):localStorage.removeItem("user")})}get isLoggedIn$(){return this.user$.pipe((0,s.U)(e=>!!e))}signIn(e,t){return this.afAuth.signInWithEmailAndPassword(e,t).then(e=>{e.user&&(this.setUserData(e.user),this.router.navigateByUrl("/"))}).catch(e=>console.error(e))}signUp(e,t){return this.afAuth.createUserWithEmailAndPassword(e,t).then(e=>{e.user&&(this.setUserData(e.user),this.router.navigateByUrl("/"))})}authLogin(e){return this.afAuth.signInWithPopup(e).then(e=>{e.user&&(this.setUserData(e.user),this.router.navigateByUrl("/"))}).catch(e=>console.error(e))}googleAuth(){return this.authLogin(new r.Z.auth.GoogleAuthProvider)}signOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user")})}setUserData(e){const t=this.afStore.doc(`users/${e.uid}`),n={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL};return this.user$.next(n),t.set(n,{merge:!0})}setCurrentUser(e){this.user$.next(e?{uid:e.uid,displayName:e.displayName,email:e.email,photoURL:e.photoURL}:null)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(a.ST),o.LFG(u.zQ),o.LFG(c.F0))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8140:(e,t,n)=>{"use strict";n.d(t,{f:()=>s});var r=n(8583),i=n(3018);let s=(()=>{class e{constructor(e){this.doc=e}setTheme(e){localStorage.setItem("theme",e),"light"===e?(this.doc.body.classList.remove("dark"),this.doc.body.classList.add("light")):(this.doc.body.classList.add("dark"),this.doc.body.classList.remove("light"))}get theme(){return localStorage.getItem("theme")}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1471:(e,t,n)=>{"use strict";var r=n(8583),i=n(3018);class s extends r.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class o extends s{static makeCurrent(){(0,r.HT)(new o)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(u=u||document.querySelector("base"),u?u.getAttribute("href"):null);return null==t?null:function(e){a=a||document.createElement("a"),a.setAttribute("href",e);const t=a.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){u=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,r.Mx)(document.cookie,e)}}let a,u=null;const c=new i.OlP("TRANSITION_ID"),l=[{provide:i.ip1,useFactory:function(e,t,n){return()=>{n.get(i.CZH).donePromise.then(()=>{const n=(0,r.q)();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[c,r.K0,i.zs3],multi:!0}];class h{static init(){(0,i.VLi)(new h)}addToWindow(e){i.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},i.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),i.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),i.dqk.frameworkStabilizers||(i.dqk.frameworkStabilizers=[]),i.dqk.frameworkStabilizers.push(e=>{const t=i.dqk.getAllAngularTestabilities();let n=t.length,r=!1;const s=function(t){r=r||t,n--,0==n&&e(r)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?(0,r.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let d=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const f=new i.OlP("EventManagerPlugins");let p=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(f),i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class g{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=(0,r.q)().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}let m=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),y=(()=>{class e extends m{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(v),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(v))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function v(e){(0,r.q)().remove(e)}const w={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},_=/%COMP%/g;function b(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?b(e,i,n):(i=i.replace(_,e),n.push(i))}return n}function I(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let T=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new S(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case i.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new E(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case i.ifc.ShadowDom:return new C(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=b(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(p),i.LFG(y),i.LFG(i.AFp))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class S{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(w[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=w[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=w[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(i.JOm.DashCase|i.JOm.Important)?e.style.setProperty(t,n,r&i.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&i.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,I(n)):this.eventManager.addEventListener(e,t,I(n))}}class E extends S{constructor(e,t,n,r){super(e),this.component=n;const i=b(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(_,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(_,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class C extends S{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=b(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let k=(()=>{class e extends g{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const A=["alt","control","meta","shift"],x={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},N={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},R={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let O=(()=>{class e extends g{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,i){const s=e.parseEventName(n),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,r.q)().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(A.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&N.hasOwnProperty(t)&&(t=N[t]))}return x[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),A.forEach(r=>{r!=n&&(0,R[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const D=(0,i.eFA)(i._c5,"browser",[{provide:i.Lbi,useValue:r.bD},{provide:i.g9A,useValue:function(){o.makeCurrent(),h.init()},multi:!0},{provide:r.K0,useFactory:function(){return(0,i.RDi)(document),document},deps:[]}]),P=[[],{provide:i.zSh,useValue:"root"},{provide:i.qLn,useFactory:function(){return new i.qLn},deps:[]},{provide:f,useClass:k,multi:!0,deps:[r.K0,i.R0b,i.Lbi]},{provide:f,useClass:O,multi:!0,deps:[r.K0]},[],{provide:T,useClass:T,deps:[p,y,i.AFp]},{provide:i.FYo,useExisting:T},{provide:m,useExisting:y},{provide:y,useClass:y,deps:[r.K0]},{provide:i.dDg,useClass:i.dDg,deps:[i.R0b]},{provide:p,useClass:p,deps:[f,i.R0b]},{provide:r.JF,useClass:d,deps:[]},[]];let L=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:i.AFp,useValue:t.appId},{provide:c,useExisting:i.AFp},l]}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(e,12))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:P,imports:[r.ez,i.hGG]}),e})();"undefined"!=typeof window&&window;var F=n(3820),M=n(4612),U=n(8939),V=n(5496),j=n(8002),q=n(7556);const z=[{path:"auth",loadChildren:()=>n.e(302).then(n.bind(n,5302)).then(e=>e.AuthModule),canActivate:[(()=>{class e{constructor(e,t){this.auth=e,this.router=t}canActivate(e,t){return this.auth.user$.pipe((0,j.U)(e=>!e||(this.router.navigateByUrl("/"),!1)))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(q.e),i.LFG(V.F0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()]},{path:"",loadChildren:()=>n.e(589).then(n.bind(n,1589)).then(e=>e.DashboardModule)}];let B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[V.Bz.forRoot(z)],V.Bz]}),e})();var H=n(8140);let $=(()=>{class e{constructor(e){this.title="gamor","dark"===e.theme&&e.setTheme("dark")}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(H.f))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&i._UZ(0,"router-outlet")},directives:[V.lC],styles:["[_nghost-%COMP%]{display:block}"]}),e})();const G={apiKey:"AIzaSyAI068YDv46nRtdX2Qk1LYUavM0mH5D_mE",authDomain:"gamor-5ea98.firebaseapp.com",projectId:"gamor-5ea98",storageBucket:"gamor-5ea98.appspot.com",messagingSenderId:"350521240022",appId:"1:350521240022:web:7b82ccdbecef951392dc77"};var Z=n(7393);class K{constructor(e){this.total=e}call(e,t){return t.subscribe(new W(e,this.total))}}class W extends Z.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}const Q=[{provide:i.ip1,useFactory:e=>()=>new Promise(t=>{e.user$.pipe(e=>e.lift(new K(1))).subscribe(()=>t())}),deps:[q.e],multi:!0}];let Y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e,bootstrap:[$]}),e.\u0275inj=i.cJS({providers:[...Q],imports:[[L,B,U.hO.initializeApp(G),F.ww,M.yb]]}),e})();(0,i.G48)(),D().bootstrapModule(Y).catch(e=>console.error(e))},6304:(e,t,n)=>{"use strict";function r(e,t,n,r,i,s,o){try{var a=e[s](o),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,u,"next",e)}function u(e){r(o,i,s,a,u,"throw",e)}a(void 0)})}}n.d(t,{Z:()=>i})},4762:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>i,pi:()=>s,_T:()=>o,mG:()=>a,Jh:()=>u,XA:()=>c,CR:()=>l,ev:()=>h});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{u(r.next(e))}catch(t){s(t)}}function a(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}function u(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function h(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}}},e=>{"use strict";e(e.s=1471)}]);